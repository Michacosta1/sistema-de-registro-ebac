try{window.performance.mark("shared~vendor~atlassian~ar.js:eval-start")}catch(e){}function e(e,t,r,s){Object.defineProperty(e,t,{get:r,set:s,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r=globalThis,s={},i={},a=r.parcelRequire94c2;null==a&&(a=function(e){if(e in s)return s[e].exports;if(e in i){var t=i[e];delete i[e];var r={id:e,exports:{}};return s[e]=r,t.call(r.exports,r,r.exports),r.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a},a.register=function(e,t){i[e]=t},r.parcelRequire94c2=a);var n=a.register;r.lb||(r.lb=new Set,r.bq=[],r.rlb=e=>{r.lb.add(e),r.pq()},r.rwr=(e,t,s)=>{r.bq.push({b:e,r:t,d:s}),r.pq()},r.pq=()=>{var e=r.bq.find(e=>e.d.every(e=>r.lb.has(e)));e&&(r.bq=r.bq.filter(t=>t.b!==e.b),e.r(),r.pq())}),n("VSDnB",function(t,r){function s(e){(0,a("gNWRx").setBooleanResolver)(e)}function i(e){return(0,a("gNWRx").resolveBooleanFlag)(e)}function n(e){return(0,a("gNWRx").resolveBooleanFlag)(e)}e(t.exports,"setBooleanFeatureFlagResolver",()=>s),e(t.exports,"getBooleanFF",()=>i),e(t.exports,"fg",()=>n)}),n("gNWRx",function(t,r){e(t.exports,"setBooleanResolver",()=>c),e(t.exports,"resolveBooleanFlag",()=>u);var s=a("6cAn5");let i="__PLATFORM_FEATURE_FLAGS__",n=!(void 0!==s&&void 0!==s.env)&&!1,o={earlyResolvedFlags:new Map,booleanResolver:function(e){return!1}},l="undefined"!=typeof window?window:globalThis;function c(e){l[i].booleanResolver=e}function u(e){if(n)return(0,a("8z44t").debug)('[%s]: The feature flags were enabled while running tests. The flag "%s" will be always enabled.',"@atlaskit/platform-feature-flags",e),!0;try{let t=l[i]?.booleanResolver(e);if("boolean"!=typeof t)return console.warn(`${e} resolved to a non-boolean value, returning false for safety`),!1;return t}catch(e){return!1}}l[i]=l[i]||o}),n("8z44t",function(t,r){e(t.exports,"debug",()=>i);let s=!(globalThis?.process?.env?.JEST_WORKER_ID!==void 0)&&globalThis?.process?.env?.NODE_ENV!=="production",i=(...e)=>{s&&console.debug(...e)}}),n("6wxJn",function(t,r){e(t.exports,"default",()=>s);var s=(0,a("5uXOq").createContext)(null)}),n("tcn7E",function(t,r){e(t.exports,"setInteractionActiveTrace",()=>n),e(t.exports,"setActiveTrace",()=>o),e(t.exports,"getActiveTrace",()=>l),e(t.exports,"clearActiveTrace",()=>c),e(t.exports,"getActiveTraceHttpRequestHeaders",()=>u);let s={context:null},i=()=>Array.from(Array(16),()=>Math.floor(16*Math.random()).toString(16)).join(""),n=(e,t)=>{o(e.replace(/-/g,""),i(),t)},o=(e,t,r)=>{s.context={traceId:e,spanId:t,type:r}},l=()=>s.context||void 0,c=()=>{s.context=null},u=e=>{if(null===s.context)return null;let{traceId:t,spanId:r}=s.context;return(0,a("nfArY").makeTraceHttpRequestHeaders)(t,r)}}),n("nfArY",function(t,r){e(t.exports,"makeTraceHttpRequestHeaders",()=>s);let s=(e,t)=>({"X-B3-TraceId":e,"X-B3-SpanId":t})}),n("aIZdc",function(t,r){e(t.exports,"isFedRamp",()=>s);function s(){let e=globalThis,t=e.MICROS_PERIMETER||e.UNSAFE_ATL_CONTEXT_BOUNDARY;if(t)return t===o;let r=e.location?.hostname?.match(/atlassian-us-gov-mod\.(com|net)|atlassian-us-gov\.(com|net)|atlassian-fex\.(com|net)|atlassian-stg-fedm\.(com|net)/);return!!r&&r.length>0}});const o="fedramp-moderate";n("gSA3s",function(t,r){e(t.exports,"allFeatureFlagsAccessed",()=>s),e(t.exports,"currentFeatureFlagsAccessed",()=>i),e(t.exports,"addFeatureFlagAccessed",()=>n);let s=new Map,i=new Map,n=(e,t)=>{try{globalThis.__CRITERION__&&"function"==typeof globalThis.__CRITERION__.addFeatureFlagAccessed&&globalThis.__CRITERION__.addFeatureFlagAccessed(e,t)}catch(e){}let r=(0,a("g0ix0").redactValue)(t);s.set(e,r),i.set(e,r)}}),n("g0ix0",function(t,r){e(t.exports,"redactValue",()=>o);let s=e=>{try{if("{"===e.charAt(0))return!0}catch(e){}return!1},i=e=>e&&"object"==typeof e&&e.constructor===Object,a=e=>{let t;try{t="string"==typeof e||e instanceof String}catch(e){t=!1}return t},n=e=>a(e)&&s(e)||i(e),o=e=>n(e)?l:e});const l="non_boolean";n("kRatU",function(t,r){e(t.exports,"default",()=>a("9PqPj").default),a("9PqPj"),a("bECnN")}),n("9PqPj",function(t,r){e(t.exports,"default",()=>l);var s=a("bECnN"),i=a("jSerw"),n=a("furey"),o=a("bo3Uw");class l{constructor(e){(0,i.enforceAttributes)(e,["analyticsHandler"],"Feature Flag Client");let{flags:t,analyticsHandler:r,isAutomaticExposuresEnabled:s,ignoreTypes:a}=e;this.flags=new Map,this.flagWrapperCache=new Map,this.customAttributesExposuresCache=new Set,this.trackedFlags=new Set,this.isAutomaticExposuresEnabled=s||!1,this.ignoreTypes=a||!1,this.setFlags(t||{}),this.setAnalyticsHandler(r)}setFlags(e){if((0,i.isObject)(e))for(let t of(Object.entries(e).forEach(([e,t])=>{this.flags.set(e,t)}),this.flagWrapperCache.keys()))e.hasOwnProperty(t)&&this.flagWrapperCache.delete(t)}setAnalyticsHandler(e){this.analyticsHandler=e}setIsAutomaticExposuresEnabled(e){this.isAutomaticExposuresEnabled=e}getFlagWrapper(e){let t=this.flagWrapperCache.get(e);if(void 0!==t)return t;let r=this.flags.get(e);return t=r?new o.default(e,r,this._trackExposure.bind(this),this.sendAutomaticExposure.bind(this),this.ignoreTypes):new n.default,this.flagWrapperCache.set(e,t),t}clear(){this.flags.clear(),this.flagWrapperCache.clear(),this.trackedFlags.clear()}getBooleanValue(e,t){return(0,i.enforceAttributes)(t,["default"],"getBooleanValue"),this.getFlagWrapper(e).getBooleanValue(t)}getVariantValue(e,t){return(0,i.enforceAttributes)(t,["default","oneOf"],"getVariantValue"),this.getFlagWrapper(e).getVariantValue(t)}getJSONValue(e){return this.getFlagWrapper(e).getJSONValue()}getRawValue(e,t){return(0,i.enforceAttributes)(t,["default"],"getRawValue"),this.getFlagWrapper(e).getRawValue(t)}getFlagEvaluation(e,t){return(0,i.enforceAttributes)(t,["default"],"getRawValue"),this.getFlagWrapper(e).getFlagEvaluation(t)}trackFeatureFlag(e,t={}){let r=t?.triggerReason?t.triggerReason:s.ExposureTriggerReason.Manual;if(!(this.flags.has(e)||"value"in t)){console.warn(`No value associated with the flagKey: ${e} with an exposure trigger reason of: ${r}`);return}let i="value"in t?t.value:this.flags.get(e)?.value,a=t?.explanation?t.explanation:this.flags.get(e)?.explanation;r===s.ExposureTriggerReason.AutoExposure?this.sendAutomaticExposure(e,i,a):this._trackExposure(e,{value:i,explanation:a},r)}trackExposure(e,t,r={}){return this._trackExposure(e,t,s.ExposureTriggerReason.Manual,r)}_trackExposure(e,t,r,s){if(!(t&&t.explanation&&this.shouldSendEvent(e,s)))return;(0,i.checkForReservedAttributes)(s);let a={flagKey:e,reason:t.explanation.kind,ruleId:t.explanation.ruleId,value:t.value};this.sendExposureEvent(a,r,s)}shouldSendEvent(e,t){return void 0!==this.analyticsHandler&&(!this.trackedFlags.has(e)||!(0,i.isObjectEmptyOrUndefined)(t)&&!this.customAttributesExposuresCache.has(e))}sendAutomaticExposure(e,t,r){if(!(r&&this.isAutomaticExposuresEnabled&&this.shouldSendEvent(e)))return;let i={flagKey:e,value:t,reason:r.kind||"SIMPLE_EVAL",ruleId:r.ruleId,errorKind:r.errorKind};this.sendExposureEvent(i,s.ExposureTriggerReason.AutoExposure)}sendExposureEvent(e,t,r){if(this.trackedFlags.has(e.flagKey)||(this.analyticsHandler?.sendOperationalEvent({action:"exposed",actionSubject:"feature",attributes:e,tags:["measurement",t],highPriority:!1,source:"@atlaskit/feature-flag-client"}),this.trackedFlags.add(e.flagKey)),!(0,i.isObjectEmptyOrUndefined)(r)){let i={action:"exposed",actionSubject:"feature",attributes:Object.assign({},e,r),tags:["measurement",s.ExposureTriggerReason.hasCustomAttributes,t],highPriority:!0,source:"@atlaskit/feature-flag-client"};this.analyticsHandler?.sendOperationalEvent(i),this.customAttributesExposuresCache.add(e.flagKey)}}getFlagStats(){let e={};for(let[t,r]of this.flagWrapperCache){let{evaluationCount:s}=r;e[t]={evaluationCount:s}}return e}}}),n("bECnN",function(t,r){var s,i;e(t.exports,"ExposureTriggerReason",()=>s),(i=s||(s={})).OptIn="optInExposure",i.Manual="manualExposure",i.Default="defaultExposure",i.AutoExposure="autoExposure",i.hasCustomAttributes="hasCustomAttributes"}),n("jSerw",function(t,r){e(t.exports,"isObject",()=>s),e(t.exports,"isObjectEmptyOrUndefined",()=>i),e(t.exports,"enforceAttributes",()=>a),e(t.exports,"checkForReservedAttributes",()=>n);let s=e=>"object"==typeof e,i=e=>!e||0===Object.keys(e).length,a=(e,t,r)=>{t.forEach(t=>{if(!(t in e)){let e=r?`${r}: `:"";throw Error(`${e}Missing ${t}`)}})},n=e=>{let t=["flagKey","ruleId","reason","value","errorKind"],r=e?Object.keys(e):[];if(t.some(e=>r.includes(e)))throw TypeError(`exposureData contains a reserved attribute. Reserved attributes are: ${t.join(", ")}`)}}),n("furey",function(t,r){e(t.exports,"default",()=>i);let s={kind:"ERROR",errorKind:"FLAG_NOT_FOUND"};class i{evaluate(e){return e}getBooleanValue(e){return this.evaluate(e.default)}getVariantValue(e){return this.evaluate(e.default)}getJSONValue(){return this.evaluate({})}getRawValue(e){return this.evaluate(e.default)}getFlagEvaluation(e){return{value:this.evaluate(e.default),explanation:s}}constructor(){this.evaluationCount=-1}}}),n("bo3Uw",function(t,r){e(t.exports,"default",()=>i);var s=a("bECnN");class i{constructor(e,t,r,s,i){this.flagKey=e,this.flag=t,this.evaluationCount=0,this.trackExposure=r,this.sendAutomaticExposure=s,this.ignoreTypes=i}getCachedResultOrCompute(e,{shouldTrackExposureEvent:t,exposureData:r,oneOf:i,ignoreTypes:a}){let n=s.ExposureTriggerReason.OptIn;void 0===t&&(t=!0,n=s.ExposureTriggerReason.Default),void 0===this.evaluationResult&&(this.evaluationResult=this.computeWithValidation(e,{oneOf:i,ignoreTypes:a}));let o=this.evaluationResult.value;return this.evaluationResult.didFallbackToDefaultValue?o=e:t&&this.trackExposure(this.flagKey,this.flag,n,r),this.sendAutomaticExposure(this.flagKey,o,this.evaluationResult.explanation),this.evaluationCount++,{value:o,explanation:this.evaluationResult.explanation}}computeWithValidation(e,{oneOf:t,ignoreTypes:r}){let s={value:this.flag.value,explanation:this.flag.explanation,didFallbackToDefaultValue:!1};return r||typeof this.flag.value==typeof e?void 0===t||t.includes(this.flag.value)||(s.value=e,s.didFallbackToDefaultValue=!0,s.explanation={...s.explanation||{},kind:"ERROR",errorKind:"VALIDATION_ERROR"}):(s.value=e,s.didFallbackToDefaultValue=!0,s.explanation={...s.explanation||{},kind:"ERROR",errorKind:"WRONG_TYPE"}),s}getBooleanValue(e){return this.getCachedResultOrCompute(e.default,{exposureData:e.exposureData,shouldTrackExposureEvent:e.shouldTrackExposureEvent,oneOf:void 0,ignoreTypes:this.ignoreTypes||!1}).value}getVariantValue(e){return this.getCachedResultOrCompute(e.default,{exposureData:e.exposureData,shouldTrackExposureEvent:e.shouldTrackExposureEvent,oneOf:e.oneOf,ignoreTypes:this.ignoreTypes||!1}).value}getJSONValue(){return this.getCachedResultOrCompute({},{shouldTrackExposureEvent:!1,ignoreTypes:this.ignoreTypes}).value}getRawValue(e){return this.getCachedResultOrCompute(e.default,{shouldTrackExposureEvent:e.shouldTrackExposureEvent,exposureData:e.exposureData,oneOf:void 0,ignoreTypes:!0}).value}getFlagEvaluation(e){return this.getCachedResultOrCompute(e.default,{shouldTrackExposureEvent:e.shouldTrackExposureEvent,exposureData:e.exposureData,ignoreTypes:this.ignoreTypes||!1})}}}),n("buAWB",function(r,s){e(r.exports,"default",()=>o);var i=a("bXrHm");let n="last.screen.event";class o{constructor(e,r={}){if(this._useStargate=e=>null==e||e,this._endsWith=(e,t)=>-1!==e.indexOf(t,e.length-t.length),this._changeInternalUserId=(e,t)=>{this.eventProcessor.getUser().setUserId(e),t&&t!==this.eventProcessor.getUser().getAnonymousId()&&this.eventProcessor.getUser().setAnonymousId(t)},this._createSubproductGetter=e=>(0,a("kljjv").default)(e,"Cannot get subproduct from the callback. Proceeding without it."),this._createEmbeddedProductGetter=e=>(0,a("kljjv").default)(e,"Cannot get embeddedProduct from the callback. Proceeding without it."),this._getLastScreenEvent=()=>{try{return JSON.parse(this._safeSessionStorage.getItem(n)||"")}catch(e){return this._safeSessionStorage.removeItem(n),null}},this._setLastScreenEvent=e=>{this._safeSessionStorage.setItem(n,JSON.stringify({name:e.name,attributes:e.attributes}))},this._shouldEventBeDelayed=e=>{if(!e.tags||-1===e.tags.indexOf("measurement"))return!1;let t=!1!==e.highPriority;return this.eventDelayQueue.isDelayingLowPriorityEvents()&&!t},this._fireEvent=(e,t,r,s)=>{switch(t.eventType){case a("iZhen").eventType.UI:case a("iZhen").eventType.OPERATIONAL:case a("iZhen").eventType.TRACK:return this.eventProcessor.track(e,t,r,s);case a("iZhen").eventType.SCREEN:return this.eventProcessor.page(e,t,r,s);case a("iZhen").eventType.IDENTIFY:return this.eventProcessor.identify(e,t,r,s);default:throw Error(`No handler has been defined for events of type ${t.eventType}`)}},this._fireDelayedEvent=(e,t,r,s)=>{try{this._changeInternalUserId(s.userId,s.anonymousId),t.tags=[...t.tags||[],"sentWithDelay"],this._fireEvent(e,t,r,void 0)}finally{this._changeInternalUserId(this._userInfo.userId,this._userInfo.anonymousId)}},this._delayEvent=(e,t,r,s,i)=>{this.eventDelayQueue.push(e,t,r,s),i&&i()},this._processEvent=(e,t,r,s)=>(this._testingCache.saveEvent(t),this._shouldEventBeDelayed(t))?(this._delayEvent(e,t,r,this._userInfo,s),Promise.resolve()):this._fireEvent(e,t,r,s),this.setEmbeddedProduct=e=>{this._productInfo.embeddedProduct=this._createEmbeddedProductGetter(e),this.resetUIViewedTimers()},this.clearEmbeddedProduct=()=>{this._productInfo.embeddedProduct=this._createEmbeddedProductGetter(null)},this.setSubproduct=e=>{this._productInfo.subproduct=this._createSubproductGetter(e),this.resetUIViewedTimers()},this.setOriginTracingHandlers=e=>{let t=this.originTracing.handleOriginParameters(e,this._historyReplaceFn);Object.keys(t).forEach(e=>{void 0!==t[e].taskSessionId&&this.task.createTaskSessionWithProvidedId(e,t[e].taskSessionId)});let r={};return(Object.keys(t).forEach(e=>{t[e].originTracingAttributes?r[e]=t[e].originTracingAttributes:console.warn(`Handling method for origin parameter ${e} has not returned any attributes`)}),Object.keys(t).length>0)?this.sendOperationalEvent({action:"landed",actionSubject:"origin",source:"webClient",attributes:{originTracesLanded:r}},()=>{}):Promise.resolve()},this.setTenantInfo=(e,t)=>{if(!e)throw Error("Missing tenantIdType");if(e!==a("iZhen").tenantType.NONE&&!t)throw Error("Missing tenantId");if(!(0,a("iZhen").isType)(a("iZhen").tenantType,e))throw Error(`Invalid tenantIdType '${e}', must be an tenantType: [${(0,a("iZhen").objectValues)(a("iZhen").tenantType)}]`);this._tenantInfo={tenantIdType:e,tenantId:t}},this.clearTenantInfo=()=>{this._tenantInfo={}},this.setOrgInfo=e=>{if(!e)throw Error("Missing orgId");this._orgInfo={orgId:e}},this.clearOrgInfo=()=>{this._orgInfo={}},this.setWorkspaceInfo=e=>{if(!e)throw Error("Missing workspaceId");this._workspaceInfo={workspaceId:e}},this.clearWorkspaceInfo=()=>{this._workspaceInfo={}},this.setUserInfo=(e,t)=>{(0,a("ibWJJ").validateIdentifyEvent)(e,t),this._changeInternalUserId(t),this._userInfo={userIdType:e,userId:t,anonymousId:this.eventProcessor.getUser().getAnonymousId()}},this.clearUserInfo=()=>{this._changeInternalUserId(void 0),this._userInfo={anonymousId:this.eventProcessor.getUser().getAnonymousId()}},this.setAlias=(e,t)=>{if(!e)throw Error("Missing aliasType");if(!(0,a("iZhen").isType)(a("iZhen").aliasType,e))throw Error(`Invalid aliasType '${e}', must be an aliasType: [${(0,a("iZhen").objectValues)(a("iZhen").aliasType)}]`);this._aliases[e]=t},this.clearAlias=()=>{this._aliases={}},this.setGroup=(e,t)=>{if(!e)throw Error("Missing groupType");if(!(0,a("iZhen").isType)(a("iZhen").groupType,e))throw Error(`Invalid groupType '${e}', must be an groupType: [${(0,a("iZhen").objectValues)(a("iZhen").groupType)}]`);this._groups[e]=t},this.clearGroup=()=>{this._groups={}},this.getAnonymousId=()=>this._userInfo.anonymousId,this.setUIViewedAttributes=e=>{if(!e)throw Error("Missing uiViewedAttributes");if("object"!=typeof e||Array.isArray(e))throw Error("Invalid uiViewedAttributes type, should be a non array object");this._uiViewedAttributes={...e}},this.getUIViewedAttributes=()=>this._uiViewedAttributes,this.clearUIViewedAttributes=()=>{this._uiViewedAttributes={}},this.sendIdentifyEvent=(e,t,r)=>{this.setUserInfo(e,t);let s={userIdType:e,eventType:a("iZhen").eventType.IDENTIFY};return this._processEvent(t,s,this._context,r)},this.sendPageEvent=(e,t)=>this.sendScreenEvent(e,t),this.sendScreenEvent=(e,t,r)=>{let s,i,n,o;"object"==typeof e?(s=e.name,i=e.attributes,n=e.containers,o=e.tags):(s=e,i=r),(0,a("ibWJJ").validateScreenEvent)(s),(0,a("ibWJJ").validateContainers)(n);let l={name:s,...(0,a("fNiuW").buildScreenEvent)(this._productInfo,this._tenantInfo,this._userInfo,i,e.nonPrivacySafeAttributes,o,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,e,n,this._aliases,this._groups)};return this._setLastScreenEvent(l),this._processEvent(s,l,this._context,(0,a("j7FCN").default)(t,l))},this.sendTrackEvent=(e,t)=>{(0,a("ibWJJ").validateTrackEvent)(e);let r=(0,a("fNiuW").buildActionEvent)(this._productInfo,this._tenantInfo,this._userInfo,e,a("iZhen").eventType.TRACK,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent((0,a("fNiuW").buildActionName)(e),r,this._context,(0,a("j7FCN").default)(t,r))},this.sendUIEvent=(e,t)=>{(0,a("ibWJJ").validateUIEvent)(e);let r=(0,a("fNiuW").buildActionEvent)(this._productInfo,this._tenantInfo,this._userInfo,e,a("iZhen").eventType.UI,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent((0,a("fNiuW").buildActionName)(e),r,this._context,(0,a("j7FCN").default)(t,r))},this.sendOperationalEvent=(e,t)=>{(0,a("ibWJJ").validateOperationalEvent)(e);let r=(0,a("fNiuW").buildActionEvent)(this._productInfo,this._tenantInfo,this._userInfo,e,a("iZhen").eventType.OPERATIONAL,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent((0,a("fNiuW").buildActionName)(e),r,this._context,(0,a("j7FCN").default)(t,r))},this.startUIViewedEvent=e=>{this.stopUIViewedEvent(),this._uiViewedEvent=new(a("edTAR")).default(this._productInfo,()=>({embeddedProduct:this._productInfo.embeddedProduct(),subproduct:this._productInfo.subproduct(),tenantIdType:this._tenantInfo.tenantIdType,tenantId:this._tenantInfo.tenantId,userId:this._userInfo.userId,lastScreenEvent:this._getLastScreenEvent(),attributes:this._uiViewedAttributes}),t=>this.sendUIEvent(t,e)),this._uiViewedEvent.start()},this.stopUIViewedEvent=()=>{this._uiViewedEvent&&(this._uiViewedEvent.stop(),this._uiViewedEvent=null)},this.resetUIViewedTimers=()=>{this._uiViewedEvent&&this._uiViewedEvent.resetTimers()},this.startApdexEvent=e=>{this._apdexEvent.start(e)},this.getApdexStart=e=>this._apdexEvent.getStart(e),this.stopApdexEvent=(e,t)=>{this._apdexEvent.stop(e,t)},this.startLowPriorityEventDelay=(e,t)=>{this.eventDelayQueue.startLowPriorityEventDelay(e,t)},this.stopLowPriorityEventDelay=()=>{this.eventDelayQueue.stopLowPriorityEventDelay()},this.onEvent=(e,t)=>{if(!t)throw Error("Missing analyticsData");if(!t.eventType)throw Error("Missing analyticsData.eventType");if(t.eventType===a("iZhen").eventType.TRACK)return this.sendTrackEvent(t);if(t.eventType===a("iZhen").eventType.UI)return this.sendUIEvent(t);if(t.eventType===a("iZhen").eventType.OPERATIONAL)return this.sendOperationalEvent(t);if(t.eventType===a("iZhen").eventType.SCREEN)return this.sendScreenEvent(t.name,null,t.attributes);if(t.eventType===a("iZhen").eventType.IDENTIFY)return this.sendIdentifyEvent(t.userIdType,t.userId);throw Error(`Invalid analyticsData.eventType '${t.eventType}', must be an eventType: [${(0,a("iZhen").objectValues)(a("iZhen").eventType)}]`)},!e)throw Error("Missing productInfo");if(!e.env)throw Error("Missing productInfo.env");if(!e.product)throw Error("Missing productInfo.product");if(!(0,a("iZhen").isType)(a("iZhen").envType,e.env))throw Error(`Invalid productInfo.env '${e.env}', must be an envType: [${(0,a("iZhen").objectValues)(a("iZhen").envType)}]`);if(e.perimeter&&!(0,a("iZhen").isType)(a("iZhen").perimeterType,e.perimeter))throw Error(`Invalid productInfo.perimeter '${e.perimeter}', must be an perimeterType: [${(0,a("iZhen").objectValues)(a("iZhen").perimeterType)}]`);if(e.origin){if(!(0,a("iZhen").isType)(a("iZhen").originType,e.origin))throw Error(`Invalid productInfo.origin '${e.origin}', must be an originType: [${(0,a("iZhen").objectValues)(a("iZhen").originType)}]`)}else e.origin=a("iZhen").originType.WEB;e.platform?(0,a("ibWJJ").validatePlatform)(e):e.platform=e.origin===a("iZhen").originType.WEB?a("iZhen").platformType.WEB:a("iZhen").platformType.DESKTOP,this.logger=r.logger||console,this._productInfo={...e,subproduct:this._createSubproductGetter(e.subproduct),embeddedProduct:this._createEmbeddedProductGetter(e.embeddedProduct)},this._tenantInfo={},this._orgInfo={},this._uiViewedAttributes={},this._context=(0,a("fNiuW").buildContext)(this._productInfo),this._safeSessionStorage=new(a("lbyTT")).default;let s=this._useStargate(r.useStargate),o=r.apiHost||(0,a("cT8IU").selectHost)({useStargate:s,env:e.env,useLegacyUrl:r.useLegacyUrl,perimeter:e.perimeter,envOverride:e.envOverride}),l=r.apiHostProtocol||"https",c={maxRetryDelay:6e4,minRetryDelay:r.minRetryDelay||1e3,backoffFactor:2,flushWaitMs:r.flushWaitInterval,flushBeforeUnload:r.flushBeforeUnload},u=`awc-${e.env}`,d=r.disableCookiePersistence||!1;this.eventProcessor=new(a("fHcqB")).default({apiHost:o,apiHostProtocol:l,product:e.product,retryQueuePrefix:u,retryQueueOptions:c,xidPromiseGetter:()=>(0,a("iNSWY").XIDPromise)(r.xidConsent,r.xidPromiseFn),logger:this.logger,disableCookiePersistence:d}),this._userInfo={anonymousId:this.eventProcessor.getUser().getAnonymousId(r?.customAnonymousIdGenerator)},this._pageVisibility=new(a("2xy0c")).default,this._tabTracking=new(a("5cwz8")).default,this._sessionTracking=new(a("4NslB")).default({sessionExpiryTime:r.sessionExpiryTime,onNewSessionStarted:r.onNewSessionStarted}),this.task=new(a("3ErS8")).default,this.originTracing=new(a("cxufL")).default,this._apdexEvent=new(a("hI2MJ")).default(this.sendOperationalEvent,this._pageVisibility),this._historyReplaceFn="function"==typeof r.historyReplaceFn?r.historyReplaceFn:a("d7bc1").defaultHistoryReplaceFn,this.eventDelayQueue=new(a("76MW0")).default(this._fireDelayedEvent,r.delayQueueCompressors||[]),this._testingCache=new(a("fOR5Q")).default,this._pageLoadId=t(i)(),this._workspaceInfo={},this._aliases={},this._groups={}}}}),n("iZhen",function(t,r){var s,i,a,n,o,l,c,u,d,h,p,g,m,f,y,E,v,I,b,T;e(t.exports,"envType",()=>s),e(t.exports,"eventType",()=>i),e(t.exports,"platformType",()=>a),e(t.exports,"originType",()=>n),e(t.exports,"tenantType",()=>o),e(t.exports,"userType",()=>l),e(t.exports,"apdexType",()=>c),e(t.exports,"desktopPlatforms",()=>w),e(t.exports,"webPlatforms",()=>S),e(t.exports,"originTracingType",()=>u),e(t.exports,"objectValues",()=>A),e(t.exports,"isType",()=>x),e(t.exports,"perimeterType",()=>d),e(t.exports,"aliasType",()=>h),e(t.exports,"groupType",()=>p),(m=s||(s={})).LOCAL="local",m.DEV="dev",m.STAGING="staging",m.PROD="prod",(f=i||(i={})).TRACK="track",f.UI="ui",f.OPERATIONAL="operational",f.SCREEN="screen",f.IDENTIFY="identify",(y=a||(a={})).MAC="mac",y.LINUX="linux",y.WINDOWS="windows",y.DESKTOP="desktop",y.WEB="web",y.MOBILE_WEB="mobileWeb",(E=n||(n={})).DESKTOP="desktop",E.WEB="web",(v=o||(o={})).CLOUD_ID="cloudId",v.ORG_ID="orgId",v.OPSGENIE_CUSTOMER_ID="opsgenieCustomerId",v.HALP_TEAM_ID="halpTeamId",v.LOOM_ORG_ID="loomOrgId",v.TRANSACTION_ACCOUNT_ID="transactionAccountId",v.TRELLO_WORKSPACE_ID="trelloWorkspaceId",v.NONE="none",(I=l||(l={})).ATLASSIAN_ACCOUNT="atlassianAccount",I.HASHED_EMAIL="hashedEmail",I.LOOM="loom",I.TRELLO="trello",I.OPSGENIE="opsgenie",I.HALP="halp",(b=c||(c={})).TRANSITION="transition",b.INITIAL_LOAD="initialLoad";let w=Object.freeze(["desktop","mac","linux","windows"]),S=Object.freeze(["web","mobileWeb"]);function A(e){return Object.values(e)}function x(e,t){return Object.values(e).indexOf(t)>-1}(u||(u={})).ATL_ORIGIN="atlOrigin",(T=d||(d={})).C5="c5",T.COMMERCIAL="commercial",T.FEDRAMP_MODERATE="fedramp-moderate",T.FEDRAMP_HIGH="fedramp-high",h||(h={}),(p||(p={})).TRANSACTION_ACCOUNT_ID="transactionAccountId",g||(g={})}),n("hI2MJ",function(t,r){e(t.exports,"default",()=>s);class s{constructor(e,t){if(this._getEventKey=({task:e,taskId:t})=>t?`${e}.${t}`:e,this._getEventTimingByName=e=>{let t=this._performance.getEntriesByName(e);return t[t.length-1]},this._getApdexFields=e=>{let t=this._getApdexTimings(e),r=this._calculateApdex({duration:t.duration,threshold:e.threshold});return{...t,apdex:r}},this._getApdexTimings=e=>{let t=this._getEventKey(e),r=`${t}-start`,s=e.startTime||this._getStartTime(e,r),i=e.stopTime||this._getStopTime();return this._cleanApdexState(t),{startTime:s,stopTime:i,duration:i-s}},this._getStartTime=(e,t)=>{let r=this._performance.getTimeOrigin();return e.type===a("iZhen").apdexType.INITIAL_LOAD?r:r+this._getEventTimingByName(t).startTime},this._getStopTime=()=>this._performance.getTimeOrigin()+this._performance.now(),this._cleanApdexState=e=>{this._performance.clearMarks(`${e}-start`),this._performance.clearMarks(`${e}-stop`),this._startedEvents.delete(e)},this._getVisibilityFields=e=>{let t;if(e.type===a("iZhen").apdexType.INITIAL_LOAD)t=!this._wasPreviouslyHidden;else if(e.type===a("iZhen").apdexType.TRANSITION){let r=this._getEventKey(e);t=this._isActiveEvents.get(r)}return(e.startTime||e.stopTime)&&(t=!this._pageVisibility.getIsHidden()),{isActiveTab:t}},this._calculateApdex=({duration:e,threshold:t=this._threshold})=>e<=t?1:e<=4*t?.5:0,this._validateStartEvent=e=>{if(!e)throw Error('Missing "event" in Apdex start event');if(!e.task)throw Error('Missing "task" in Apdex start event');if("string"!=typeof e.task)throw Error('Invalid "task" in Apdex start event');if(e.taskId&&"string"!=typeof e.taskId)throw Error('Invalid "taskId" in Apdex start event')},this._validateStopEvent=e=>{if(!e)throw Error('Missing "event" in Apdex stop event');if(!e.task)throw Error('Missing "task" in Apdex stop event');if("string"!=typeof e.task)throw Error('Invalid "task" in Apdex stop event');if(e.taskId&&"string"!=typeof e.taskId)throw Error('Invalid "taskId" in Apdex stop event');if(!e.type)throw Error('Missing "type" in Apdex stop event');if(e.type&&!(0,a("iZhen").isType)(a("iZhen").apdexType,e.type))throw Error('Invalid "type" in Apdex stop event');if(e.threshold&&"number"!=typeof e.threshold)throw Error('Invalid "threshold" in Apdex stop event');if(!e.startTime&&e.type===a("iZhen").apdexType.TRANSITION){let t=this._getEventKey(e);if(!this._startedEvents.has(t))throw Error(`Apdex event transition "${t}" was not started`)}if(e.startTime&&!("number"==typeof e.startTime&&e.startTime>=0))throw Error('Invalid "startTime" in Apdex stop event');if(e.stopTime&&"number"!=typeof e.stopTime)throw Error('Invalid "stopTime" in Apdex stop event');if(e.stopTime<=e.startTime)throw Error('"stopTime" should be greater than "startTime" in Apdex stop event')},this._shouldSendEvent=e=>!!e&&"number"==typeof e.apdex,this._sendEvent=(e,t)=>{this._shouldSendEvent(e)&&this._onEvent({source:"ui",action:"readyForUser",actionSubject:"ui",attributes:{...e.additionalAttributes,task:e.task,taskId:e.taskId,type:e.type,threshold:e.threshold||this._threshold,apdex:e.apdex,startTime:e.startTime,stopTime:e.stopTime,duration:e.duration,isActiveTab:e.isActiveTab}},t)},!e)throw Error("Missing onEvent callback");if("function"!=typeof e)throw Error("Invalid onEvent, must be function");if(!(t instanceof a("2xy0c").default))throw Error("Invalid pageVisibility, must be PageVisibility class");this._startedEvents=new Map,this._performance=new(a("acAer")).default,this._onEvent=e,this._threshold=1e3,this._wasPreviouslyHidden=t.getIsHidden(),this._isActiveEvents=new Map,this._pageVisibility=t,this._pageVisibility.addCallback("apdexEvent",e=>{this.onVisibilityChange(!e)})}start(e){if(this._validateStartEvent(e),!this._performance.isAvailable())return;let t=this._getEventKey(e),r=`${t}-start`;this._startedEvents.set(t,!0),this._isActiveEvents.set(t,!this._pageVisibility.getIsHidden()),this._performance.clearMarks(r),this._performance.mark(r)}getStart(e){if(this._validateStartEvent(e),!this._performance.isAvailable())return;let t=this._getEventKey(e),r=`${t}-start`;return this._getEventTimingByName(r)}stop(e,t){if(this._validateStopEvent(e),!this._performance.isAvailable())return;let r=this._getApdexFields(e),s=this._getVisibilityFields(e);this._sendEvent({...e,...r,...s},t)}onVisibilityChange(e){e||(this._wasPreviouslyHidden=!0,Array.from(this._isActiveEvents.keys()).forEach(e=>this._isActiveEvents.set(e,!1)))}}}),n("2xy0c",function(t,r){e(t.exports,"default",()=>s);class s{constructor(){this._bindEventListeners=()=>{document.addEventListener(this._visibilityChange,this._handleVisibilityChange,!1)},this._handleVisibilityChange=()=>{let e=document[this._hidden];this._isHidden=e,this._callbacks.forEach(t=>t(e))},this._isHidden=!1,this._callbacks=new Map,this._hidden=void 0,this._visibilityChange=void 0,"undefined"!=typeof document&&(void 0!==document.hidden?(this._isHidden=document.hidden,this._hidden="hidden",this._visibilityChange="visibilitychange"):void 0!==document.msHidden?(this._isHidden=document.msHidden,this._hidden="msHidden",this._visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(this._isHidden=document.webkitHidden,this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"),void 0!==document.addEventListener&&void 0!==this._hidden&&this._bindEventListeners())}addCallback(e,t){if("string"!=typeof e)throw Error("Invalid name, must be string");if("function"!=typeof t)throw Error("Invalid callback, must be function");this._callbacks.set(e,t)}removeCallback(e){this._callbacks.has(e)&&this._callbacks.delete(e)}getIsHidden(){return this._isHidden}}}),n("acAer",function(t,r){e(t.exports,"default",()=>s);class s{constructor(){this._performance=window.performance}clearMarks(...e){this._performance&&this._performance.clearMarks&&this._performance.clearMarks(...e)}mark(...e){this._performance&&this._performance.mark&&this._performance.mark(...e)}getEntriesByName(...e){return this._performance&&this._performance.getEntriesByName?this._performance.getEntriesByName(...e):[]}getTimeOrigin(){return this._performance&&(this._performance.timeOrigin||this._performance.timing)?this._performance.timeOrigin||this._performance.timing.navigationStart:0}now(){return this._performance&&this._performance.now?this._performance.now():Date.now?Date.now():+new Date}isAvailable(){return!!this._performance&&!!this._performance.clearMarks&&!!this._performance.mark&&!!this._performance.getEntriesByName&&!!this._performance.timing}}}),n("kljjv",function(t,r){e(t.exports,"default",()=>i);let s=e=>"function"==typeof e;var i=(e,t)=>()=>{if(s(e))try{return e()}catch(e){console.error(`${t} - ${e instanceof Error?e.message:String(e)}`);return}return e}}),n("fNiuW",function(t,r){function s(e){return{tenantIdType:e.tenantIdType,tenantId:e.tenantId}}function i(e){return{userIdType:e.userIdType}}function n(e){return{orgId:e.orgId}}function o(e){return{workspaceId:e.workspaceId}}function l(e){if(p(e))return{aliases:e}}function c(e){if(p(e))return{groups:e}}function u(e){return e.anonymousId?{anonymousId:e.anonymousId}:{}}function d(e,t){return void 0===t?e:t}function h(e,t){let r=t||{},s=d(e.env,r.env),i=d(e.product,r.product),a=d(e.subproduct(),r.subproduct);return{env:s,product:i,subproduct:a,version:d(e.version,r.version),origin:d(e.origin,r.origin),platform:d(e.platform,r.platform)}}function p(e){return(0,a("eB7xz").isPlainObject)(e)&&Object.keys(e).length>0}function g(e,t){return p(t)?{[e]:t}:void 0}function m(e){if(p(e))return g("containers",function(e){let t={};return Object.keys(e).forEach(r=>{let s=e[r];t[r]={id:s.id,type:s.type}}),t}(e))}function f(e,t){return{containerType:e.containerType,containerId:e.containerId,source:e.source,objectType:e.objectType,objectId:e.objectId,actionSubject:e.actionSubject,action:e.action,actionSubjectId:e.actionSubjectId,attributes:e.attributes,nonPrivacySafeAttributes:e.nonPrivacySafeAttributes,tags:e.tags,highPriority:e.highPriority,eventType:t,...m(e.containers)}}function y(e,t,r,d,p,f,y,E,v,I,b,T,w,S,A,x){let C=h(e),_=s(t),O=i(r),D=n(I),k=o(T),R={title:"",path:"",url:"",referrer:"",search:"",eventType:a("iZhen").eventType.SCREEN};return{...C,..._,...O,...D,...R,...g("attributes",d),...g("nonPrivacySafeAttributes",p),...m(S),...u(w),tags:f,tabId:y,sessionId:E,taskSessions:v,pageLoadId:b,...k,...l(A),...c(x)}}function E(e){return`${e.actionSubject} ${e.action}`}function v(e){let t=window.screen||{};return{context:{locale:e.locale,screen:{width:t.width,height:t.height,density:window.devicePixelRatio},library:{name:"analytics.js",version:"0.0.0-use.local"}}}}function I(e,t,r,a,d,p,g,m,y,E,v,I,b){let T=h(e,function(e){let{env:t,product:r,subproduct:s,version:i,origin:a,platform:n}=e;return{env:t,product:r,subproduct:s,version:i,origin:a,platform:n}}(a)),w=s(t),S=n(y),A=o(v),x=i(r),C=f(a,d);return{...T,...w,...S,...x,...C,...u(a),tabId:p,sessionId:g,taskSessions:m,pageLoadId:E,...A,...l(I),...c(b)}}e(t.exports,"buildActionFields",()=>f),e(t.exports,"buildScreenEvent",()=>y),e(t.exports,"buildActionName",()=>E),e(t.exports,"buildContext",()=>v),e(t.exports,"buildActionEvent",()=>I)}),n("eB7xz",function(t,r){function s(e){return!0==(null!==e&&"object"==typeof e&&!1===Array.isArray(e))&&"[object Object]"===Object.prototype.toString.call(e)}function i(e){if(!1===s(e))return!1;let t=e.constructor;if("function"!=typeof t)return!1;let r=t.prototype;return!1!==s(r)&&"isPrototypeOf"in r}e(t.exports,"isPlainObject",()=>i)}),n("76MW0",function(t,r){e(t.exports,"default",()=>s);class s{constructor(e,t){this.push=(e,t,r,s)=>{this.delayQueue.push(e,t,r,s)},this.startLowPriorityEventDelay=(e=c,t)=>{if(Number.isNaN(e)||e<=0)throw Error(`Invalid timeout period: ${e}, must be a number greater than 0`);this.delayTimeout&&clearTimeout(this.delayTimeout);let r=e?Math.min(e,u):u;this.delayCallback=t,this.delayTimeout=setTimeout(()=>this.stopLowPriorityEventDelay(a("fqOJ4").StopLowPriorityEventDelayReason.TIMEOUT),r),this.delayQueue.cancelFlush(),this.isDelaying=!0},this.stopLowPriorityEventDelay=(e=a("fqOJ4").StopLowPriorityEventDelayReason.MANUAL)=>{this.delayTimeout&&(clearTimeout(this.delayTimeout),this.delayTimeout=void 0),this.delayQueue.startFlush(),this.isDelaying=!1,this.delayCallback?.(e),this.delayCallback=void 0},this.isDelayingLowPriorityEvents=()=>this.isDelaying,this.isDelaying=!1,this.delayQueue=new(a("rwsom")).default(e,t)}}});const c=1e4,u=3e4;n("rwsom",function(t,r){e(t.exports,"default",()=>s);class s{constructor(e,t){this.push=(e,t,r,s)=>{this.eventArgs.push({identifier:e,builtEvent:t,context:r,userInfo:s})},this.size=()=>this.eventArgs.length,this.startFlush=()=>{try{this.eventArgs=this.compressEventArgs(this.eventArgs)}catch(e){console.warn(`Failed to perform compression on the delayed analytics events. Error: ${e.message}. Sending ${this.eventArgs.length} uncompressed events instead`)}this.flushNextBatch()},this.cancelFlush=()=>{this.flushBatchTimeout&&(clearTimeout(this.flushBatchTimeout),this.flushBatchTimeout=null)},this.flushNextBatch=()=>{this.eventArgs.splice(0,7).forEach(e=>this.processFn(e.identifier,e.builtEvent,e.context,e.userInfo)),this.eventArgs.length>0?this.flushBatchTimeout=setTimeout(()=>this.flushNextBatch(),100):this.flushBatchTimeout=null},this.compressEventArgs=e=>{let[t,r]=(0,a("gYqa8").partition)(e,e=>this.compressor.canCompress(e.builtEvent)),s=t.reduce((e,t)=>{let r=e.find(e=>(0,a("gYqa8").equals)(e.userInfo,t.userInfo)&&(0,a("gYqa8").equals)(e.context,t.context));return r?r.eventArgs.push(t):e.push({userInfo:t.userInfo,context:t.context,eventArgs:[t]}),e},[]).reduce((e,t)=>{try{let r=t.eventArgs.map(e=>e.builtEvent),s=this.compressor.compress(r).map(e=>({identifier:(0,a("fNiuW").buildActionName)(e),builtEvent:e,userInfo:t.userInfo,context:t.context}));return e.concat(s)}catch(e){return console.warn(`Failed to compress some analytics events. Error: ${e.message}. Sending ${t.eventArgs.length} uncompressed events instead`),t.eventArgs}},[]);return r.forEach(e=>s.push(e)),s},this.processFn=e,this.flushBatchTimeout=null,this.eventArgs=[],this.compressor=new(a("59vML")).default(t)}}}),n("gYqa8",function(t,r){e(t.exports,"mapKeys",()=>s),e(t.exports,"pick",()=>i),e(t.exports,"omitBy",()=>a),e(t.exports,"pickBy",()=>n),e(t.exports,"omit",()=>o),e(t.exports,"equals",()=>l),e(t.exports,"partition",()=>c);let s=(e,t)=>Object.keys(e).reduce((r,s)=>(r[t(e[s],s,e)]=e[s],r),{}),i=(e,t)=>t.reduce((t,r)=>(r in e&&(t[r]=e[r]),t),{}),a=(e,t)=>Object.keys(e).filter(r=>!t(e[r],r)).reduce((t,r)=>(t[r]=e[r],t),{}),n=(e,t)=>Object.keys(e).filter(r=>t(e[r],r)).reduce((t,r)=>(t[r]=e[r],t),{}),o=(e,t)=>Object.keys(e).filter(e=>0>t.indexOf(e)).reduce((t,r)=>(t[r]=e[r],t),{}),l=(e,t)=>{if(e===t)return!0;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(!e||!t||"object"!=typeof e&&"object"!=typeof t)return e===t;if(e.prototype!==t.prototype)return!1;let r=Object.keys(e);return r.length===Object.keys(t).length&&r.every(r=>l(e[r],t[r]))},c=(e,t)=>e.reduce((e,r,s,i)=>(e[t(r,s,i)?0:1].push(r),e),[[],[]])}),n("59vML",function(t,r){e(t.exports,"default",()=>s);class s{constructor(e=[]){if(this.canCompress=e=>this.compressionRules.some(t=>t.canCompress(e)),this.compress=e=>this.createGroups(e).reduce((e,t)=>{let r=this.compressGroup(t);return e.concat(r)},[]),this.createGroups=e=>e.reduce((e,t)=>{let r;let s=this.compressionRules.find(e=>e.canCompress(t));if(s){let e=(0,a("fNiuW").buildActionFields)(t,t.eventType);r=(0,a("gYqa8").omit)(t,Object.keys(e))}let i=e.find(e=>s===e.compressor&&(0,a("gYqa8").equals)(r,e.contextFields));return i?i.events.push(t):e.push({contextFields:r,compressor:s,events:[t]}),e},[]),this.compressGroup=e=>{if(!e.compressor)return e.events;try{return e.compressor.compress(e.events).map(t=>({...t,...e.contextFields}))}catch(t){return console.warn(`Failed to compress some analytics events. Error: ${t.message}. Sending ${e.events.length} uncompressed events instead`),e.events}},!Array.isArray(e))throw Error("Event compressors must be constructed with an array of CompressionRules");if(!e.every(e=>e instanceof a("fYgl8").CompressionRule))throw Error("Event compressors can only be constructed with instances of CompressionRule");this.compressionRules=e}}}),n("fYgl8",function(t,r){e(t.exports,"CompressionRule",()=>s);class s{constructor(e,t){if(this.canCompress=e=>{try{return e&&(0,a("ibWJJ").isActionEventType)(e.eventType)&&this.predicate(e)}catch(e){return!1}},this.compress=e=>{let[t,r]=(0,a("gYqa8").partition)(e,e=>this.canCompress(e)),s=this.compressFn(t);if(!s)throw Error("No events were returned from the compression function");return s.forEach(e=>{(0,a("ibWJJ").validateActionEventType)(e.eventType),(0,a("ibWJJ").validateActionEvent)(e)}),s.concat(r)},"function"!=typeof e)throw Error("Invalid predicate, must be a function that accepts an event and returns a boolean");if("function"!=typeof t)throw Error("Invalid compressFn, must be a function that both accepts and returns an array of events");this.predicate=e,this.compressFn=t}}}),n("ibWJJ",function(t,r){e(t.exports,"validateContainers",()=>i),e(t.exports,"isActionEventType",()=>n),e(t.exports,"validateActionEventType",()=>o),e(t.exports,"validateActionEvent",()=>l),e(t.exports,"validateScreenEvent",()=>c),e(t.exports,"validateTrackEvent",()=>u),e(t.exports,"validateDwellBaseEvent",()=>d),e(t.exports,"validateUIEvent",()=>h),e(t.exports,"validateOperationalEvent",()=>p),e(t.exports,"validateIdentifyEvent",()=>g),e(t.exports,"validatePlatform",()=>m);let s=Object.freeze([a("iZhen").eventType.OPERATIONAL,a("iZhen").eventType.TRACK,a("iZhen").eventType.UI]);function i(e){if(e){if(e&&e.constructor!==Object)throw Error("properties.containers must be an Object");Object.values(e).forEach(e=>(function(e){if(!(0,a("eB7xz").isPlainObject)(e))throw Error("properties.containers must be an Object");if(!("id"in e))throw Error("properties.containers is missing field 'id'");if("string"!=typeof e.id)throw Error("properties.containers.id must be of type String");if("type"in e&&"string"!=typeof e.type)throw Error("properties.containers.type must be of type String")})(e))}}function n(e){switch(e){case a("iZhen").eventType.OPERATIONAL:case a("iZhen").eventType.TRACK:case a("iZhen").eventType.UI:return!0;default:return!1}}function o(e){if(!n(e))throw Error(`Invalid action event type: ${e}, must be one of: [${s}]`);return!0}function l(e){if(!e)throw Error("Missing event");if(!e.source)throw Error("Missing event.source");if(!e.actionSubject)throw Error("Missing event.actionSubject");if(!e.action)throw Error("Missing event.action");i(e.containers)}function c(e){if(!e)throw Error("Missing name")}function u(e){l(e)}function d(e){if(!e)throw Error("Missing event");if(!e.source)throw Error("Missing event.source");if(!e.actionSubject)throw Error("Missing event.actionSubject")}function h(e){l(e)}function p(e){l(e)}function g(e,t){if(!e)throw Error("Missing userIdType");if(!t)throw Error("Missing userId");if(!(0,a("iZhen").isType)(a("iZhen").userType,e))throw Error(`Invalid userIdType '${e}', must be an userType: [${(0,a("iZhen").objectValues)(a("iZhen").userType)}]`)}function m(e){if(!(0,a("iZhen").isType)(a("iZhen").platformType,e.platform))throw Error(`Invalid productInfo.platform '${e.platform}', must be a platformType: [${(0,a("iZhen").objectValues)(a("iZhen").platformType)}]`);if(e.origin===a("iZhen").originType.DESKTOP&&!(0,a("iZhen").isType)(a("iZhen").desktopPlatforms,e.platform))throw Error(`Invalid productInfo.platform '${e.platform}', must be one of [mac, linux, windows]`);if(e.origin===a("iZhen").originType.WEB&&!(0,a("iZhen").isType)(a("iZhen").webPlatforms,e.platform))throw Error(`Invalid productInfo.platform '${e.platform}', must be one of [web, mobileWeb]`)}}),n("fqOJ4",function(t,r){var s,i;e(t.exports,"StopLowPriorityEventDelayReason",()=>s),(i=s||(s={})).TIMEOUT="timeout",i.MANUAL="manual"}),n("fHcqB",function(r,s){e(r.exports,"default",()=>n);var i=a("bXrHm");class n{constructor(e){this.sendEvents=async(e,t)=>{let r=this.resilienceQueue.getGlobalRetryCount(),s=this.metrics.getMetricsPayload(),i={...s,httpRetryCount:r};for(let e in i)0===i[e]&&delete i[e];let n=await this.attachXIDs(e),o=new Date().toISOString(),l=n.map(e=>(e.msg.sentAt=o,e.msg));try{let e=await (0,a("cdwq4").sendEvents)({url:this.gasv3BatchUrl,batch:{batch:l,sentAt:o,metadata:i},timeout:this.options.requestTimeout});this.metrics.subtractFromMetrics(s),t(null,e)}catch(e){t(e,null)}},this.options={...e,requestTimeout:e.requestTimeout||a("57AWV").DEFAULT_REQUEST_TIMEOUT,retryQueueOptions:e.retryQueueOptions||{},logger:e.logger||console,disableCookiePersistence:e.disableCookiePersistence||!1},this.user=new(a("9Mu5e")).default(this.options?.disableCookiePersistence),this.xidPromiseCallback=e.xidPromiseGetter(),this.gasv3BatchUrl=`${e.apiHostProtocol}://${e.apiHost}/batch`,this.metrics=(0,a("6xafg").default)(),this.resilienceQueue=(0,a("hFrZh").default)(e.retryQueuePrefix,e.product,this.options.retryQueueOptions,this.options.logger),this.resilienceQueue.start(this.sendEvents)}getUser(){return this.user}async track(e,t,r,s){let i={...{...this.buildBaseEvent(r,a("gjgR4").SegmentEventTypes.TRACK,t),type:a("gjgR4").SegmentEventTypes.TRACK,properties:(0,a("1T3jD").prepareEventProperties)(t),event:e},messageId:this.createMessageId()},n=this.packageEvent(i);await this.resilienceQueue.addItem(n),s&&s()}async page(e,t,r,s){let i={...{...this.buildBaseEvent(r,a("gjgR4").SegmentEventTypes.PAGE,t),type:a("gjgR4").SegmentEventTypes.PAGE,properties:(0,a("1T3jD").prepareEventProperties)(t),name:e},messageId:this.createMessageId()},n=this.packageEvent(i);await this.resilienceQueue.addItem(n),s&&s()}async identify(e,t,r,s){let i={...{...this.buildBaseEvent(r,a("gjgR4").SegmentEventTypes.IDENTIFY,t),type:a("gjgR4").SegmentEventTypes.IDENTIFY,traits:(0,a("1T3jD").prepareEventProperties)(t)},messageId:this.createMessageId()},n=this.packageEvent(i);await this.resilienceQueue.addItem(n),s&&s()}buildBaseEvent(e,t,r){let s=(0,a("1T3jD").prepareEventProperties)(e);return{context:(0,a("1T3jD").buildContext)(s),timestamp:new Date().toISOString(),type:t,userId:this.user.getUserId(),anonymousId:r.anonymousId||this.user.getAnonymousId()}}createMessageId(){return`ajs-${t(i)()}`}packageEvent(e){let{apiHost:t,apiHostProtocol:r}=this.options;return{headers:{"Content-Type":"text/plain"},msg:e,url:`${r}://${t}/${e.type.charAt(0)}`}}async attachXIDs(e){return this.xidPromiseCallback?(0,a("kM7SS").attachXidToMultipleEvents)(e,this.xidPromiseCallback):Promise.resolve(e)}}}),n("hFrZh",function(t,r){e(t.exports,"default",()=>s);var s=(e,t,r,s)=>new(a("jChFm")).default(e,t,r||{},s)}),n("jChFm",function(t,r){e(t.exports,"default",()=>n);let s={backoffFactor:0,backoffJitterPercentage:0,flushWaitMs:6e4,minRetryDelay:6e4,maxRetryDelay:6e4},i={backoffFactor:2,backoffJitterPercentage:.2,batchFlushSize:7,flushBeforeUnload:!1,flushWaitMs:500,maxAttempts:10,maxItems:1e3,maxRetryDelay:3e4,minRetryDelay:1e3};class n{constructor(e,t,r,i){this.queuePrefix=e,this.resilience=new(a("42k5W")).default(t,{logger:i,maxAttempts:r?.maxAttempts,maxEventLimit:r?.maxItems}),this.options=this.buildOptions(r),this.scheduler=new(a("38r8F")).default({...this.options,waitInterval:r?.flushBeforeUnload?0:this.options.flushWaitMs},this.scheduleCallback.bind(this)),this.longPollingScheduler=new(a("38r8F")).default({...s,waitInterval:s.flushWaitMs},this.scheduleLongCallBack.bind(this)),this.metricsCollector=(0,a("6xafg").default)(),this.networkStatus=new(a("1LZzU")).default(e=>{e===a("ePz85").NetworkStatusEnum.OFFLINE?this.scheduler.stop():this.checkEventCountAndReschedule()})}start(e){this.batchFlushCallback=e,this.longPollingScheduler.schedule()}stop(){this.scheduler.stop(),this.longPollingScheduler.stop()}async addItem(e){let t=JSON.parse(JSON.stringify(e)),{numberOfEvictedItems:r}=await this.resilience.addItem(t,{},a("2A2TO").GuardPolicy.EVICT);this.scheduler.schedule(),this.metricsCollector.addToEventCount(),r>0&&this.metricsCollector.addToItemsDiscardedByOverflowCounter(r)}getGlobalRetryCount(){return this.scheduler.getFailureCount()}async scheduleCallback(e){if(this.networkStatus.getNetworkStatus()===a("ePz85").NetworkStatusEnum.OFFLINE){e(a("aRK7K").DoneState.NOOP);return}try{let t=await this.resilience.processItems(this.flush.bind(this),this.options.batchFlushSize);e(t)}catch(t){if(t.name===a("fKoyL").CallbackProcessingErrorName){e(a("aRK7K").DoneState.ERROR);return}}finally{await this.checkEventCountAndReschedule()}}async checkEventCountAndReschedule(){let e=await this.resilience.getItemCount();e>0&&this.scheduler.schedule({immediate:e>=this.options.batchFlushSize})}async scheduleLongCallBack(e){let t=(0,a("k3k8u").default)(this.queuePrefix);this.metricsCollector.addToPurgedQueuesMetrics(t);let r=await (0,a("dviIT").default)(this.queuePrefix,async e=>{let t=e.map(e=>({item:e.item,retryAttempts:e.attemptNumber,id:e.id})),{items:r}=await this.resilience.bulkAddItem(t,a("2A2TO").GuardPolicy.IGNORE);return r.length===t.length?{status:"successful"}:{status:"partial",acceptedItemIds:r.map(e=>e.id)}});this.metricsCollector.addToReclaimMetrics(r),await this.checkEventCountAndReschedule(),e(a("aRK7K").DoneState.SUCCESS),this.longPollingScheduler.schedule()}flush(e,t){this.metricsCollector.setResilienceMechanism(this.resilience.storeType());let{batchFlushCallback:r}=this;if(!r)throw Error("batchFlushCallback has not been set. Call PullBatchableQueue#start first.");return new Promise((s,i)=>{if(e.length<=0){s(a("aRK7K").DoneState.NOOP);return}r(e.map(e=>{let t=e.item;return e.retryAttempts>0&&t.msg&&(t.msg._metadata||(t.msg._metadata={}),t.msg._metadata.failedAttempts=e.retryAttempts),t}),e=>{e?(t.numberOfDeletedItems>0&&this.metricsCollector.addToItemsDiscardedByRetryCounter(t.numberOfDeletedItems),i(e)):s(a("aRK7K").DoneState.SUCCESS)})})}buildOptions(e){return{backoffFactor:e?.backoffFactor||i.backoffFactor,backoffJitterPercentage:e?.backoffJitterPercentage!==void 0?e.backoffJitterPercentage:i.backoffJitterPercentage,batchFlushSize:e?.batchFlushSize||i.batchFlushSize,flushBeforeUnload:e?.flushBeforeUnload||i.flushBeforeUnload,flushWaitMs:e?.flushWaitMs||i.flushWaitMs,maxItems:e?.maxItems||i.maxItems,maxAttempts:e?.maxAttempts||i.maxAttempts,maxRetryDelay:e?.maxRetryDelay||i.maxRetryDelay,minRetryDelay:e?.minRetryDelay||i.minRetryDelay}}}}),n("k3k8u",function(t,r){e(t.exports,"default",()=>i);let s=Object.values(a("i1Orc").LocalStorageKeySuffix);var i=e=>{if("string"!=typeof e||0===e.length)return 0;try{let t=Object.keys(localStorage).filter(t=>t&&t.startsWith(`${e}.`)||!1).map(e=>e.split(".")).filter(e=>3===e.length&&s.includes(e[2])).reduce((e,t)=>{let[,r,s]=t;return void 0===e[r]&&(e[r]={}),e[r][s]=!0,e},{}),r=Object.keys(t).filter(e=>!0!==t[e][a("i1Orc").LocalStorageKeySuffix.ACK]);return r.forEach(t=>{let{queue:r,inProgress:s,reclaimStart:i,reclaimEnd:n}=(0,a("eswaT").createLocalStorageKeys)(e,t);localStorage.removeItem(s),localStorage.removeItem(r),localStorage.removeItem(i),localStorage.removeItem(n)}),r.length}catch(e){}return 0}}),n("i1Orc",function(t,r){var s,i,a,n;e(t.exports,"LocalStorageKeySuffix",()=>s),e(t.exports,"Timers",()=>i),(a=s||(s={})).IN_PROGRESS="inProgress",a.QUEUE="queue",a.RECLAIM_START="reclaimStart",a.RECLAIM_END="reclaimEnd",a.ACK="ack",(n=i||(i={}))[n.RECLAIM_TIMEOUT=1e4]="RECLAIM_TIMEOUT",n[n.RECLAIM_WAIT=500]="RECLAIM_WAIT",n[n.RECLAIM_WAIT_THRESHOLD=2e3]="RECLAIM_WAIT_THRESHOLD"}),n("eswaT",function(t,r){e(t.exports,"createLocalStorageKeys",()=>s);let s=(e,t)=>({[a("i1Orc").LocalStorageKeySuffix.ACK]:`${e}.${t}.${a("i1Orc").LocalStorageKeySuffix.ACK}`,[a("i1Orc").LocalStorageKeySuffix.QUEUE]:`${e}.${t}.${a("i1Orc").LocalStorageKeySuffix.QUEUE}`,[a("i1Orc").LocalStorageKeySuffix.IN_PROGRESS]:`${e}.${t}.${a("i1Orc").LocalStorageKeySuffix.IN_PROGRESS}`,[a("i1Orc").LocalStorageKeySuffix.RECLAIM_START]:`${e}.${t}.${a("i1Orc").LocalStorageKeySuffix.RECLAIM_START}`,[a("i1Orc").LocalStorageKeySuffix.RECLAIM_END]:`${e}.${t}.${a("i1Orc").LocalStorageKeySuffix.RECLAIM_END}`})}),n("dviIT",function(r,s){e(r.exports,"default",()=>d);var i=a("bXrHm");let n=e=>new Promise(t=>{setTimeout(t,e)}),o=e=>{try{return Object.keys(localStorage).filter(t=>t.startsWith(e)).map(e=>e.split(".")).filter(t=>{if(3===t.length&&t[0]===e&&t[2]===a("i1Orc").LocalStorageKeySuffix.ACK)try{let e=localStorage.getItem(t.join("."));if(e){let t=parseInt(e);return a("i1Orc").Timers.RECLAIM_TIMEOUT+t<Date.now()}}catch(e){}return!1}).map(e=>e[1])}catch(e){}return[]},l=async(e,t)=>{let{ack:r,reclaimStart:s,reclaimEnd:i}=e.storageKeys,o=Date.now();if(localStorage.setItem(s,e.reclaimProcessId),localStorage.setItem(r,o.toString()),await n(a("i1Orc").Timers.RECLAIM_WAIT),Date.now()>o+a("i1Orc").Timers.RECLAIM_WAIT_THRESHOLD||localStorage.getItem(s)!==e.reclaimProcessId)throw Error("Took to long to callback, reclaim abandonded. After reclaimStart.");if(localStorage.setItem(i,e.reclaimProcessId),await n(a("i1Orc").Timers.RECLAIM_WAIT),Date.now()>o+a("i1Orc").Timers.RECLAIM_WAIT_THRESHOLD||localStorage.getItem(s)!==e.reclaimProcessId||localStorage.getItem(i)!==e.reclaimProcessId)throw Error("Took to long to callback, reclaim abandonded. After reclaimEnd.");return c(e,t)},c=async(e,t)=>{let{queue:r,inProgress:s}=e.storageKeys,i=[...JSON.parse(localStorage.getItem(r)||"[]"),...Object.entries(JSON.parse(localStorage.getItem(s)||"{}")).map(([e,t])=>({...t,attemptNumber:t.attemptNumber+1,id:e}))];if(i.length>0){let a=await t(i);if("successful"===a.status)u(e.storageKeys);else if("partial"===a.status){let e=i.filter(e=>!a.acceptedItemIds.includes(e.id));return localStorage.removeItem(s),localStorage.setItem(r,JSON.stringify(e)),{fullReclaim:!1}}}else u(e.storageKeys);return{fullReclaim:!0}},u=e=>{localStorage.removeItem(e.queue),localStorage.removeItem(e.inProgress),localStorage.removeItem(e.reclaimEnd),localStorage.removeItem(e.reclaimStart),localStorage.removeItem(e.ack)};var d=async(e,r)=>{if("string"!=typeof e||0===e.length)return{fullReclaims:0,partialReclaims:0,failedReclaims:0};let s=t(i)(),n=o(e).map(t=>l({queuePrefix:e,reclaimProcessId:s,storageKeys:(0,a("eswaT").createLocalStorageKeys)(e,t)},r)),c=await Promise.allSettled(n),u=c.filter(e=>"rejected"===e.status),d=c.filter(e=>"fulfilled"===e.status).map(e=>e.value),h=d.filter(e=>e.fullReclaim),p=d.filter(e=>!e.fullReclaim);return{failedReclaims:u.length,partialReclaims:p.length,fullReclaims:h.length}}}),n("fKoyL",function(t,r){e(t.exports,"CallbackProcessingErrorName",()=>s),e(t.exports,"default",()=>i);let s="CallbackProcessingError";class i extends Error{constructor(e){super(`Error thrown while processing events in callback: ${e&&"object"==typeof e&&"toString"in e&&"function"==typeof e.toString&&e.toString()||"string"==typeof e&&e||"Argument passed to CallbackProcessingError was not an Error or string."}`),Object.setPrototypeOf(this,i.prototype),this.name=s}}}),n("42k5W",function(t,r){e(t.exports,"default",()=>s);var s=a("hEfNx").default}),n("hEfNx",function(t,r){e(t.exports,"default",()=>s);class s{constructor(e,t={}){if(this.namespace=e,this.options=(0,a("iYeWv").createOptionsWithDefaults)(t),!e||0===e.length||"string"!=typeof e)throw Error("Invalid namespace provided");this.resilience=this.getResilienceMechanism(e,t)}getResilienceMechanism(e,t){if(!t.useMemory)try{return new(a("3q6DL")).default(e,t)}catch(e){e instanceof a("5tWx3").default||t.logger?.warn("Attempted to create IndexedDbResilience but failed. Using memory instead.")}return new(a("lGyYf")).default(this.namespace,t)}addItem(e,t,r=a("2A2TO").GuardPolicy.ABANDON){return this.runOrFailOver(()=>this.resilience.addItem(e,t,r))}bulkAddItem(e,t=a("2A2TO").GuardPolicy.ABANDON){return this.runOrFailOver(()=>this.resilience.bulkAddItem(e,t))}getItems(e){return this.runOrFailOver(()=>this.resilience.getItems(e))}deleteItems(e){return this.runOrFailOver(()=>this.resilience.deleteItems(e))}getItemCount(){return this.runOrFailOver(()=>this.resilience.getItemCount())}processItems(e,t){return this.runOrFailOver(()=>this.resilience.processItems(e,t))}storeType(){return this.resilience.storeType()}async runOrFailOver(e){try{return await e()}catch(t){if((0,a("2oiOa").shouldIgnoreResilienceDbError)(t))throw t;return this.resilience.storeType()===a("2A2TO").StoreType.INDEXEDDB&&await this.failOver(),e()}}async failOver(){let e=this.resilience,t=new(a("lGyYf")).default(this.namespace,this.options);this.resilience=t;try{let{items:r}=await e.getItems(this.options.maxEventLimit);if(r.length>0){let s=(await t.bulkAddItemWrapperType(r,a("2A2TO").GuardPolicy.IGNORE)).items.map(e=>e.id);await e.deleteItems(s)}}catch(e){this.options.logger.warn("Unexpected error from ResilienceDb, switching to MemoryDb")}}}}),n("2A2TO",function(t,r){var s,i,a,n;e(t.exports,"NAMESPACE_AND_TIME_ADDED_INDEX",()=>o),e(t.exports,"RESILIENCE_DB_NAME",()=>l),e(t.exports,"RESILIENCE_STORE_NAME",()=>c),e(t.exports,"TIME_TO_PROCESS_AFTER_INDEX",()=>u),e(t.exports,"TIME_ADDED_INDEX",()=>d),e(t.exports,"RETRY_INDEX",()=>h),e(t.exports,"INDEXEDDB_TIMEOUT",()=>p),e(t.exports,"StoreType",()=>s),e(t.exports,"GuardPolicy",()=>i);let o="namespace-timeAdded",l="analytics-web-client",c="analytics-resilience",u="timeToBeProcessedAfter",d="timeAdded",h="retryAttempts",p=15e3;(a=s||(s={})).INDEXEDDB="indexeddb",a.MEMORY="memory",(n=i||(i={})).IGNORE="ignore",n.ABANDON="abandon",n.EVICT="evict"}),n("5tWx3",function(t,r){e(t.exports,"default",()=>s);class s extends Error{constructor(){super("window.indexeddb is undefined."),Object.setPrototypeOf(this,s.prototype),this.name="NoIndexedDbError"}}}),n("2oiOa",function(t,r){e(t.exports,"shouldIgnoreResilienceDbError",()=>s);let s=e=>!!e&&"object"==typeof e&&"name"in e&&"string"==typeof e.name&&(e.name===a("3pkX4").AbandonWriteErrorName||e.name===a("fKoyL").CallbackProcessingErrorName||e.name===a("3HwLa").InvalidPolicyErrorName)}),n("3pkX4",function(t,r){e(t.exports,"AbandonWriteErrorName",()=>s),e(t.exports,"default",()=>i);let s="AbandonWriteError";class i extends Error{constructor(e){super(`Event Limit reached. Abandoning write to: ${e}`),Object.setPrototypeOf(this,i.prototype),this.name=s}}}),n("3HwLa",function(t,r){e(t.exports,"InvalidPolicyErrorName",()=>s),e(t.exports,"default",()=>i);let s="InvalidPolicyError";class i extends Error{constructor(e,t){super(`Method '${t}' cannot be called with policy '${e}'.`),this.name=s}}}),n("3q6DL",function(t,r){e(t.exports,"default",()=>s);class s{constructor(e,t={}){if(this.startDB=async()=>new Promise(async(e,t)=>{if("undefined"!=typeof window){let r=window.setTimeout(()=>{this.logger.warn("IndexedDB timed out."),t(new(a("5tWx3")).default)},a("2A2TO").INDEXEDDB_TIMEOUT),s=window.indexedDB.open(a("2A2TO").RESILIENCE_DB_NAME,1);s.onupgradeneeded=e=>{if(0!==e.oldVersion)throw Error("We cannot upgrade the database. Do not do this.");let t=s.result.createObjectStore(a("2A2TO").RESILIENCE_STORE_NAME,{keyPath:"id"});t.createIndex(a("2A2TO").TIME_TO_PROCESS_AFTER_INDEX,a("2A2TO").TIME_TO_PROCESS_AFTER_INDEX,{unique:!1}),t.createIndex(a("2A2TO").RETRY_INDEX,a("2A2TO").RETRY_INDEX,{unique:!1}),t.createIndex(a("2A2TO").TIME_ADDED_INDEX,a("2A2TO").TIME_ADDED_INDEX,{unique:!1}),t.createIndex(a("2A2TO").NAMESPACE_AND_TIME_ADDED_INDEX,["namespace","timeAdded"],{unique:!1})};try{return await (0,a("iYeWv").requestToPromise)(s),e(s.result)}catch(e){this.logger.warn("IndexedDB failed to initialise.",e),t(new(a("5tWx3")).default)}finally{window.clearTimeout(r)}}else this.logger.warn("IndexedDB failed to initialise. No 'window' object."),t(new(a("5tWx3")).default)}),this.addItem=async(e,t={},r=a("2A2TO").GuardPolicy.ABANDON)=>{let{logger:s,namespace:i}=this,n=(0,a("iYeWv").convertToItemWrapper)(e,i,t),{objectStore:o}=await this.getObjectStoreAndTransaction("readwrite");if(r===a("2A2TO").GuardPolicy.IGNORE)throw new(a("3HwLa")).default(r,"IndexedDbConnector#addItem");try{if(!n.namespace||0===n.namespace.length||"string"!=typeof n.namespace)throw Error("Namespace not specified");let e=await this.globalEventLimitGuard.insertItems(o,[n],r);if(1===e.items.length)return{item:e.items[0],numberOfEvictedItems:e.numberOfEvictedItems};throw Error(`Incorrect number of items added. Expected: 1, got: ${e.items.length}`)}catch(e){if((0,a("2oiOa").shouldIgnoreResilienceDbError)(e))throw e;throw s.log("Failed to add item to table",e),Error("Request to add item to table failed")}},this.bulkAddItem=async(e,t=a("2A2TO").GuardPolicy.ABANDON)=>{let{logger:r,namespace:s}=this,i=e.map(({item:e,...t})=>(0,a("iYeWv").convertToItemWrapper)(e,s,t)),{objectStore:n}=await this.getObjectStoreAndTransaction("readwrite");try{return await this.globalEventLimitGuard.insertItems(n,i,t)}catch(e){if((0,a("2oiOa").shouldIgnoreResilienceDbError)(e))throw e;throw r.log("Failed to add item to table",e),Error("Request to add item to table failed")}},this.getItems=async(e=a("aUIZi").GET_ITEM_COUNT)=>{let t=e>0?e:a("aUIZi").GET_ITEM_COUNT,{logger:r}=this,s=this.options.maxAttempts,{transaction:i,objectStore:n}=await this.getObjectStoreAndTransaction("readwrite"),o=n.index(a("2A2TO").TIME_TO_PROCESS_AFTER_INDEX),l=IDBKeyRange.upperBound(Date.now()),c=o.openCursor(l),u=await new Promise(async(e,i)=>{let n=[],o=0;c.onerror=e=>{r.error("Failed to open cursor:",e),i("Failed to open cursor")},c.onsuccess=i=>{let l=i.target.result;if(l){let i={...l.value};n.push(i);let c=l.value;if(c.retryAttempts+=1,c.timeToBeProcessedAfter=Date.now()+a("aUIZi").VISIBILITY_TIMEOUT,c.retryAttempts>=s){++o;let e=l.delete();(0,a("iYeWv").monitorErrorsOnRequest)(e,r)}else{let e=l.update(c);(0,a("iYeWv").monitorErrorsOnRequest)(e,r)}n.length<t?l.continue():e({items:n,numberOfDeletedItems:o})}else e({items:n,numberOfDeletedItems:o})}});return await (0,a("iYeWv").commitTransaction)(i,this.logger),u},this.deleteItems=async e=>{let{transaction:t,objectStore:r}=await this.getObjectStoreAndTransaction("readwrite");try{let s=e.map(e=>this.deleteItem(r,e));await (0,a("iYeWv").commitTransaction)(t,this.logger),await Promise.all(s)}catch(e){throw this.logger.warn("Failed to delete items from indexeddb.",e),e}},this.getItemCount=async()=>{let{transaction:e,objectStore:t}=await this.getObjectStoreAndTransaction("readonly"),r=t.index(a("2A2TO").TIME_TO_PROCESS_AFTER_INDEX),s=IDBKeyRange.upperBound(Date.now()),i=r.count(s),n=await (0,a("iYeWv").requestToPromise)(i);return await (0,a("iYeWv").commitTransaction)(e,this.logger),n.target.result},this.processItems=async(e,t=a("aUIZi").GET_ITEM_COUNT)=>{let{items:r,...s}=await this.getItems(t);try{let t=await e(r,s),i=r.map(e=>e.id);return await this.deleteItems(i),t}catch(e){throw new(a("fKoyL")).default(e)}},this.deleteItem=async(e,t)=>{let{logger:r}=this;try{await (0,a("iYeWv").requestToPromise)(e.delete(t))}catch(e){throw r.error("Failed to delete item:",t,e),e}},this.getObjectStoreAndTransaction=async e=>{let t=(await this.db).transaction(a("2A2TO").RESILIENCE_STORE_NAME,e),r=t.objectStore(a("2A2TO").RESILIENCE_STORE_NAME);return{transaction:t,objectStore:r}},this.options=(0,a("iYeWv").createOptionsWithDefaults)(t),this.namespace=e,this.logger=this.options.logger,!window.indexedDB)throw new(a("5tWx3")).default;this.db=this.startDB(),this.db.catch(()=>{}),this.globalEventLimitGuard=new(a("cyn6r")).default(this.options.maxEventLimit,this.namespace,this.logger,this.deleteItem)}storeType(){return a("2A2TO").StoreType.INDEXEDDB}}}),n("aUIZi",function(t,r){e(t.exports,"GET_ITEM_COUNT",()=>s),e(t.exports,"VISIBILITY_TIMEOUT",()=>i),e(t.exports,"MAX_ATTEMPTS",()=>a),e(t.exports,"EVENT_COUNT_LIMIT",()=>n);let s=7,i=6e4,a=10,n=5e3}),n("cyn6r",function(t,r){e(t.exports,"default",()=>s);class s{constructor(e,t,r,s){if(this.deleteOldestNEvents=async(e,t)=>{let r=e.index(a("2A2TO").NAMESPACE_AND_TIME_ADDED_INDEX),s=IDBKeyRange.bound([this.namespace,0],[this.namespace,Date.now()]),i=r.getAllKeys(s,t),n=await (0,a("iYeWv").requestToPromise)(i),o=n?.target?.result;if(o&&Array.isArray(o)&&o.length>0)try{let t=o.map(t=>this.deleteItemHandler(e,t));await Promise.all(t)}catch(e){throw this.logger.warn("Failed to delete items from indexeddb.",e),e}},e>0)this.eventLimit=e;else throw Error("Event Limit has to be set higher than 1");this.namespace=t,this.logger=r,this.deleteItemHandler=s}async insertItems(e,t,r=a("2A2TO").GuardPolicy.ABANDON){let s=[...t],i=0;switch(r){case a("2A2TO").GuardPolicy.ABANDON:await this.throwIfNotEnoughSpace(e,t.length);break;case a("2A2TO").GuardPolicy.EVICT:i=await this.evictIfNotEnoughSpace(e,t.length);break;case a("2A2TO").GuardPolicy.IGNORE:await this.calculateHowManyEventsWeCanAdd(e,s)}let n=s.map(t=>(0,a("iYeWv").requestToPromise)(e.add(t)));return await Promise.all(n),await (0,a("iYeWv").commitTransaction)(e.transaction,this.logger),{items:s,numberOfEvictedItems:i}}async throwIfNotEnoughSpace(e,t){let r=await this.calculateFreeSpace(e);if(r<t)throw new(a("3pkX4")).default(`Not enough space in IndexedDb. Needed ${t} but only had ${r}`)}async evictIfNotEnoughSpace(e,t){let r=await this.calculateFreeSpace(e);if(r<t){let s=t-r;return await this.deleteOldestNEvents(e,s),s}return 0}async calculateHowManyEventsWeCanAdd(e,t){let r=await this.calculateFreeSpace(e);if(r<t.length){let e=t.length-r,s=t.length-e;t.splice(s,e)}}async calculateFreeSpace(e){let t=await this.getCountofEventsInObjectStore(e);return this.eventLimit-t}async getCountofEventsInObjectStore(e){let t=e.index(a("2A2TO").NAMESPACE_AND_TIME_ADDED_INDEX),r=IDBKeyRange.bound([this.namespace,0],[this.namespace,Date.now()]),s=t.count(r);return(await (0,a("iYeWv").requestToPromise)(s)).target.result}}}),n("iYeWv",function(r,s){e(r.exports,"convertToItemWrapper",()=>n),e(r.exports,"createOptionsWithDefaults",()=>o),e(r.exports,"requestToPromise",()=>l),e(r.exports,"commitTransaction",()=>u),e(r.exports,"monitorErrorsOnRequest",()=>d);var i=a("bXrHm");let n=(e,r,{id:s,retryAttempts:a,timeToProcessOffset:n})=>({item:e,id:s||t(i)(),retryAttempts:a||0,timeToBeProcessedAfter:Date.now()+(n||0),namespace:r,timeAdded:Date.now()}),o=e=>({logger:e.logger||console,useMemory:e.useMemory||!1,maxAttempts:e.maxAttempts||a("aUIZi").MAX_ATTEMPTS,maxEventLimit:e.maxEventLimit||a("aUIZi").EVENT_COUNT_LIMIT}),l=e=>new Promise((t,r)=>{e.onsuccess=e=>{t(e)},e.onerror=e=>{r(e)}}),c=e=>new Promise((t,r)=>{e.oncomplete=()=>{t()},e.onerror=e=>{r(e)},e.onabort=e=>{r(e)}}),u=(e,t)=>{try{"function"==typeof e.commit&&e.commit()}catch(e){throw t.error("Failed to force commit transaction:",e),e}return c(e)},d=(e,t)=>{e.onerror=e=>{t.warn("Error thrown from request:",e)}}}),n("lGyYf",function(t,r){e(t.exports,"default",()=>s);class s{constructor(e,t={}){this.namespace=e,this.memoryStore=[],this.options=(0,a("iYeWv").createOptionsWithDefaults)(t),this.globalEventLimitGuard=new(a("fb8pT")).default(this.options.maxEventLimit,{addItems:this.addItems.bind(this),getItemCount:this.getItemCount.bind(this),evictEventsIfNeeded:this.evictEventsIfNeeded.bind(this)})}async addItem(e,t={},r=a("2A2TO").GuardPolicy.ABANDON){if(r===a("2A2TO").GuardPolicy.IGNORE)throw new(a("3HwLa")).default(r,"IndexedDbConnector#addItem");let s=(0,a("iYeWv").convertToItemWrapper)(e,this.namespace,t),i=await this.globalEventLimitGuard.insertItemsToMemoryStore([s],r);return Promise.resolve({item:i.items[0],numberOfEvictedItems:i.numberOfEvictedItems})}bulkAddItem(e,t=a("2A2TO").GuardPolicy.ABANDON){let r=e.map(({item:e,...t})=>(0,a("iYeWv").convertToItemWrapper)(e,this.namespace,t));return this.bulkAddItemWrapperType(r,t)}bulkAddItemWrapperType(e,t=a("2A2TO").GuardPolicy.ABANDON){return Promise.resolve(this.globalEventLimitGuard.insertItemsToMemoryStore(e,t))}getItems(e=a("aUIZi").GET_ITEM_COUNT){return Promise.resolve(this.synchronousGetItems(e))}synchronousGetItems(e=a("aUIZi").GET_ITEM_COUNT){let t=e>0?e:a("aUIZi").GET_ITEM_COUNT,r=Date.now(),s=[],i=[];for(let e of this.memoryStore)if(e.timeToBeProcessedAfter<=r&&(s.push({...e}),e.timeToBeProcessedAfter+=a("aUIZi").VISIBILITY_TIMEOUT,e.retryAttempts+=1,e.retryAttempts>=this.options.maxAttempts&&i.push(e)),s.length>=t)break;return i.forEach(e=>{let t=this.memoryStore.indexOf(e);this.memoryStore.splice(t,1)}),{items:s,numberOfDeletedItems:i.length}}deleteItems(e){return this.memoryStore=this.memoryStore.filter(t=>!e.includes(t.id)),Promise.resolve(void 0)}getItemCount(){let e=Date.now();return Promise.resolve(this.memoryStore.filter(t=>t.timeToBeProcessedAfter<=e).length)}async processItems(e,t){let{items:r,...s}=this.synchronousGetItems(t),i=r.map(e=>e.id);try{let t=await e(r,s);return await this.deleteItems(i),t}catch(e){throw new(a("fKoyL")).default(e)}}storeType(){return a("2A2TO").StoreType.MEMORY}addItems(e){this.memoryStore.push(...e),this.memoryStore.sort(function(e,t){return e.timeAdded-t.timeAdded})}evictEventsIfNeeded(e){let t=this.memoryStore.length;if(t>e){let r=t-e;return this.memoryStore.splice(0,r),r}return 0}}}),n("fb8pT",function(t,r){e(t.exports,"default",()=>s);class s{constructor(e,t){if(this.insertItemsToMemoryStore=(e,t)=>{switch(t){case a("2A2TO").GuardPolicy.ABANDON:return this.handleAbandonIfLimitWillExceedPolicy(e);case a("2A2TO").GuardPolicy.EVICT:return Promise.resolve(this.handleEvictOldestIfLimitExceededPolicy(e));case a("2A2TO").GuardPolicy.IGNORE:return this.handleAddAsManyAsPossible(e)}},e>0)this.eventLimit=e;else throw Error("Event Limit has to be set higher than 1");this.memoryItemHandlers=t}async handleAbandonIfLimitWillExceedPolicy(e){if(await this.memoryItemHandlers.getItemCount()+e.length>this.eventLimit)throw new(a("3pkX4")).default(a("2A2TO").StoreType.MEMORY);return this.memoryItemHandlers.addItems(e),{items:e,numberOfEvictedItems:0}}handleEvictOldestIfLimitExceededPolicy(e){return this.memoryItemHandlers.addItems(e),{items:e,numberOfEvictedItems:this.memoryItemHandlers.evictEventsIfNeeded(this.eventLimit)}}async handleAddAsManyAsPossible(e){let t=this.eventLimit-await this.memoryItemHandlers.getItemCount(),r=t>e.length?e:e.slice(0,t);return this.memoryItemHandlers.addItems(r),{items:r,numberOfEvictedItems:0}}}}),n("6xafg",function(t,r){e(t.exports,"default",()=>n);class s{addToItemsDiscardedByRetryCounter(e=1){this.itemsDiscardedByRetry+=e}addToEventCount(){this.eventCount++}addToItemsDiscardedByOverflowCounter(e=1){this.itemsDiscardedByOverflow+=e}setResilienceMechanism(e){this.resilienceMechanism=e}addToReclaimMetrics(e){this.localstorageNumberOfFullReclaims+=e.fullReclaims,this.localstorageNumberOfPartialReclaims+=e.partialReclaims,this.localstorageNumberOfFailedReclaims+=e.failedReclaims}addToPurgedQueuesMetrics(e){this.localstorageNumberOfQueuesPurged+=e}subtractFromMetrics(e){this.itemsDiscardedByRetry=this.subtractFromCount(this.itemsDiscardedByRetry,e.itemsDiscardedByRetry),this.eventCount=this.subtractFromCount(this.eventCount,e.eventCount),this.itemsDiscardedByOverflow=this.subtractFromCount(this.itemsDiscardedByOverflow,e.itemsDiscardedByOverflow),this.localstorageNumberOfFullReclaims=this.subtractFromCount(this.localstorageNumberOfFullReclaims,e.fullReclaims),this.localstorageNumberOfPartialReclaims=this.subtractFromCount(this.localstorageNumberOfPartialReclaims,e.partialReclaims),this.localstorageNumberOfFailedReclaims=this.subtractFromCount(this.localstorageNumberOfFailedReclaims,e.failedReclaims),this.localstorageNumberOfQueuesPurged=this.subtractFromCount(this.localstorageNumberOfQueuesPurged,e.localstorageQueuesPurged)}subtractFromCount(e,t){return Math.max(e-(t||0),0)}getMetricsPayload(){return{itemsDiscardedByRetry:this.itemsDiscardedByRetry,eventCount:this.eventCount,itemsDiscardedByOverflow:this.itemsDiscardedByOverflow,resilienceMechanism:this.resilienceMechanism,localstorageQueuesPurged:this.localstorageNumberOfQueuesPurged,fullReclaims:this.localstorageNumberOfFullReclaims,partialReclaims:this.localstorageNumberOfPartialReclaims,failedReclaims:this.localstorageNumberOfFailedReclaims}}constructor(){this.itemsDiscardedByRetry=0,this.eventCount=0,this.itemsDiscardedByOverflow=0,this.resilienceMechanism=a("ePz85").ResilienceMechanism.INDEXEDDB,this.localstorageNumberOfQueuesPurged=0,this.localstorageNumberOfFullReclaims=0,this.localstorageNumberOfPartialReclaims=0,this.localstorageNumberOfFailedReclaims=0}}let i=null;var n=()=>(i||(i=new s),i)}),n("ePz85",function(t,r){var s,i,a,n;e(t.exports,"ResilienceMechanism",()=>s),e(t.exports,"NetworkStatusEnum",()=>i),(a=s||(s={})).INDEXEDDB="indexeddb",a.MEMORY="memory",(n=i||(i={}))[n.ONLINE=0]="ONLINE",n[n.OFFLINE=1]="OFFLINE"}),n("1LZzU",function(t,r){e(t.exports,"default",()=>s);class s{constructor(e){"undefined"!=typeof window&&(window.addEventListener("offline",()=>e(a("ePz85").NetworkStatusEnum.OFFLINE)),window.addEventListener("online",()=>e(a("ePz85").NetworkStatusEnum.ONLINE)))}getNetworkStatus(){return window.navigator.onLine?a("ePz85").NetworkStatusEnum.ONLINE:a("ePz85").NetworkStatusEnum.OFFLINE}}}),n("38r8F",function(t,r){var s,i;e(t.exports,"default",()=>o);let n={minRetryDelay:1e3,maxRetryDelay:3e4,backoffFactor:2,backoffJitterPercentage:0,waitInterval:500,callbackTimeoutPeriod:5e3};(i=s||(s={}))[i.NONE=0]="NONE",i[i.IMMEDIATE=1]="IMMEDIATE",i[i.WAIT=2]="WAIT";class o{constructor(e,t){this.schedule=({immediate:e}={immediate:!1})=>{"undefined"!=typeof window&&(this.operationInFlight?e?this.queuedSchedule=1:1!==this.queuedSchedule&&(this.queuedSchedule=2):(e||this.options.waitInterval<=0)&&0===this.failureCount?(this.clearTimeout(),this.run()):this.failureCount>0&&null===this.scheduledTimeout?this.scheduledTimeout=window.setTimeout(this.run,this.calculateBackoff()):null===this.scheduledTimeout&&(this.scheduledTimeout=window.setTimeout(this.run,this.options.waitInterval)))},this.stop=()=>{this.clearTimeout(),this.queuedSchedule=0},this.getFailureCount=()=>this.failureCount,this.getCallbackStatus=()=>this.callbackTimer.getCallbackStatus(),this.clearTimeout=()=>{"undefined"!=typeof window&&null!==this.scheduledTimeout&&(window.clearTimeout(this.scheduledTimeout),this.scheduledTimeout=null)},this.run=()=>{this.operationInFlight=!0,this.clearTimeout();try{this.callbackTimer.executeCallbackWithTimeout(this.callback,this.done,()=>this.done(a("aRK7K").DoneState.ERROR))}catch(e){this.done(e)}},this.done=e=>{this.operationInFlight=!1,e===a("aRK7K").DoneState.ERROR||this.callbackTimer.getCallbackStatus()===a("dL792").CallbackStatus.TIMED_OUT?(this.failureCount++,this.clearTimeout()):e===a("aRK7K").DoneState.SUCCESS&&(this.failureCount=0),this.processQueuedSchedule()},this.processQueuedSchedule=()=>{if(0!==this.queuedSchedule){let e=1===this.queuedSchedule;this.queuedSchedule=0,this.schedule({immediate:e})}else this.failureCount>0&&this.schedule()},this.calculateBackoff=()=>{let{minRetryDelay:e,maxRetryDelay:t,backoffFactor:r,backoffJitterPercentage:s}=this.options,i=e*r**this.failureCount;if(s){let e=Math.random(),t=Math.floor(e*s*i);5>Math.floor(10*e)?i-=t:i+=t}return Number(Math.min(i,t).toPrecision(1))},this.options={minRetryDelay:e.minRetryDelay||n.minRetryDelay,maxRetryDelay:e.maxRetryDelay||n.maxRetryDelay,backoffFactor:e.backoffFactor||n.backoffFactor,backoffJitterPercentage:e.backoffJitterPercentage||n.backoffJitterPercentage,waitInterval:void 0!==e.waitInterval?e.waitInterval:n.waitInterval,callbackTimeoutPeriod:e.callbackTimeoutPeriod||n.callbackTimeoutPeriod},this.scheduledTimeout=null,this.failureCount=0,this.callback=t,this.operationInFlight=!1,this.queuedSchedule=0,this.callbackTimer=new(a("dL792")).CallbackWithTimeout(this.options.callbackTimeoutPeriod)}}}),n("dL792",function(t,r){var s,i,a,n;e(t.exports,"CallbackStatus",()=>s),e(t.exports,"CallbackWithTimeout",()=>o),(a=s||(s={})).IDLE="idle",a.RUNNING="running",a.COMPLETED="completed",a.TIMED_OUT="timedOut",(n=i||(i={})).EXECUTE="execute",n.COMPLETE="complete",n.TIMEOUT="timeout";class o{constructor(e){if(this.timeoutHandle=void 0,this.callbackStatus="idle",e>0){this.timeoutPeriod=e;return}throw Error("CallbackWithTimeout requires timeout period higher than 0")}transitionCallbackStatus(e,t){switch(e){case"idle":case"timedOut":case"completed":"execute"===t&&(this.callbackStatus="running");break;case"running":switch(t){case"complete":this.callbackStatus="completed";break;case"timeout":this.callbackStatus="timedOut"}break;default:this.callbackStatus=e}}executeCallbackWithTimeout(e,t,r){"undefined"!=typeof window&&(this.transitionCallbackStatus(this.callbackStatus,"execute"),this.timeoutHandle=window.setTimeout(()=>{this.transitionCallbackStatus(this.callbackStatus,"timeout"),r()},this.timeoutPeriod),e(e=>{this.cancelTimeout(),"timedOut"!==this.getCallbackStatus()&&(this.transitionCallbackStatus(this.callbackStatus,"complete"),t(e))}))}getCallbackStatus(){return this.callbackStatus}cancelTimeout(){"undefined"!=typeof window&&this.timeoutPeriod>0&&this.timeoutHandle&&(window.clearTimeout(this.timeoutHandle),this.timeoutHandle=void 0)}}}),n("aRK7K",function(t,r){var s,i;e(t.exports,"DoneState",()=>s),(i=s||(s={}))[i.NOOP=0]="NOOP",i[i.SUCCESS=1]="SUCCESS",i[i.ERROR=2]="ERROR"}),n("kM7SS",function(t,r){e(t.exports,"attachXidToMultipleEvents",()=>s);async function s(e,t){try{let r=await t;return e.map(e=>(function(e,t){if(!(t&&t instanceof Function))return e;if(e.msg.type===a("gjgR4").SegmentEventTypes.PAGE||e.msg.type===a("gjgR4").SegmentEventTypes.TRACK){let r=t();r&&Array.isArray(r)&&(e.msg.properties={...e.msg.properties,xid:r})}else if(e.msg.traits&&e.msg.type===a("gjgR4").SegmentEventTypes.IDENTIFY){let r=t();r&&Array.isArray(r)&&(e.msg.traits={...e.msg.traits,xid:r})}return e})(e,r))}catch(t){return e}}}),n("gjgR4",function(t,r){var s,i,a,n,o,l;e(t.exports,"SegmentEventTypes",()=>s),(n=s||(s={})).IDENTIFY="identify",n.PAGE="page",n.TRACK="track",(o=i||(i={})).XC="xc",o.UID="uid",(l=a||(a={})).NEW="NEW",l.CHANGED="CHANGED",l.EXISTING="EXISTING",l.TIMEOUT="TIMEOUT",l.ERROR="ERROR",l.UNAVAILABLE="UNAVAILABLE",l.MALFORMED="MALFORMED",l.UNKNOWN="UNKNOWN"}),n("57AWV",function(t,r){e(t.exports,"DEFAULT_REQUEST_TIMEOUT",()=>s);let s=1e4}),n("cdwq4",function(t,r){e(t.exports,"sendEvents",()=>s);let s=async e=>{let t=i(e)?.signal,r=n(e.url),s=await fetch(e.url,{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(e.batch),signal:t,...r});if(429===s.status||s.status>=500&&s.status<600)throw Error(`HTTP Error ${s.status} (${s.statusText})`);return s},i=e=>{if(e.abortController)return e.abortController;if(e.timeout){let t=new AbortController;return setTimeout(()=>{t.abort()},e.timeout),t}},n=(0,a("8QpSo").default)(e=>new URL(e).origin===location.origin?{}:{mode:"cors",credentials:"include"})}),n("9Mu5e",function(r,s){e(r.exports,"default",()=>c);var i=a("bXrHm");let n="SAFE",o="UNSAFE",l="LOCAL_STORAGE";class c{constructor(e){this.store=new(a("KX1VQ")).default({useStoragePrefix:!1}),this.cookie=new(a("dITTJ")).default(e)}getUserId(){return this.userId||null}setUserId(e){this.userId=e}getAnonymousId(e){return this.getAnonymousIdFromLocalStorageAndUpdateCookieIfStale()||this.getAnonymousIdFromCookieAndUpdateLocalStorage()||this.generateNewAnonymousId(e)}setAnonymousId(e){let t=JSON.stringify(e);return this.cookie.set(a("hDpfo").AWCCookiesKeys.AJS_ANONYMOUS_ID,t),this.lastAnonymousIdCookieUpdate=Date.now(),this.store.setItem((0,a("hDpfo").AllAnalyticsCookies).AJS_ANONYMOUS_ID.getKey(),t)}getAnonymousIdFromStorage(e){let t=e===l?this.store.getItem((0,a("hDpfo").AllAnalyticsCookies).AJS_ANONYMOUS_ID.getKey()):this.cookie.get(a("hDpfo").AWCCookiesKeys.AJS_ANONYMOUS_ID);if(t){let e={type:o,anonymousId:t};try{let r=JSON.parse(t);if(r&&"string"==typeof r)return{type:n,anonymousId:r};return e}catch(t){return e}}return{type:"NOT_FOUND"}}getAnonymousIdFromLocalStorageAndUpdateCookieIfStale(){let e=this.getAnonymousIdFromStorage(l),t=!1;switch((!this.lastAnonymousIdCookieUpdate||(0,a("4mBKK").default)(new Date,new Date(this.lastAnonymousIdCookieUpdate))>=7)&&(t=!0),e.type){case n:return t&&this.setAnonymousId(e.anonymousId),e.anonymousId;case o:return e.anonymousId;default:return null}}getAnonymousIdFromCookieAndUpdateLocalStorage(){let e=this.getAnonymousIdFromStorage("COOKIE");switch(e.type){case n:case o:return this.store.setItem((0,a("hDpfo").AllAnalyticsCookies).AJS_ANONYMOUS_ID.getKey(),JSON.stringify(e.anonymousId)),e.anonymousId;default:return null}}generateNewAnonymousId(e=t(i)){let r=e();return this.setAnonymousId(r),r}}}),n("hDpfo",function(t,r){var s,i;e(t.exports,"AWCCookiesKeys",()=>s),e(t.exports,"AllAnalyticsCookies",()=>o),(i=s||(s={})).AWC_TLD_TEST="AWC_TLD_TEST",i.AWC_ANALYTICS_DEBUG="AWC_ANALYTICS_DEBUG",i.AJS_ANONYMOUS_ID="AJS_ANONYMOUS_ID";class a{constructor(e,t){this.key=e,this.options=t}getAttributes(){return this.options}getKey(){return this.key}}let n=()=>{try{return window&&window.location&&"https:"===window.location.protocol}catch(e){return!1}},o={AWC_TLD_TEST:new a("__awc_tld_test__",{expires:365,secure:n(),path:"/"}),AWC_ANALYTICS_DEBUG:new a("atlassian_analytics_debug",{expires:365,secure:n(),path:"/"}),AJS_ANONYMOUS_ID:new a("ajs_anonymous_id",{expires:365,secure:n(),path:"/"})}}),n("dITTJ",function(r,s){e(r.exports,"default",()=>n);var i=a("eYli8");class n{constructor(e){this.cookieLike=(0,a("aXi7r").canUseCookie)(e)?t(i):new(a("axlw3")).default}set(e,t,r){if(!a("hDpfo").AllAnalyticsCookies[e]){console.warn(`Unknown cookie key ${e} provided, not set.`);return}return this.cookieLike.set((0,a("hDpfo").AllAnalyticsCookies)[e].getKey(),t,{...(0,a("hDpfo").AllAnalyticsCookies)[e].getAttributes(),domain:(0,a("aXi7r").getTld)(),...r})}get(e){if(!a("hDpfo").AllAnalyticsCookies[e]){console.warn(`Unknown cookie key ${e} provided, not fetched.`);return}return this.cookieLike.get((0,a("hDpfo").AllAnalyticsCookies)[e].getKey())}remove(e,t){if(!a("hDpfo").AllAnalyticsCookies[e]){console.warn(`Unknown cookie key ${e} provided, not removed.`);return}this.cookieLike.remove((0,a("hDpfo").AllAnalyticsCookies)[e].getKey(),{...t})}}}),n("axlw3",function(t,r){e(t.exports,"default",()=>s);class s{constructor(){this.safeStorage=new(a("KX1VQ")).default({useStoragePrefix:!1})}set(e,t){return this.safeStorage.setItem(e,t),t}get(e){return this.safeStorage.getItem(e)||void 0}remove(e){this.safeStorage.removeItem(e)}}}),n("KX1VQ",function(t,r){e(t.exports,"default",()=>s);class s extends a("5jnRh").default{constructor(e){let t;try{t=window.localStorage||a("8TsCv").default}catch(e){t=a("8TsCv").default}super(t,e)}}}),n("8TsCv",function(t,r){e(t.exports,"default",()=>s);var s=new class{constructor(){this._data={},this.length=0,this.setItem=(e,t)=>(this._data[e]=t,this.length=Object.keys(this._data).length,t),this.getItem=e=>e in this._data?this._data[e]:null,this.removeItem=e=>(e in this._data&&delete this._data[e],this.length=Object.keys(this._data).length,null),this.clear=()=>{this._data={},this.length=0},this.key=e=>Object.keys(this._data)[e]}}}),n("5jnRh",function(t,r){e(t.exports,"default",()=>n);let s="awcInMemoryStorageFallback";function i(e){let t="test_value";if(!e)return!1;try{let r="awc.storage.support";e.setItem(r,t);let s=e.getItem(r);return e.removeItem(r),s===t}catch(e){return!1}}class n{constructor(e,t={}){this.getStore=()=>this._store,this.getItem=e=>this._store.getItem(this.createKey(e)),this.removeItem=e=>this._store.removeItem(this.createKey(e)),this.setItem=(e,t)=>{try{this._store.setItem(this.createKey(e),t)}catch(r){(function(e){let t=!1;if(e.code)switch(e.code){case 22:t=!0;break;case 1014:"NS_ERROR_DOM_QUOTA_REACHED"===e.name&&(t=!0)}else -0x7ff8fff2===e.number&&(t=!0);return t})(r)&&(this.swapToInMemory(),this._store.setItem(this.createKey(e),t))}},this.swapToInMemory=()=>{let e;if(this._store===a("8TsCv").default||"undefined"==typeof window)return;let t=Object.keys(this._store||{});i(window[s])?e=window[s]:(e=a("8TsCv").default,window[s]||(window[s]=a("8TsCv").default)),t.forEach(t=>{if(0===t.indexOf(this.getPrefix())){let r=this._store.getItem(t);r&&e.setItem(t,r)}}),this._store=e},this.clear=()=>this._store.clear(),this.key=e=>this._store.key(e),this.getPrefix=()=>this._prefix,this.createKey=e=>this._prefix?`${this.getPrefix()}.${e}`:e,this.options=t;let r=[];(void 0===t.useStoragePrefix||t.useStoragePrefix)&&r.push("awc"),t.envPrefix&&t.envPrefix!==a("iZhen").envType.PROD&&r.push(t.envPrefix),this._prefix=r.join("-"),i(e)?this._store=e:this.swapToInMemory()}}}),n("aXi7r",function(r,s){e(r.exports,"canUseCookie",()=>n),e(r.exports,"getTld",()=>c);var i=a("eYli8");let n=(e=!1)=>!e&&!("file:"===location.protocol||"chrome-extension:"===location.protocol),o=(0,a("hDpfo").AllAnalyticsCookies).AWC_TLD_TEST.getKey(),l="tld_test",c=(0,a("8QpSo").default)(()=>{if("undefined"==typeof location)return"";let{hostname:e}=location,r=e.split(".");for(let e=1;e<=r.length;e++){let s=r.slice(-1*e),a=`.${s.join(".")}`;if(t(i).set(o,l,{domain:a}),t(i).get(o)===l)return t(i).remove(o,{domain:a}),a}return e})}),n("1T3jD",function(r,s){e(r.exports,"buildContext",()=>n),e(r.exports,"prepareEventProperties",()=>o);var i=a("1m0iJ");let n=e=>({...e.context,userAgent:navigator.userAgent}),o=e=>{let r=l(e);return t(i)(r)},l=e=>{if(null===e||"object"!=typeof e)return e;let t={};return Object.keys(e).forEach(r=>{let s=c(e,r);void 0!==s&&(Array.isArray(s)?t[r]=s.map(e=>l(e)):"object"==typeof s&&null!==s?t[r]=l(s):t[r]=s)}),t},c=(e,t)=>e[t]}),n("cxufL",function(t,r){e(t.exports,"default",()=>s);class s{constructor(){this.handleOriginParameters=(e,t)=>{let r=Object.keys(e);if(!(r.length>0))throw Error("Empty parameter mapping provided");let s=r.filter(e=>0>Object.values(a("iZhen").originTracingType).indexOf(e));if(s.length>0)throw Error(`Invalid Origin Tracing Parameter(s) supplied: ${s.join()}!`);let i=(0,a("d7bc1").default)((e,t)=>r.indexOf(t)>=0,t);return Object.keys(i).map(t=>{let r=e[t](i[t]);return{[t]:r}}).reduce((e,t)=>Object.assign(e,t),{})},this._originStore={}}}}),n("d7bc1",function(t,r){e(t.exports,"defaultHistoryReplaceFn",()=>i),e(t.exports,"default",()=>n);var s=a("dFA29");let i=e=>window.history.replaceState({},"",e);var n=(e,t=i)=>{let r=window.location.href,n=window.location.hash,o=""!==n?r.replace(n,""):r,{url:l,query:c}=(0,s.parseUrl)(o),u=(0,a("gYqa8").pickBy)(c,e);if(Object.keys(u).length>0){let r=(0,a("gYqa8").omitBy)(c,e);t(Object.keys(r).length>0?`${l}?${(0,s.stringify)(r)}${n}`:`${l}${n}`)}return u}}),n("dFA29",function(t,r){e(t.exports,"extract",()=>s,e=>s=e),e(t.exports,"parse",()=>i,e=>i=e),e(t.exports,"stringify",()=>n,e=>n=e),e(t.exports,"parseUrl",()=>o,e=>o=e),e(t.exports,"stringifyUrl",()=>l,e=>l=e),e(t.exports,"pick",()=>c,e=>c=e);var s,i,n,o,l,c,u=a("hlggt"),d=a("aCrRe"),h=a("gjKya"),p=a("cNVkY");let g=e=>null==e,m=Symbol("encodeFragmentIdentifier");function f(e){if("string"!=typeof e||1!==e.length)throw TypeError("arrayFormatSeparator must be single character string")}function y(e,t){return t.encode?t.strict?u(e):encodeURIComponent(e):e}function E(e,t){return t.decode?d(e):e}function v(e){let t=e.indexOf("#");return -1!==t&&(e=e.slice(0,t)),e}function I(e){let t=(e=v(e)).indexOf("?");return -1===t?"":e.slice(t+1)}function b(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):t.parseBooleans&&null!==e&&("true"===e.toLowerCase()||"false"===e.toLowerCase())&&(e="true"===e.toLowerCase()),e}function T(e,t){f((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);let r=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,s)=>{if(t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),!t){s[e]=r;return}void 0===s[e]&&(s[e]={}),s[e][t[1]]=r};case"bracket":return(e,r,s)=>{if(t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),!t){s[e]=r;return}if(void 0===s[e]){s[e]=[r];return}s[e]=[].concat(s[e],r)};case"colon-list-separator":return(e,r,s)=>{if(t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),!t){s[e]=r;return}if(void 0===s[e]){s[e]=[r];return}s[e]=[].concat(s[e],r)};case"comma":case"separator":return(t,r,s)=>{let i="string"==typeof r&&r.includes(e.arrayFormatSeparator),a="string"==typeof r&&!i&&E(r,e).includes(e.arrayFormatSeparator);r=a?E(r,e):r;let n=i||a?r.split(e.arrayFormatSeparator).map(t=>E(t,e)):null===r?r:E(r,e);s[t]=n};case"bracket-separator":return(t,r,s)=>{let i=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!i){s[t]=r?E(r,e):r;return}let a=null===r?[]:r.split(e.arrayFormatSeparator).map(t=>E(t,e));if(void 0===s[t]){s[t]=a;return}s[t]=[].concat(s[t],a)};default:return(e,t,r)=>{if(void 0===r[e]){r[e]=t;return}r[e]=[].concat(r[e],t)}}}(t),s=Object.create(null);if("string"!=typeof e||!(e=e.trim().replace(/^[?#&]/,"")))return s;for(let i of e.split("&")){if(""===i)continue;let[e,a]=h(t.decode?i.replace(/\+/g," "):i,"=");a=void 0===a?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:E(a,t),r(E(e,t),a,s)}for(let e of Object.keys(s)){let r=s[e];if("object"==typeof r&&null!==r)for(let e of Object.keys(r))r[e]=b(r[e],t);else s[e]=b(r,t)}return!1===t.sort?s:(!0===t.sort?Object.keys(s).sort():Object.keys(s).sort(t.sort)).reduce((e,t)=>{let r=s[t];return r&&"object"==typeof r&&!Array.isArray(r)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(r):e[t]=r,e},Object.create(null))}s=I,i=T,n=(e,t)=>{if(!e)return"";f((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);let r=r=>t.skipNull&&g(e[r])||t.skipEmptyString&&""===e[r],s=function(e){switch(e.arrayFormat){case"index":return t=>(r,s)=>{let i=r.length;return void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?r:null===s?[...r,[y(t,e),"[",i,"]"].join("")]:[...r,[y(t,e),"[",y(i,e),"]=",y(s,e)].join("")]};case"bracket":return t=>(r,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?r:null===s?[...r,[y(t,e),"[]"].join("")]:[...r,[y(t,e),"[]=",y(s,e)].join("")];case"colon-list-separator":return t=>(r,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?r:null===s?[...r,[y(t,e),":list="].join("")]:[...r,[y(t,e),":list=",y(s,e)].join("")];case"comma":case"separator":case"bracket-separator":{let t="bracket-separator"===e.arrayFormat?"[]=":"=";return r=>(s,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?s:(i=null===i?"":i,0===s.length)?[[y(r,e),t,y(i,e)].join("")]:[[s,y(i,e)].join(e.arrayFormatSeparator)]}default:return t=>(r,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?r:null===s?[...r,y(t,e)]:[...r,[y(t,e),"=",y(s,e)].join("")]}}(t),i={};for(let t of Object.keys(e))r(t)||(i[t]=e[t]);let a=Object.keys(i);return!1!==t.sort&&a.sort(t.sort),a.map(r=>{let i=e[r];return void 0===i?"":null===i?y(r,t):Array.isArray(i)?0===i.length&&"bracket-separator"===t.arrayFormat?y(r,t)+"[]":i.reduce(s(r),[]).join("&"):y(r,t)+"="+y(i,t)}).filter(e=>e.length>0).join("&")},o=(e,t)=>{t=Object.assign({decode:!0},t);let[r,s]=h(e,"#");return Object.assign({url:r.split("?")[0]||"",query:T(I(e),t)},t&&t.parseFragmentIdentifier&&s?{fragmentIdentifier:E(s,t)}:{})},l=(e,t)=>{t=Object.assign({encode:!0,strict:!0,[m]:!0},t);let r=v(e.url).split("?")[0]||"",a=s(e.url),o=Object.assign(i(a,{sort:!1}),e.query),l=n(o,t);l&&(l=`?${l}`);let c=function(e){let t="",r=e.indexOf("#");return -1!==r&&(t=e.slice(r)),t}(e.url);return e.fragmentIdentifier&&(c=`#${t[m]?y(e.fragmentIdentifier,t):e.fragmentIdentifier}`),`${r}${l}${c}`},c=(e,t,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[m]:!1},r);let{url:s,query:i,fragmentIdentifier:a}=o(e,r);return l({url:s,query:p(i,t),fragmentIdentifier:a},r)}}),n("cT8IU",function(t,r){e(t.exports,"selectHost",()=>c);let s="/gateway/api/gasv3/api/v1",i=()=>"as.staging.atl-paas-us-gov-mod.net/api/v1",n=()=>"api.stg.atlassian-us-gov-mod.com/gasv3/api/v1",o=({useStargate:e,env:t,useLegacyUrl:r,envOverride:o})=>{if(t===a("iZhen").envType.LOCAL||t===a("iZhen").envType.DEV)throw Error("No LOCAL or DEV environments for FedRAMP.");if(t===a("iZhen").envType.PROD&&o)throw Error("Cannot override to FedRAMP Sandbox for Prod.");return e?r?t===a("iZhen").envType.PROD?"api.atlassian-us-gov-mod.com/gasv3/api/v1":n():window.location.host+s:t===a("iZhen").envType.PROD?"as.atlassian-us-gov-mod.com/api/v1":i()},l=({useStargate:e,env:t,useLegacyUrl:r})=>e?r?t===a("iZhen").envType.PROD?"api-private.atlassian.com/gasv3/api/v1":"api-private.stg.atlassian.com/gasv3/api/v1":window.location.host+s:t===a("iZhen").envType.PROD?"as.atlassian.com/api/v1":"as.staging.atl-paas.net/api/v1";function c({useStargate:e,env:t,useLegacyUrl:r,perimeter:s,envOverride:i}){return s===a("iZhen").perimeterType.FEDRAMP_MODERATE?o({useStargate:e,env:t,useLegacyUrl:r,envOverride:i}):l({useStargate:e,env:t,useLegacyUrl:r})}}),n("4NslB",function(t,r){e(t.exports,"default",()=>l);let s="session.id",i="session.expiry",n=/^\d+$/,o=()=>{};class l{constructor(e={}){this._generateNewSessionId=()=>{let e=Date.now().toString();return this._safeLocalStorage.setItem(s,e),this._onNewSessionStarted&&this._onNewSessionStarted(),e},this._updateSessionExpiry=()=>{let e=Date.now()+this._sessionExpiryTime;return this._safeLocalStorage.setItem(i,e.toString()),e},this._debouncedUpdateSessionExpiry=e=>{let{_updateSessionExpiry:t}=this;if(e<Date.now()+this._sessionExpiryDebounceThresholdPercentage*this._sessionExpiryTime)return t();this._sessionExpiryDebounceTimer&&clearTimeout(this._sessionExpiryDebounceTimer),this._sessionExpiryDebounceTimer=setTimeout(()=>{t()},this._sessionExpiryDebounce)},this._sessionExpiryTime=e.sessionExpiryTime||18e5,this._sessionExpiryDebounce=e.sessionExpiryDebounce||5e3,this._sessionExpiryDebounceThresholdPercentage=e.sessionExpiryDebounceThresholdPercentage||.9,this._onNewSessionStarted=e.onNewSessionStarted?e.onNewSessionStarted:o,this._safeLocalStorage=new(a("KX1VQ")).default}getCurrentSessionId(){let e=this._safeLocalStorage.getItem(s),t=parseInt(this._safeLocalStorage.getItem(i)||"0",10)||0;return(this._debouncedUpdateSessionExpiry(t),!e||t<=Date.now()||Number.isNaN(t)||!n.test(e))?this._generateNewSessionId():e}}}),n("lbyTT",function(t,r){e(t.exports,"default",()=>s);class s extends a("5jnRh").default{constructor(e){let t;try{t=window.sessionStorage||a("8TsCv").default}catch(e){t=a("8TsCv").default}super(t,e)}}}),n("5cwz8",function(r,s){e(r.exports,"default",()=>o);var i=a("bXrHm");let n="tab.id";class o{constructor(){this._generateNewTabId=()=>{let e=t(i)();return this._safeSessionStorage.setItem(n,e),e},this._safeSessionStorage=new(a("lbyTT")).default}getCurrentTabId(){let e=this._safeSessionStorage.getItem(n);return e||(e=this._generateNewTabId()),e}}}),n("3ErS8",function(r,s){e(r.exports,"default",()=>u);var i=a("dFA29"),n=a("bXrHm");let o="taskSessions",l="taskSessionsInit",c="awc.";class u{constructor(){this._taskSessionsNotRecentlyInitialised=e=>null===this._safeSessionStorage.getItem(o)||null===this._safeSessionStorage.getItem(l)||parseInt(this._safeSessionStorage.getItem(l)||"0",10)<e-3e3,this._removeTaskSessionPrefix=(e,t)=>t.split(c)[1],this._isTaskSessionQueryParam=(e,t)=>t.startsWith(c),this.getAllTaskSessions=()=>{try{return JSON.parse(this._safeSessionStorage.getItem(o)||"")}catch(e){return{}}},this._writeToSessionStorage=e=>{try{this._safeSessionStorage.setItem(o,JSON.stringify(e))}catch(e){}},this._appendTaskSessions=e=>{let t=this.getAllTaskSessions(),r=null===t?e:Object.assign(t,e);this._writeToSessionStorage(r)},this._safelyRemoveKey=(e,t)=>null===e?{}:(delete e[t],e),this.createTaskSession=e=>{let r=t(n)(),s={};return s[e]=r,this._appendTaskSessions(s),r},this.createTaskSessionWithProvidedId=(e,t)=>{if("string"!=typeof t)throw TypeError("invalid taskSessionId, must be string");let r={};r[e]=t,this._appendTaskSessions(r)},this.completeTaskSession=e=>{let t=this.getAllTaskSessions(),r=this._safelyRemoveKey(t,e);this._writeToSessionStorage(r)},this.formatTaskSessionQueryString=({uri:e,includedTaskSessions:t})=>{let{url:r,query:s}=(0,i.parseUrl)(e),n=this.getAllTaskSessions(),o=t?(0,a("gYqa8").pick)(n,t):(0,a("gYqa8").omit)(n,Object.values(a("iZhen").originTracingType));if(0===Object.keys(o).length)return e;let l={...(0,a("gYqa8").mapKeys)(o,(e,t)=>c+t),...s};return`${r}?${(0,i.stringify)(l)}`},this.stripQueryParameters=()=>{let e=(0,a("gYqa8").mapKeys)((0,a("d7bc1").default)(this._isTaskSessionQueryParam),this._removeTaskSessionPrefix);this._appendTaskSessions(e)};let e=Date.now();this._safeSessionStorage=new(a("lbyTT")).default;try{this._taskSessionsNotRecentlyInitialised(e)&&(this._writeToSessionStorage({}),this._safeSessionStorage.setItem(l,e.toString()))}catch(e){}}}}),n("fOR5Q",function(r,s){e(r.exports,"default",()=>c);var i=a("eYli8");let n=(0,a("hDpfo").AllAnalyticsCookies).AWC_ANALYTICS_DEBUG.getKey(),o="synthetic",l=()=>{try{return JSON.parse(t(i).get(n)||"false")}catch(e){t(i).remove(n)}return!1};var c=class{constructor(){this._bind=()=>{"undefined"==typeof window||window.testAnalytics||(window.testAnalytics={eventCache:[],events:()=>window.testAnalytics.eventCache,clear:()=>{window.testAnalytics.eventCache=[];try{localStorage.removeItem("awc.ui.viewed.last.sent"),localStorage.removeItem("awc-staging.ui.viewed.last.sent"),localStorage.removeItem("awc-dev.ui.viewed.last.sent"),localStorage.removeItem("awc-local.ui.viewed.last.sent")}catch(e){}}})},this._cache=e=>{"undefined"!=typeof window&&(window.testAnalytics.eventCache.length>=100&&(window.testAnalytics.eventCache=window.testAnalytics.eventCache.slice(1,window.testAnalytics.eventCache.length)),window.testAnalytics.eventCache.push(e))},this._shouldCacheEvent=()=>this._isDebugCookieEnabled,this.saveEvent=e=>{e&&this._shouldCacheEvent()&&(window.testAnalytics||this._bind(),e.tags instanceof Array?e.tags.push(o):e.tags=[o],this._cache(e))},this._isDebugCookieEnabled=l(),this._isDebugCookieEnabled&&this._bind()}}}),n("edTAR",function(t,r){e(t.exports,"default",()=>s);class s{constructor(e,t,r,s={}){if(this.start=()=>{this._startInterval(),this._bindEventListeners()},this.stop=()=>{this._stopInterval(),this._unbindEventListeners()},this.resetTimers=()=>{this._intervalId&&(this.stop(),this.start())},this._bindEventListeners=()=>{"undefined"!=typeof window&&(window.addEventListener("focus",this._focusListener),window.addEventListener("blur",this._blurListener))},this._unbindEventListeners=()=>{"undefined"!=typeof window&&(window.removeEventListener("focus",this._focusListener),window.removeEventListener("blur",this._blurListener))},this._startInterval=()=>{clearInterval(this._intervalId),this._intervalId=setInterval(this._handleInterval,this._delay)},this._stopInterval=()=>{this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)},this._getProductKey=(e,t)=>{let r=e;return t&&(r+=`-${t}`),r},this._getLastSentTimestamp=(e,t,r)=>(((this._parseLocalStorageData()||{})[r]||{})[t]||{})[e]||null,this._parseLocalStorageData=()=>{let e=this._safeLocalStorage.getItem(this._storageKey);try{return JSON.parse(e||"")}catch(e){return this._safeLocalStorage.removeItem(this._storageKey),null}},this._setLastSentTimestamp=(e,t,r)=>{let s=this._parseLocalStorageData()||{},i=s[r]||{},a=i[t]||{};a[e]=Date.now(),i[t]=a,s[r]=i,this._safeLocalStorage.setItem(this._storageKey,JSON.stringify(s))},this._shouldSendEvent=(e,t,r,s)=>!!document.hasFocus()&&(t===a("iZhen").tenantType.NONE||!!r)&&!!s&&Date.now()-this._getLastSentTimestamp(e,r,s)>this._throttle,this._handleInterval=()=>{let{embeddedProduct:e,...t}=this._getContext();this._sendEvent(this._product,t),e&&this._sendEvent(e,t,!0)},this._sendEvent=(e,t,r=!1)=>{let{subproduct:s,tenantIdType:i,tenantId:a,userId:n,lastScreenEvent:o,attributes:l}=t,c=this._getProductKey(e,s);if(this._shouldSendEvent(c,i,a,n)){this._setLastSentTimestamp(c,a,n);let t=this._createEvent(e,s,r,o,l);this._onEvent(t)}},this._createEvent=(e,t,r,s,i)=>{let a={product:e,source:"ui",action:"viewed",actionSubject:"ui",attributes:i};return r&&(a.subproduct=null,a.version=null,a.attributes={...a.attributes,embeddedInEnv:this._productInfo.env,embeddedInProduct:this._productInfo.product,embeddedInSubproduct:t,embeddedInVersion:this._productInfo.version,embeddedInOrigin:this._productInfo.origin,embeddedInPlatform:this._productInfo.platform}),s&&(a.attributes={...a.attributes,lastScreenEvent:{name:s.name,attributes:s.attributes}}),a},!e)throw Error("Missing productInfo");if(!e.product)throw Error("Missing productInfo.product");if(!t)throw Error("Missing getContext callback");if("function"!=typeof t)throw Error("Invalid getContext, must be function");if(!r)throw Error("Missing onEvent callback");if("function"!=typeof r)throw Error("Invalid onEvent, must be function");this._productInfo=e,this._product=e.product,this._getContext=t,this._onEvent=r,this._delay=s.delay||2e3,this._throttle=s.throttle||36e5,this._storageKey=s.storageKey||"ui.viewed.last.sent",this._safeLocalStorage=new(a("KX1VQ")).default({envPrefix:this._productInfo.env}),this._focusListener=()=>{this._startInterval()},this._blurListener=()=>{this._stopInterval()}}}}),n("j7FCN",function(t,r){e(t.exports,"default",()=>s);function s(e,t){return e&&"function"==typeof e?()=>{e(t)}:null}}),n("iNSWY",function(t,r){e(t.exports,"XIDPromise",()=>s);let s=(e,t)=>{if(e&&t&&"function"==typeof t)return Promise.race([t().catch(()=>()=>(0,a("4LmqD").createUnknownXid)()),new Promise(e=>{setTimeout(()=>e(()=>(0,a("4LmqD").createTimeoutXid)()),a("4LmqD").XID_TIMEOUT)})])}}),n("4LmqD",function(t,r){e(t.exports,"XID_TIMEOUT",()=>s),e(t.exports,"createTimeoutXid",()=>i),e(t.exports,"createUnknownXid",()=>n);let s=5e3,i=()=>[{type:a("cLbOk").XIDItemType.XC,state:"TIMEOUT"},{type:a("cLbOk").XIDItemType.UID,state:"TIMEOUT"}],n=()=>[{type:a("cLbOk").XIDItemType.XC,state:"UNKNOWN"},{type:a("cLbOk").XIDItemType.UID,state:"UNKNOWN"}]}),n("cLbOk",function(t,r){var s,i,a,n;e(t.exports,"XIDItemType",()=>s),(a=s||(s={})).XC="xc",a.UID="uid",(n=i||(i={})).NEW="NEW",n.CHANGED="CHANGED",n.EXISTING="EXISTING",n.TIMEOUT="TIMEOUT",n.ERROR="ERROR",n.UNAVAILABLE="UNAVAILABLE",n.MALFORMED="MALFORMED",n.UNKNOWN="UNKNOWN"}),n("5IPCv",function(r,s){e(r.exports,"default",()=>c),e(r.exports,"FeatureGateEnvironment",()=>a("8ruqY").FeatureGateEnvironment);var i=a("1doJz");let n="client-default-key";class o{static{this.initPromise=null}static{this.initCompleted=!1}static{this.initWithDefaults=!1}static{this.hasGetExperimentErrorOccurred=!1}static{this.hasGetExperimentValueErrorOccurred=!1}static{this.hasGetLayerErrorOccurred=!1}static{this.hasGetLayerValueErrorOccurred=!1}static{this.hasCheckGateErrorOccurred=!1}static{this.subscriptions=new(a("9Pvqq")).default}static async initialize(e,t,r){let s=this.getOptionsWithDefaults(e);if(o.initPromise)return o.shallowEquals(s,o.initOptions)||console.warn("Feature Gates client already initialized with different options. New options were not applied."),o.initPromise;let i=performance.now();return o.initOptions=s,o.initPromise=o.init(s,t,r).then(()=>{o.initCompleted=!0,o.initWithDefaults=!0}).finally(()=>{let e=performance.now();o.fireClientEvent(i,e-i,"initialize",o.initCompleted,s.apiKey)}),o.initPromise}static async initializeWithProvider(e,t,r,s){let i=this.getOptionsWithDefaults(e);if(o.initPromise)return o.shallowEquals(i,o.initOptions)||console.warn("Feature Gates client already initialized with different options. New options were not applied."),o.initPromise;let n=performance.now();return o.initOptions=i,o.provider=t,o.provider.setClientVersion(a("i9mLs").CLIENT_VERSION),o.provider.setApplyUpdateCallback&&o.provider.setApplyUpdateCallback(this.applyUpdateCallback),o.initPromise=o.initWithProvider(i,r,s).then(()=>{o.initCompleted=!0,o.initWithDefaults=!0}).finally(()=>{let e=performance.now();o.fireClientEvent(n,e-n,"initializeWithProvider",o.initCompleted,t.getApiKey?t.getApiKey():void 0)}),o.initPromise}static applyUpdateCallback(e){try{(o.initCompleted||o.initWithDefaults)&&(t(i).setInitializeValues(e.experimentValues),o.subscriptions.anyUpdated())}catch(e){console.warn("Error when attempting to apply update",e)}}static fireClientEvent(e,t,r,s,i){o.initOptions.analyticsWebClient?.then(n=>{let l={targetApp:o.initOptions.targetApp,clientVersion:a("i9mLs").CLIENT_VERSION,success:s,startTime:e,totalTime:t,...i&&{apiKey:i}};n.sendOperationalEvent({action:r,actionSubject:"featureGatesClient",attributes:l,tags:["measurement"],source:"@atlaskit/feature-gate-js-client"})}).catch(e=>{o.initOptions.environment!==a("8ruqY").FeatureGateEnvironment.Production&&console.error("Analytics web client promise did not resolve",e)})}static async initializeFromValues(e,t,r,s={}){let i=this.getOptionsWithDefaults(e);if(o.initPromise)return o.shallowEquals(i,o.initOptions)||console.warn("Feature Gates client already initialized with different options. New options were not applied."),o.initPromise;let a=performance.now();return o.initOptions=i,o.initPromise=o.initFromValues(i,t,r,s).then(()=>{o.initCompleted=!0,o.initWithDefaults=!0}).finally(()=>{let e=performance.now();o.fireClientEvent(a,e-a,"initializeFromValues",o.initCompleted)}),o.initPromise}static async updateUser(e,t,r){let s=this.getOptionsWithDefaults(e);await o.updateUserUsingInitializeValuesProducer(()=>(0,a("1VtdU").default).fetchExperimentValues(s,t,r).then(({experimentValues:e,customAttributes:t})=>({experimentValues:e,customAttributesFromFetch:t})),t,r)}static async updateUserWithProvider(e,t){if(!o.provider)throw Error("Cannot update user using provider as the client was not initialised with a provider");await o.provider.setProfile(o.initOptions,e,t),await o.updateUserUsingInitializeValuesProducer(()=>o.provider.getExperimentValues(),e,t)}static async updateUserWithValues(e,t,r={}){await o.updateUserUsingInitializeValuesProducer(()=>Promise.resolve({experimentValues:r,customAttributesFromFetch:t}),e,t)}static initializeCalled(){return null!=o.initPromise}static initializeCompleted(){return o.initCompleted}static checkGate(e,r={}){try{let{fireGateExposure:s=!0}=r;return(s?t(i).checkGate.bind(t(i)):t(i).checkGateWithExposureLoggingDisabled.bind(t(i)))(e)}catch(t){return o.hasCheckGateErrorOccurred||(console.warn({msg:"An error has occurred checking the feature gate. Only the first occurrence of this error is logged.",gateName:e,error:t}),o.hasCheckGateErrorOccurred=!0),!1}}static manuallyLogGateExposure(e){t(i).manuallyLogGateExposure(e)}static getExperiment(e,r={}){try{let{fireExperimentExposure:s=!0}=r;return(s?t(i).getExperiment.bind(t(i)):t(i).getExperimentWithExposureLoggingDisabled.bind(t(i)))(e)}catch(t){return o.hasGetExperimentErrorOccurred||(console.warn({msg:"An error has occurred getting the experiment. Only the first occurrence of this error is logged.",experimentName:e,error:t}),o.hasGetExperimentErrorOccurred=!0),new i.DynamicConfig(e,{},"",{time:Date.now(),reason:i.EvaluationReason.Error})}}static getExperimentValue(e,t,r,s={}){let i=o.getExperiment(e,s);try{let{typeGuard:e}=s;return i.get(t,r,e)}catch(t){return o.hasGetExperimentValueErrorOccurred||(console.warn({msg:"An error has occurred getting the experiment value. Only the first occurrence of this error is logged.",experimentName:e,defaultValue:r,options:s,error:t}),o.hasGetExperimentValueErrorOccurred=!0),r}}static manuallyLogExperimentExposure(e){t(i).manuallyLogExperimentExposure(e)}static manuallyLogLayerExposure(e,r){t(i).manuallyLogLayerParameterExposure(e,r)}static shutdownStatsig(){t(i).shutdown()}static overrideGate(e,r){t(i).overrideGate(e,r)}static clearGateOverride(e){t(i).overrideGate(e,null)}static overrideConfig(e,r){t(i).overrideConfig(e,r)}static clearConfigOverride(e){t(i).overrideConfig(e,null)}static setOverrides(e){t(i).setOverrides({gates:{},configs:{},layers:{},...e})}static getOverrides(){return t(i).getOverrides()}static clearAllOverrides(){t(i).setOverrides(null)}static isCurrentUser(e,t){return o.shallowEquals(o.currentIdentifiers,e)&&o.shallowEquals(o.currentAttributes,t)}static onGateUpdated(e,t,r={}){return o.subscriptions.onGateUpdated(e,s=>{let{fireGateExposure:i=!0}=r;i&&o.manuallyLogGateExposure(e);try{t(s)}catch(t){console.warn(`Error calling callback for gate ${e} with value ${s}`,t)}},o.checkGate,r)}static onExperimentValueUpdated(e,t,r,s,i={}){return o.subscriptions.onExperimentValueUpdated(e,t,r,t=>{let{fireExperimentExposure:r=!0}=i;r&&o.manuallyLogExperimentExposure(e);try{s(t)}catch(r){console.warn(`Error calling callback for experiment ${e} with value ${t}`,r)}},o.getExperimentValue,i)}static onAnyUpdated(e){return o.subscriptions?.onAnyUpdated(e)}static async init(e,t,r){let s,i;let n={...e};try{let o=(0,a("1VtdU").default).fetchClientSdk(e).then(e=>n.sdkKey=e.clientSdkKey),l=(0,a("1VtdU").default).fetchExperimentValues(e,t,r),[,c]=await Promise.all([o,l]);s=c.experimentValues,i=c.customAttributes}catch(e){throw e instanceof Error&&console.error(`Error occurred when trying to fetch the Feature Gates client values, error: ${e?.message}`),console.warn("Initialising Statsig client without values"),await o.initFromValues(n,t,r),e}await this.initFromValues(n,t,i,s)}static async initWithProvider(e,t,r){let s,i;let a={...e,disableCurrentPageLogging:!0};try{await o.provider.setProfile(e,t,r);let n=o.provider.getClientSdkKey().then(e=>a.sdkKey=e),l=o.provider.getExperimentValues(),[,c]=await Promise.all([n,l]);s=c.experimentValues,i=c.customAttributesFromFetch}catch(e){throw e instanceof Error&&console.error(`Error occurred when trying to fetch the Feature Gates client values, error: ${e?.message}`),console.warn("Initialising Statsig client without values"),await o.initFromValues(a,t,r),e}await this.initFromValues(a,t,i,s)}static async initFromValues(e,r,s,l={}){let c=this.toStatsigUser(r,s);o.currentIdentifiers=r,o.currentAttributes=s,e.sdkKey||(e.sdkKey=n),e.eventLoggingApi||(e.eventLoggingApi="https://xp.atlassian.com/v1/"),e.perimeter===a("8ruqY").PerimeterType.FEDRAMP_MODERATE&&(e.disableAllLogging=!0);let{sdkKey:u}=e,d=this.toStatsigOptions(e,l);try{await t(i).initialize(u,c,d)}catch(e){throw e instanceof Error&&console.error(`Error occurred when trying to initialise the Statsig client, error: ${e?.message}`),console.warn("Initialising Statsig client with default sdk key and without values"),await t(i).initialize(n,c,{...d,initializeValues:{}}),o.initWithDefaults=!0,e}}static toStatsigUser(e,t){let r={customIDs:e,custom:t};return e.atlassianAccountId&&(r.userID=e.atlassianAccountId),r}static async updateUserUsingInitializeValuesProducer(e,t,r){if(!o.initPromise)throw Error("The FeatureGates client must be initialized before you can update the user.");if(o.isCurrentUser(t,r))return o.initPromise;let s=o.initPromise;try{await o.initPromise}catch(e){}let i=e(),a=o.updateStatsigClientUser(i,t,r);return o.initPromise=a.catch(async()=>{o.initPromise=s,o.provider&&await o.provider.setProfile(o.initOptions,o.currentIdentifiers,o.currentAttributes)}),a}static async updateStatsigClientUser(e,r,s){let a,n;try{a=await e,n=o.toStatsigUser(r,a.customAttributesFromFetch)}catch(t){let e=t instanceof Error?t.message:JSON.stringify(t);throw o.initOptions.updateUserCompletionCallback?.(!1,e),t}if(t(i).updateUserWithValues(n,a.experimentValues))o.currentIdentifiers=r,o.currentAttributes=s,o.subscriptions.anyUpdated();else throw Error("Failed to update user. An unexpected error occured.")}static toStatsigOptions(e,t){let{sdkKey:r,updateUserCompletionCallback:s,perimeter:i,...a}=e;return{...a,initializeValues:t,environment:{tier:e.environment},disableCurrentPageLogging:!0,...e.updateUserCompletionCallback&&{updateUserCompletionCallback:o.toStatsigUpdateUserCompletionCallback(e.updateUserCompletionCallback)}}}static toStatsigUpdateUserCompletionCallback(e){return(t,r,s)=>{e(r,s)}}static shallowEquals(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;let r=Object.entries(e),s=Object.entries(t);if(r.length!==s.length)return!1;let i=([e],[t])=>e.localeCompare(t);r.sort(i),s.sort(i);for(let e=0;e<r.length;e++){let[,t]=r[e],[,i]=s[e];if(t!==i)return!1}return!0}static getPackageVersion(){return a("i9mLs").CLIENT_VERSION}static getLayer(e,r={}){try{let{fireLayerExposure:s=!0}=r;return(s?t(i).getLayer.bind(t(i)):t(i).getLayerWithExposureLoggingDisabled.bind(t(i)))(e)}catch(t){return o.hasGetLayerErrorOccurred||(console.warn({msg:"An error has occurred getting the layer. Only the first occurrence of this error is logged.",layerName:e,error:t}),o.hasGetLayerErrorOccurred=!0),(0,i.Layer)._create(e,{},"",{time:Date.now(),reason:i.EvaluationReason.Error})}}static getLayerValue(e,t,r,s={}){let i=o.getLayer(e,s);try{let{typeGuard:e}=s;return i.get(t,r,e)}catch(t){return o.hasGetLayerValueErrorOccurred||(console.warn({msg:"An error has occurred getting the layer value. Only the first occurrence of this error is logged.",layerName:e,defaultValue:r,options:s,error:t}),o.hasGetLayerValueErrorOccurred=!0),r}}static getOptionsWithDefaults(e){return{perimeter:o.getDefaultPerimeter(),...e}}static getDefaultPerimeter(){return(0,a("aIZdc").isFedRamp)()?a("8ruqY").PerimeterType.FEDRAMP_MODERATE:a("8ruqY").PerimeterType.COMMERCIAL}}let l=o;if("undefined"!=typeof window){if(void 0===window.__FEATUREGATES_JS__)window.__FEATUREGATES_JS__=o;else{l=window.__FEATUREGATES_JS__;let e=l?.getPackageVersion?.()||"4.10.0 or earlier";e!==a("i9mLs").CLIENT_VERSION&&console.warn(`Multiple versions of FeatureGateClients found on the current page.
      The currently bound version is ${e} when module version ${a("i9mLs").CLIENT_VERSION} was loading.`)}}var c=l}),n("9Pvqq",function(t,r){e(t.exports,"default",()=>n);var s=a("7n9mn");let i="@all-features";class n{constructor(){this.eventToValue=new Map,this.emitter=new s.EventEmitter2}onGateUpdated(e,t,r,s){let i=r(e,{...s,fireGateExposure:!1});void 0===this.eventToValue.get(t)&&this.eventToValue.set(t,i);let a=()=>{let i=r(e,{...s,fireGateExposure:!1});this.eventToValue.get(t)!==i&&(this.eventToValue.set(t,i),t(i))};return this.emitter.on(e,a),()=>{this.emitter.off(e,a)}}onExperimentValueUpdated(e,t,r,s,i,a){let n=`${e}.${t}`,o=i(e,t,r,{...a,fireExperimentExposure:!1});void 0===this.eventToValue.get(s)&&this.eventToValue.set(s,o);let l=()=>{let n=i(e,t,r,{...a,fireExperimentExposure:!1});this.eventToValue.get(s)!==n&&(this.eventToValue.set(s,n),s(n))};return this.emitter.on(n,l),()=>{this.emitter.off(n,l)}}onAnyUpdated(e){return this.emitter.on(i,e),()=>{this.emitter.off(i,e)}}anyUpdated(){this.emitter.emit(i),this.emitter.eventNames().filter(e=>e!==i).forEach(e=>{this.emitter.emit(e)})}}}),n("1VtdU",function(t,r){e(t.exports,"default",()=>s);class s{static async fetchClientSdk(e){let{targetApp:t}=e,r=`/api/v2/frontend/clientSdkKey/${t}`;try{return await this.fetchRequest(r,"GET",e)}catch(e){if(e instanceof Error)throw e;throw Error("Failed to retrieve client sdk key")}}static async fetchExperimentValues(e,t,r){let s={identifiers:t,customAttributes:r,targetApp:e.targetApp};try{return await this.fetchRequest("/api/v2/frontend/experimentValues","POST",e,s)}catch(e){if(e instanceof Error)throw e;throw Error("Failed to retrieve experiment values")}}static async handleResponseError(e){if(!e.ok){let t=await e.text();throw new(a("4BA3W")).ResponseError(`Non 2xx response status received, status: ${e.status}, body: ${JSON.stringify(t)}`)}if(204===e.status)throw new(a("4BA3W")).ResponseError("Unexpected 204 response")}static async extractResponseBody(e){return JSON.parse(await e.text())}static getBaseUrl(e,t=!1,r){if(t)return"/gateway/api/flags";if(r===a("8ruqY").PerimeterType.FEDRAMP_MODERATE)switch(e){case a("8ruqY").FeatureGateEnvironment.Production:return"https://api.atlassian-us-gov-mod.com/flags";case a("8ruqY").FeatureGateEnvironment.Staging:return"https://api.stg.atlassian-us-gov-mod.com/flags";default:throw Error(`Invalid environment "${e}" for "${r}" perimeter`)}else if(r===a("8ruqY").PerimeterType.COMMERCIAL)switch(e){case a("8ruqY").FeatureGateEnvironment.Development:return"https://api.dev.atlassian.com/flags";case a("8ruqY").FeatureGateEnvironment.Staging:return"https://api.stg.atlassian.com/flags";default:return"https://api.atlassian.com/flags"}else throw Error(`Invalid perimeter "${r}"`)}static async fetchRequest(e,t,r,i){let n;let o=s.getBaseUrl(r.environment,r.useGatewayURL,r.perimeter),l=r.fetchTimeoutMs||5e3;if(AbortSignal.timeout)n=AbortSignal.timeout(l);else if(AbortController){let e=new AbortController;n=e.signal,setTimeout(()=>e.abort(),l)}let c=await fetch(`${o}${e}`,{method:t,headers:{"Content-Type":"application/json","X-Client-Name":"feature-gate-js-client","X-Client-Version":a("i9mLs").CLIENT_VERSION,"X-API-KEY":r.apiKey},signal:n,...i&&{body:JSON.stringify(i)}});return await this.handleResponseError(c),await this.extractResponseBody(c)}}}),n("8ruqY",function(t,r){var s,i,a,n;e(t.exports,"FeatureGateEnvironment",()=>s),e(t.exports,"PerimeterType",()=>i),(a=s||(s={})).Development="development",a.Staging="staging",a.Production="production",(n=i||(i={})).COMMERCIAL="commercial",n.FEDRAMP_MODERATE="fedramp-moderate"}),n("i9mLs",function(t,r){e(t.exports,"CLIENT_VERSION",()=>s);let s="0.0.0-use.local"}),n("4BA3W",function(t,r){e(t.exports,"ResponseError",()=>s);class s extends Error{constructor(e){super(e)}}}),n("2gQ83",function(r,s){e(r.exports,"default",()=>l);var i=a("bXrHm");let n="atlOrigin",o={originLibrary:"origin-tracing.js@0.0.0-use.local"};class l{constructor({id:e=l.generateId(),product:t,dangerouslySkipValidation:r=!1}){this.id=e,this.product=t,r||this.validate()}static isValidId(e){return"string"==typeof e&&/^[-_a-zA-Z0-9]{1,36}$/.test(e)}static isValidProduct(e){return"string"==typeof e&&/^[-_a-zA-Z0-9]{1,20}$/.test(e)}static generateId(){return t(i)().replace(/-/g,"")}static createEmpty(){return new c}static createMalformed(){return new u}static fromUrl(e){let t=new((0,a("aWBhb").getEnv)()).URLSearchParams;return d(e,e=>{t=new((0,a("aWBhb").getEnv)()).URLSearchParams(e)}),l.fromEncoded(t.get(n))}static fromEncoded(e){if(!e)return l.createEmpty();try{return l.decode(e)}catch(e){return l.createMalformed()}}static removeFromUrl(e){return d(e,e=>{let t=new((0,a("aWBhb").getEnv)()).URLSearchParams(e);return t.delete(n),t.toString()})}static decode(e){return new l((0,a("lu9OT").decode)(e))}encode(){return(0,a("lu9OT").encode)({id:this.id,product:this.product})}addToUrl(e){return d(e,e=>{let t=new((0,a("aWBhb").getEnv)()).URLSearchParams(e);return t.set(n,this.encode()),t.toString()})}isEmpty(){return!1}isMalformed(){return!this.isEmpty()&&!this.isValid()}isValid(){return!0}toAnalyticsAttributes({transformValue:e=e=>null===e?void 0:e,hasGeneratedId:t=!1}={}){return{[t?"originIdGenerated":"originId"]:e(this.id),originProduct:e(this.product),...o}}validate(){if(!l.isValidId(this.id))throw TypeError("Invalid Origin id");if(!l.isValidProduct(this.product))throw TypeError("Missing/invalid Origin product")}}class c extends l{constructor(){super({id:null,product:null,dangerouslySkipValidation:!0})}isValid(){return!1}isEmpty(){return!0}toAnalyticsAttributes(){return{...o}}}class u extends l{constructor(){super({id:null,product:null,dangerouslySkipValidation:!0})}isValid(){return!1}isEmpty(){return!1}toAnalyticsAttributes(){return{originMalformed:!0,...o}}}function d(e,t){return String(e).replace(/(^[^?#]*)(?:\?)?([^#]*?)(#.*|$)$/,(e,r,s,i)=>{let a=t(s);return a&&(a=`?${a}`),`${r}${a}${i}`})}}),n("lu9OT",function(t,r){e(t.exports,"encode",()=>i),e(t.exports,"decode",()=>n);let s={confluence:"c",jira:"j",stride:"s",bitbucket:"b",trello:"t"};function i(e){let t=JSON.stringify(function({id:e,product:t}){return{i:e,p:t&&t in s?s[t]:t}}(e)),r=(0,a("aWBhb").getEnv)().btoa(t);return(0,a("8FuSo").base64ToBase64Url)(r)}function n(e){let t=(0,a("8FuSo").base64UrlToBase64)(e);return function(e){let t={};return e.i&&(t.id=e.i),e.p&&(t.product=function(e){let t=Object.keys(s);for(let r=0;r<t.length;r++){let i=t[r];if(e===s[i])return i}return e}(e.p)),t}(JSON.parse((0,a("aWBhb").getEnv)().atob(t)))}}),n("8FuSo",function(t,r){function s(e){return null==e?"":String(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function i(e){if(null==e)return"";let t=String(e).replace(/-/g,"+").replace(/_/g,"/"),r=(4-e.length%4)%4;return t+"===".slice(0,r)}e(t.exports,"base64ToBase64Url",()=>s),e(t.exports,"base64UrlToBase64",()=>i)}),n("aWBhb",function(t,r){let s;e(t.exports,"getEnv",()=>o);var i=a("5k7LC");let n=()=>({atob:"function"==typeof atob&&atob.bind(void 0)||void 0!==i.Buffer&&(e=>(0,i.Buffer).from(e,"base64").toString()),btoa:"function"==typeof btoa&&btoa.bind(void 0)||void 0!==i.Buffer&&(e=>(0,i.Buffer).from(e).toString("base64")),URLSearchParams:"function"==typeof URLSearchParams&&URLSearchParams||a("6vAaw").URLSearchParams}),o=()=>s||(s=l(n())),l=e=>{if(!(e.atob&&e.btoa&&e.URLSearchParams))throw TypeError("Origin-Tracing: missing environment APIs. Required: btoa(), atob(), URLSearchParams() (or in Node: Buffer, require('url').URLSearchParams).");return e}}),n("cm6fz",function(t,r){e(t.exports,"canCompress",()=>s),e(t.exports,"buildCompressionFunction",()=>n);let s=e=>"feature"===e.actionSubject&&"exposed"===e.action&&"operational"===e.eventType&&e.attributes&&e.tags&&e.tags.includes("measurement")&&!e.tags.includes("hasCustomAttributes"),i=(e,t=50)=>{if(!e||e.length<=0)return[];if(t<=0)throw Error("Batch size must be greater than 0");return a(e.map(e=>{let{flagKey:t,value:r,reason:s,ruleId:i,errorKind:a}=e.attributes;return{key:t,value:r,...s&&{reason:s},...i&&{ruleId:i},...a&&{errorKind:a}}}),t)},a=(e,t)=>{let r=[];for(let s=0;s<e.length;s+=t){let i=e.slice(s,s+t);r.push({actionSubject:"features",action:"exposed",eventType:"operational",attributes:{evaluations:i},tags:["measurement"],source:"@atlassian/exposure-events-compressor"})}return r},n=e=>t=>i(t,e)}),n("5bWbX",function(r,s){e(r.exports,"default",()=>o);var i=a("5uXOq");let n=(0,a("cb25w").default)()(a("5pZVQ").EngagementProvider);var o=(0,a("f1t8h").default)(e=>t(i).createElement(n,{...e,store:(0,a("4qJHz").default)(e.config)}))}),n("f1t8h",function(r,s){e(r.exports,"default",()=>n);var i=a("5uXOq");function n(e){let r=t(i).createContext(!1);return function(s){return t(i).createElement(r.Consumer,null,a=>a?s.children:t(i).createElement(r.Provider,{value:!0},t(i).createElement(e,s)))}}}),n("4qJHz",function(r,s){e(r.exports,"store",()=>c),e(r.exports,"default",()=>u);var i=a("ajpes"),n=a("3f2cs");let o={messageMapping:new Map,current:null,initialized:!1,initializing:!1,config:{cloudId:"",aaid:"",locale:"",product:"",stargateUrl:"",orgId:"",workspaceId:""}},l=(0,a("9JnaK").createCancellationToken)(),c=(0,n.createStore)((e=o,r)=>{switch(r.type){case a("kjEZw").SET_MESSAGE_MAPPING:return{...e,initialized:!0,initializing:!1,messageMapping:r.messageMapping};case a("kjEZw").SET_INITIALIZING:return{...e,config:r.config,initializing:!0};case a("kjEZw").SET_CURRENT:{let{eventMapping:s}=r,{message:a,component:n}=s,o=function(e,r){let s=new Map;return e.forEach((e,a)=>{t(i)(e.component,r)||s.set(a,e)}),s}(e.messageMapping,n);return{...e,current:{messageId:a.messageId,variationId:a.variationId,...n},messageMapping:o}}case a("kjEZw").CLEAR_CURRENT:return{...e,current:null};case a("kjEZw").RESET_STORE:return o;default:return e}});var u=e=>{let t=c.getState();if(t.initializing||t.initialized){if(t.config.cloudId===e.cloudId)return c;l.isCancelled=!0,l=(0,a("9JnaK").createCancellationToken)(),c.dispatch((0,a("kjEZw").resetStore)())}let r={...e};return r.locale=r.locale.replace("_","-"),c.dispatch((0,a("kjEZw").initialize)(r)),(0,a("7CfdH").isMessagingEnabled)()&&(0,a("aS5YT").processMessages)(c,r,l),c}}),n("9JnaK",function(t,r){e(t.exports,"createCancellationToken",()=>s);function s(e=!1){return{isCancelled:e}}}),n("7CfdH",function(t,r){e(t.exports,"isMessagingEnabled",()=>s);function s(){return!(0,a("aIZdc").isFedRamp)()}}),n("kjEZw",function(t,r){e(t.exports,"SET_MESSAGE_MAPPING",()=>s),e(t.exports,"SET_INITIALIZING",()=>i),e(t.exports,"RESET_STORE",()=>a),e(t.exports,"CLEAR_CURRENT",()=>n),e(t.exports,"SET_CURRENT",()=>o),e(t.exports,"resetStore",()=>l),e(t.exports,"initialize",()=>c),e(t.exports,"setMessageMapping",()=>u),e(t.exports,"setCurrent",()=>d),e(t.exports,"clearCurrent",()=>h);let s="SET_MESSAGE_MAPPING",i="SET_INITIALIZING",a="RESET_STORE",n="CLEAR_CURRENT",o="SET_CURRENT",l=()=>({type:a}),c=e=>({type:i,config:e}),u=e=>({type:s,messageMapping:e});function d(e){return{type:o,eventMapping:e}}function h(){return{type:n}}}),n("aS5YT",function(t,r){e(t.exports,"processMessages",()=>i);let s=e=>{let t=new Map;return e.forEach(e=>{let r=e.components;r.forEach((s,i)=>{s.triggers.forEach(a=>{t.set(a,{message:e,component:{componentId:i,isLast:i===r.length-1,...s}})})})}),t};async function i(e,t,r){let n,o;if(r.isCancelled)return;let l=(0,a("4qJHz").store).getState(),{cloudId:c,stargateUrl:u,product:d,locale:h}=t;try{let e=await (0,a("1gxex").getMessages)(c,u,d,h);if(r.isCancelled)return;n=e.messages,o=e.interval}catch(e){return}if(null===l.current){let t=s(n);e.dispatch((0,a("kjEZw").setMessageMapping)(t))}0!==o&&setTimeout(()=>{i(e,t,r)},1e3*o)}}),n("1gxex",function(r,s){let i;e(r.exports,"getMessages",()=>u),e(r.exports,"startMessage",()=>f),e(r.exports,"stopMessage",()=>y),e(r.exports,"sendUserResponse",()=>w),e(r.exports,"markAsSeenAndFatigued",()=>A);var n,o,l=a("M4Zg0");let c=t(l).parse("/engage-targeting/api/v2/user/{cloudId}/in-product-messages{?product,schema,locale}");async function u(e,t,r,s){return(0,a("5Xk79").stargateFetch)(`${t}${c.expand({cloudId:e,product:r,schema:"2",locale:s})}`).then(a("5Xk79").errorIfNotOk).then(e=>e.json().then(t=>({messages:t,interval:Number.parseFloat(e.headers.get("POLL-INTERVAL")||"0")})))}function h(e){return e.status===d}let p=t(l).parse("/engage-targeting/api/v2/user/messages/{messageId}/start"),g=t(l).parse("/engage-targeting/api/v2/user/messages/{messageId}/start/{variationId}"),m=t(l).parse("/engage-targeting/api/v2/user/messages/{messageId}/stop");async function f(e,t){return t?.enableChoreographer?E(e,t):I(e)}async function y(e,t){return t?.enableChoreographer?v(e,t):b(e)}async function E(e,t){return i||(i=new(a("k8luc")).EngagekitChoreographerPlugin(t.envType??"local")),i.startMessageWithPlugin(e.messageId,()=>I(e,!0),t.additionalData)}async function v(e,t){return i||(i=new(a("k8luc")).EngagekitChoreographerPlugin(t.envType??"local")),i.stopMessageWithPlugin(e.messageId,()=>b(e,!0),t.additionalData)}async function I(e,t=!1){let r={cloudId:e.cloudId,orgId:e.orgId,workspaceId:e.workspaceId,choreographerEnabled:t};return(0,a("5Xk79").stargateFetch)(e.variationId?`${e.stargateUrl}${g.expand({messageId:e.messageId,variationId:e.variationId})}`:`${e.stargateUrl}${p.expand({messageId:e.messageId})}`,{method:"post",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then(a("5Xk79").pullResponseTextIfNotOk).then(h)}async function b(e,t=!1){let r={cloudId:e.cloudId,orgId:e.orgId,workspaceId:e.workspaceId,choreographerEnabled:t};return(0,a("5Xk79").stargateFetch)(`${e.stargateUrl}${m.expand({messageId:e.messageId})}`,{method:"post",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then(a("5Xk79").pullResponseTextIfNotOk).then(h)}(n=o||(o={})).LOCAL="local",n.DEV="dev",n.STAGING="staging",n.PROD="prod";let T=t(l).parse("/engage-targeting/api/v2/user/{cloudId}/messages/{messageId}/response");async function w(e,t,r,s){return(0,a("5Xk79").stargateFetch)(`${t}${T.expand({cloudId:e,messageId:r})}`,{method:"post",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}}).then(a("5Xk79").pullResponseTextIfNotOk).then(()=>Promise.resolve())}let S=t(l).parse("/engage-targeting/api/v2/user/messages/{messageId}/seen");async function A(e){let t={cloudId:e.cloudId,orgId:e.orgId,workspaceId:e.workspaceId};return(0,a("5Xk79").stargateFetch)(`${e.stargateUrl}${S.expand({messageId:e.messageId})}`,{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(a("5Xk79").pullResponseTextIfNotOk).then(()=>Promise.resolve())}}),n("k8luc",function(t,r){e(t.exports,"EngagekitChoreographerPlugin",()=>s);class s extends a("4YUjU").ChoreographerPlugin{constructor(e,t={}){super(a("TTRxY").ProductIds.ENGAGEKIT,e,t)}isValidDuplicateStartRequest(e){let t=(0,a("9ACoj").Choreographer).getInstance().getCurrentMessage()??(0,a("9ACoj").Choreographer).getInstance().getCurrentPendingMessage();return!!(t&&t.productId===this.state.productId&&t.messageId===e&&Date.now()-t.timestamp<3e5)}async startMessageWithPlugin(e,t,r={}){let s=new(a("labik")).DebugLogger(this.state.productId,e),i=a("TTRxY").MessageAction.START;if(s.trace({verbose:"EngagekitChoreographerPlugin::startMessageWithPlugin"}),this.isValidDuplicateStartRequest(e)){let n=new(a("7cTYp")).Logger(i,e,{...this.state.metaMetricsData,...r},this.analyticsClient),o=!!await t();return o&&(n.started(),s.log({verbose:{phase:i,plugin:this.constructor.name,disposition:a("TTRxY").MessageDeliveryStatus.STARTED,timestamp:performance.now()}})),o}return this.onStart(e,t),await this.startMessage(e,r)===a("TTRxY").MessageDeliveryStatus.STARTED}async stopMessageWithPlugin(e,t,r={}){return new(a("labik")).DebugLogger(this.state.productId,e).trace({verbose:"EngagekitChoreographerPlugin::stopMessageWithPlugin"}),this.onStop(e,t),await this.stopMessage(e,r)===a("TTRxY").MessageDeliveryStatus.STOPPED}}}),n("9ACoj",function(t,r){let s;e(t.exports,"Choreographer",()=>i);class i{static getInstance(){return s||(s=new this),s}constructor(){this.state={currentMessage:null,isDisabled:!1,messages:new Map,messageQueue:[],messageTtl:null,plugins:new Map,queueingBehindMessage:null,shouldQueueMessages:!1}}stopCurrentMessage(){this.state.currentMessage&&this.stopMessageInternal(this.state.currentMessage.productId,this.state.currentMessage.messageId,this.state.currentMessage.analyticsClient,this.state.currentMessage.metricsData,!0).then(()=>{this.clearMessageTtl(),this.enablePlugins()})}queueMessages(e,t){this.state.shouldQueueMessages=!0,this.state.queueingBehindMessage={productId:e,messageId:t,timestamp:Date.now()}}queueMessage(e,t,r,s,i){return new Promise(a=>{this.state.messageQueue.push({productId:e,messageId:t,analyticsClient:r,metricsData:s,plugin:i,resolve:a})})}processQueuedMessage(){let e=this.state.messageQueue.shift();this.state.shouldQueueMessages=!1,this.state.queueingBehindMessage=null,e&&e.resolve(this.startMessage(e.productId,e.messageId,e.analyticsClient,e.metricsData,e.plugin))}destroyMessageQueue(){for(this.state.shouldQueueMessages=!1,this.state.queueingBehindMessage=null;this.state.messageQueue.length>0;){let{analyticsClient:e,messageId:t,metricsData:r,productId:s,resolve:i}=this.state.messageQueue.shift(),n={...r,productId:s,messageId:t},o=a("TTRxY").MessageAction.START,l=new(a("7cTYp")).Logger(o,t,n,e),c=new(a("labik")).DebugLogger(s,t);l.blocked({blockedByProductId:this.state.currentMessage?.productId,blockedByMessageId:this.state.currentMessage?.messageId}),c.log({verbose:{phase:o,disposition:a("TTRxY").MessageDeliveryStatus.BLOCKED,blockedByProductId:this.state.currentMessage?.productId,blockedByMessageId:this.state.currentMessage?.messageId}}),i(a("TTRxY").MessageDeliveryStatus.BLOCKED)}}setMessageTtl(e,t,r,s){this.state.currentMessage={productId:e,messageId:t,analyticsClient:r,metricsData:s,timestamp:Date.now()},this.state.messageTtl=setTimeout(()=>{this.isCurrentMessage(e,t)&&this.stopCurrentMessage()},3e5)}isCurrentMessage(e,t){return!!(this.state.currentMessage&&this.state.currentMessage.productId===e&&this.state.currentMessage.messageId===t)}getCurrentMessage(){return this.state.currentMessage}getCurrentPendingMessage(){return this.state.queueingBehindMessage}clearMessageTtl(){this.state.currentMessage=null,this.state.messageTtl&&clearTimeout(this.state.messageTtl)}disablePlugins(e){this.state.isDisabled=!0,[...this.state.plugins.values()].forEach(t=>{t!==e&&t.disable()})}enablePlugins(){[...this.state.plugins.values()].forEach(e=>e.enable()),this.state.isDisabled=!1}unregisterPlugin(e){this.state.currentMessage?.productId===e&&this.stopCurrentMessage(),this.state.messages.delete(e),this.state.plugins.delete(e)}isDisplayingMessage(){return!!(this.state.currentMessage||[...this.state.plugins.values()].reduce((e,t)=>e||t.isDisplayingMessage(),!1))}getMessages(e){return this.state.messages.get(e)??new Map}async startMessage(e,t,r,s={},i){if((0,a("VSDnB").fg)("post-office_ipm_choreographer_new_tenants")){if(this.hasMessageRecord(e,t)){let r=this.ensureMessageRecord(e,t);return await r.start?.()??!0?(r.onStart?.(),a("TTRxY").MessageDeliveryStatus.STARTED):a("TTRxY").MessageDeliveryStatus.CANCELED}return a("TTRxY").MessageDeliveryStatus.UNREGISTERED}let n=new(a("labik")).DebugLogger(e,t),o=a("TTRxY").MessageAction.START,l=performance.now();n.log({info:{phase:o,timestamp:l},verbose:{phase:o,timestamp:l}});let c={...s,productId:e,messageId:t},u=new(a("7cTYp")).Logger(o,t,c,r);try{if(!this.hasMessageRecord(e,t))return u.unregistered(),n.log({verbose:{phase:o,disposition:a("TTRxY").MessageDeliveryStatus.UNREGISTERED}}),a("TTRxY").MessageDeliveryStatus.UNREGISTERED;if(this.state.shouldQueueMessages)return n.log({verbose:{phase:o,disposition:`queued behind ${this.state.queueingBehindMessage?.productId} ${this.state.queueingBehindMessage?.messageId}`}}),this.queueMessage(e,t,r,s,i);if(this.state.isDisabled||this.isDisplayingMessage())return u.blocked({blockedByProductId:this.state.currentMessage?.productId,blockedByMessageId:this.state.currentMessage?.messageId}),n.log({verbose:{phase:o,disposition:a("TTRxY").MessageDeliveryStatus.BLOCKED,blockedByProductId:this.state.currentMessage?.productId,blockedByMessageId:this.state.currentMessage?.messageId}}),a("TTRxY").MessageDeliveryStatus.BLOCKED;let l=this.ensureMessageRecord(e,t);if(this.queueMessages(e,t),await l.start?.()??!0)return l.onStart?.(),u.started(),this.disablePlugins(i),this.setMessageTtl(e,t,r,s),this.destroyMessageQueue(),n.log({verbose:{phase:o,disposition:a("TTRxY").MessageDeliveryStatus.STARTED}}),a("TTRxY").MessageDeliveryStatus.STARTED;return this.processQueuedMessage(),n.log({verbose:{phase:o,disposition:a("TTRxY").MessageDeliveryStatus.CANCELED}}),a("TTRxY").MessageDeliveryStatus.CANCELED}catch(e){return u.error({reason:e.message}),n.log({verbose:{phase:o,disposition:a("TTRxY").MessageDeliveryStatus.ERROR}}),a("TTRxY").MessageDeliveryStatus.ERROR}}async stopMessageInternal(e,t,r,s={},i=!1){if((0,a("VSDnB").fg)("post-office_ipm_choreographer_new_tenants")){if(this.hasMessageRecord(e,t)){let r=this.ensureMessageRecord(e,t);return await r.stop?.()??!0?(r.onStop?.(),a("TTRxY").MessageDeliveryStatus.STOPPED):a("TTRxY").MessageDeliveryStatus.CANCELED}return a("TTRxY").MessageDeliveryStatus.UNREGISTERED}let n=new(a("labik")).DebugLogger(e,t),o=a("TTRxY").MessageAction.STOP,l=performance.now();n.log({info:{phase:o,timestamp:l},verbose:{phase:o,timestamp:l}});let c={...s,productId:e,messageId:t},u=new(a("7cTYp")).Logger(o,t,c,r);try{if(!this.hasMessageRecord(e,t))return u.unregistered(),n.log({verbose:{phase:o,disposition:a("TTRxY").MessageDeliveryStatus.UNREGISTERED}}),a("TTRxY").MessageDeliveryStatus.UNREGISTERED;let r=this.ensureMessageRecord(e,t);this.isCurrentMessage(e,t)&&this.queueMessages(e,t);let s=await r.stop?.()??!0;if(s||i)return this.isCurrentMessage(e,t)&&(r.onStop?.(),u.stopped(i?{forceStop:i,didStop:s}:void 0),this.clearMessageTtl(),this.enablePlugins()),this.processQueuedMessage(),n.log({verbose:{phase:o,disposition:a("TTRxY").MessageDeliveryStatus.STOPPED}}),a("TTRxY").MessageDeliveryStatus.STOPPED;return this.destroyMessageQueue(),n.log({verbose:{phase:o,disposition:a("TTRxY").MessageDeliveryStatus.CANCELED}}),a("TTRxY").MessageDeliveryStatus.CANCELED}catch(e){return u.error({reason:e.message}),n.log({verbose:{phase:o,disposition:a("TTRxY").MessageDeliveryStatus.ERROR}}),a("TTRxY").MessageDeliveryStatus.ERROR}}async stopMessage(e,t,r,s={}){return this.stopMessageInternal(e,t,r,s)}registerPlugin(e,t){if(this.state.plugins.has(e))throw Error(`Choreographer plugin already registered for ${e}!`);return this.state.plugins=this.state.plugins.set(e,t),this.state.isDisabled&&t.disable(),()=>{this.unregisterPlugin(e)}}ensureMessageRecord(e,t){let r=this.state.messages.get(e);r||(r=new Map,this.state.messages.set(e,r));let s=r.get(t);return s||(s={},r.set(t,s)),s}hasMessageRecord(e,t){return!!this.state.messages.get(e)?.has?.(t)}on(e,t,r={},s={}){let i={...this.ensureMessageRecord(e,t),...r,...s};this.state.messages.get(e).set(t,i)}onStart(e,t,r,s){this.on(e,t,{start:r},s)}onStop(e,t,r,s={}){this.on(e,t,{stop:r},s)}off(e,t){this.state.messages.get(e)?.delete?.(t)}}}),n("TTRxY",function(t,r){var s,i;e(t.exports,"MessageEventType",()=>a),e(t.exports,"MessageDeliveryStatus",()=>n),e(t.exports,"ProductIds",()=>s),e(t.exports,"IntegratedChoreographerMessageTypesEnum",()=>o),e(t.exports,"MessageAction",()=>l);let a={START:"start",STOP:"stop"},n={BLOCKED:"blocked",CANCELED:"canceled",ERROR:"error",STARTED:"started",STOPPED:"stopped",UNREGISTERED:"unregistered"};(i=s||(s={})).CONFLUENCE="confluence",i.ENGAGEKIT="Engagekit",i.INTERCOM="intercom",i.JIRA="jira",i.PENDO="pendo",i.CLOUDADMIN="cloudadmin",i.BITBUCKET="bitbucket",i.POST_OFFICE="post-office";let o=["engagement","marketing"],l={START:"messageStart",STOP:"messageStop"}}),n("labik",function(t,r){function s(){return window.choreographerLoggingLevel}e(t.exports,"DebugLogger",()=>i);class i{constructor(e,t){this.log=e=>{[...Object.keys(e)].forEach(t=>{var r;r={productId:this.state.productId,messageId:this.state.messageId,...e[t]??{},..."verbose"===t?{timestamp:performance.now()}:{}},s()===t&&console.table(r)})},this.trace=e=>{[...Object.keys(e)].forEach(t=>{var r,i,a;r=this.state.productId,i=this.state.messageId,a=`${e[t]}${"verbose"===t?` (${performance.now()})`:""}`,s()===t&&console.log(`CHOREOGRAPHER - ${r} - ${i} - ${a}`)})},this.state={productId:e,messageId:t}}}}),n("7cTYp",function(t,r){e(t.exports,"Logger",()=>s);class s{constructor(e,t,r,s){this.state={actionSubject:e,actionSubjectId:t,metricsData:r,analyticsClient:s}}sendOperationalEvent(e,t){if((0,a("VSDnB").fg)("platform.post-office.enable-full-choreographer-logging")){let{analyticsClient:r,actionSubject:s,actionSubjectId:i,metricsData:a}=this.state;r.sendOperationalEvent({source:"choreographer",action:e,actionSubject:s,actionSubjectId:i,attributes:{...a??{},...t??{}},tags:["postOffice"]})}}blocked(e){this.sendOperationalEvent(a("TTRxY").MessageDeliveryStatus.BLOCKED,e)}error(e){this.sendOperationalEvent(a("TTRxY").MessageDeliveryStatus.ERROR,e)}unregistered(e){this.sendOperationalEvent(a("TTRxY").MessageDeliveryStatus.UNREGISTERED,e)}started(e){this.sendOperationalEvent(a("TTRxY").MessageDeliveryStatus.STARTED,e)}stopped(e){this.sendOperationalEvent(a("TTRxY").MessageDeliveryStatus.STOPPED,e)}}}),n("4YUjU",function(t,r){e(t.exports,"ChoreographerPlugin",()=>s);class s{constructor(e,t,r={}){this.state={isDisabled:!1,isDisplayingMessage:!1,metaMetricsData:r,productId:e,unregisterPlugin:()=>{}},this.analyticsClient=this.createAnalyticsClient(t),this.finalizers={onStart:()=>this.blockDisplayState(),onStop:()=>this.clearDisplayState()},this.state.unregisterPlugin=this.registerPlugin(e)}destroy(){this.state.unregisterPlugin()}isDisplayingMessage(){return this.state.isDisplayingMessage}blockDisplayState(){this.state.isDisplayingMessage=!0}clearDisplayState(){this.state.isDisplayingMessage=!1}disable(){this.state.isDisabled=!0}enable(){this.state.isDisabled=!1}async startMessage(e,t={}){return(0,a("9ACoj").Choreographer).getInstance().startMessage(this.state.productId,e,this.analyticsClient,{...this.state.metaMetricsData,...t},this)}async stopMessage(e,t={}){return(0,a("9ACoj").Choreographer).getInstance().stopMessage(this.state.productId,e,this.analyticsClient,{...this.state.metaMetricsData,...t})}on(e,t={}){return(0,a("9ACoj").Choreographer).getInstance().on(this.state.productId,e,t,this.finalizers)}onStart(e,t){return(0,a("9ACoj").Choreographer).getInstance().onStart(this.state.productId,e,t,this.finalizers)}onStop(e,t){return(0,a("9ACoj").Choreographer).getInstance().onStop(this.state.productId,e,t,this.finalizers)}off(e){return(0,a("9ACoj").Choreographer).getInstance().off(this.state.productId,e)}registerPlugin(e){return(0,a("9ACoj").Choreographer).getInstance().registerPlugin(e,this)}createAnalyticsClient(e){return new(a("buAWB")).default({env:e,product:"postOffice",origin:a("iZhen").originType.WEB})}}});const d=204;n("5Xk79",function(t,r){async function s(e){if(!e.ok)throw Error(`${e.status}: ${await e.text()}`);return e}async function i(e){return e.ok||await e.text(),e}function n(e,t){return function e({input:t,reqOptions:r,numRetries:s=0,maxRetries:i=0,waitTimeMs:n=0,backoffFn:l=o}){if(s>i)throw Error(`Failed to fetch ${t}: Max retries exceeded`);let c={...r,credentials:(0,a("2qBHI").default).includes(location.host)?"include":"same-origin"},u=()=>new Promise(a=>{setTimeout(()=>{a(e({input:t,reqOptions:r,numRetries:s+1,maxRetries:i,waitTimeMs:l(n),backoffFn:l}))},n)});return fetch(t,c).then(e=>e.status>=500&&e.status<=599?u():e).catch(()=>u())}({input:e,reqOptions:t,numRetries:0,maxRetries:3,waitTimeMs:1e3,backoffFn:o})}function o(e){let t=2*e,r=.1*t*Math.random();return t+r}e(t.exports,"errorIfNotOk",()=>s),e(t.exports,"pullResponseTextIfNotOk",()=>i),e(t.exports,"stargateFetch",()=>n)}),n("2qBHI",function(t,r){e(t.exports,"default",()=>s);var s=["bitbucket-pipelines.dev.public.atl-paas.net","bitbucket-pipelines.staging.public.atl-paas.net","bitbucket-pipelines.prod.public.atl-paas.net"]}),n("5pZVQ",function(r,s){e(r.exports,"EngagementProvider",()=>h);var i=a("5uXOq"),n=a("f8l56"),o=a("bxYf9"),l=a("dyczo");function c(e,t){let r=new(a("hDX9C")).default({payload:{action:"exposed",actionSubject:"feature",actionSubjectId:e.flagKey,source:"engagement-platform",attributes:e}});Promise.resolve(t).then(e=>{e.sendTrackEvent(r.payload)})}function u(e,t,r){return{reason:"RULE_MATCH",ruleId:"engagement.inproduct",flagKey:`engagement.inproduct.${e}`,value:t,...r}}async function d(e,t,r,s,i,n){let{locale:o}=t,{message:l,component:d}=e;if(l.holdout){await (0,a("1gxex").startMessage)({cloudId:t.cloudId,stargateUrl:t.stargateUrl,messageId:l.messageId,variationId:l.variationId,orgId:t.orgId,workspaceId:t.workspaceId},i),await (0,a("1gxex").stopMessage)({cloudId:t.cloudId,stargateUrl:t.stargateUrl,messageId:l.messageId,orgId:t.orgId,workspaceId:t.workspaceId},i),c(u(l.messageId,"holdout",{locale:o}),s);return}if(0===d.componentId){let d=await (0,a("1gxex").startMessage)({cloudId:t.cloudId,stargateUrl:t.stargateUrl,messageId:l.messageId,variationId:l.variationId,orgId:t.orgId,workspaceId:t.workspaceId},i);i?.enableChoreographer&&n?.onMessageDisposition&&n.onMessageDisposition(d?a("TTRxY").MessageDeliveryStatus.STARTED:a("TTRxY").MessageDeliveryStatus.BLOCKED),d&&(c(u(l.messageId,l.variationId,{locale:o}),s),r.dispatch((0,a("kjEZw").setCurrent)(e)))}else c(u(l.messageId,l.variationId,{locale:o}),s),r.dispatch((0,a("kjEZw").setCurrent)(e))}class h extends i.Component{static{this.componentConfig=new Map}static{this.childContextTypes={subscribeEngagementState:t(a("8rCP3")).func,setComponentConfig:t(a("8rCP3")).func}}static{this.defaultProps={eventTarget:t(l)}}static{this.hasInitializedAtLeastOneEngagementProvider=!1}constructor(e){super(e),this.onStoreChange=e=>{let{createAnalyticsEvent:t}=this.props,{locale:r}=this.getConfig();if(e.initialized){if(!h.hasInitializedAtLeastOneEngagementProvider){this.sendOperationalEventWithClient({action:"loaded",actionSubject:"messages",actionSubjectId:void 0,source:"engagekit",attributes:{locale:r}});let e=(0,a("kvwcw").getBrowserInfo)();this.onEvent(t({event:"engagement.inproduct.loaded",properties:{browser:e.name,browserVersion:e.version}})),h.hasInitializedAtLeastOneEngagementProvider=!0}this.analyticsEventQueue.flush(this.onEvent),this.unsubscribeFromStore&&this.unsubscribeFromStore()}},this.onEvent=e=>{let r;let s=this.getState();if(!s.initialized){this.analyticsEventQueue.enqueue(e)||this.fireQueueOverflowEvent();return}let{eventTarget:i,store:o,analyticsClientInstance:l}=this.props,c=this.getConfig(),{current:u,messageMapping:p}=s,g=function(e){let t={...e.payload,context:{}};return Object.assign(t.context,...e.context),t}(e);if(i.dispatchEvent((0,a("1V1R5").default)({eventName:"ep.analyticEvent",canBubble:!1,cancellable:!1,detail:g})),!(0,a("7CfdH").isMessagingEnabled)()||u)return;let m=Array.from(p.keys()).find(e=>t(n)(g,e));if(!m)return;let f=p.get(m);if(f.component?.componentType){let e=this.getConfigId(f.component.componentType,f.component.target);r=h.componentConfig.get(e)}d(f,c,o,l,this.getComponentCoordinationOptions(r),r)},this.onEngagementEvent=e=>{let{action:t,clickType:r,ekMessageId:s,ekVariationId:i,ekComponentId:a,ekComponentType:n,ekIsLast:o}=e.payload,{locale:l}=this.getConfig(),c={messageId:s,variationId:i,componentIndex:a,locale:l};"click"===t?(this.handleClickEvent(s,i,a),c.buttonType=r,this.sendUIEventWithClient({action:"clicked",actionSubject:"button",actionSubjectId:`${r}Button`,source:`engagement_${n}`,attributes:c})):("shown"===t&&(c.componentType=n,this.sendScreenEventWithClient({name:`engagement_${n}`,attributes:c})),"hidden"===t&&(c.isLast=o,this.sendUIEventWithClient({action:"hid",actionSubject:"component",actionSubjectId:void 0,source:`engagement_${n}`,attributes:c}))),this.onEvent(e)},this.subscribeEngagementState=e=>{let{store:t}=this.props;return e(t.getState()),t.subscribe(()=>{e(t.getState())})},this.getComponentCoordinationOptions=e=>{let t=!!this.props.coordinationOptions?.enableChoreographer;return{...this.props.coordinationOptions,enableChoreographer:e?.messageType?(0,a("kmPbm").shouldBeChoreographed)(e,{enableChoreographer:!0}):t}},this.getConfigId=(e,t)=>t?`${e}-${t}`:e,this.setComponentConfig=(e,t,r)=>{let s=this.getConfigId(e,r);return h.componentConfig.set(s,t),()=>this.removeComponentConfig(s)},this.removeComponentConfig=e=>{h.componentConfig.has(e)&&h.componentConfig.delete(e)};let{analyticsClientInstance:r}=this.props;this.sendUIEventWithClient=(0,a("6DQWS").sendUIEvent).bind(null,r),this.sendScreenEventWithClient=(0,a("6DQWS").sendScreenEvent).bind(null,r),this.sendOperationalEventWithClient=(0,a("6DQWS").sendOperationalEvent).bind(null,r),this.analyticsEventQueue=new(a("jch2y")).default(100),this.unsubscribeFromStore=this.subscribeEngagementState(this.onStoreChange),this.fireQueueOverflowEvent=t(o)(()=>{})}getConfig(){let{config:e}=this.getState();return e}getChildContext(){return{subscribeEngagementState:this.subscribeEngagementState,setComponentConfig:this.setComponentConfig}}getState(){return this.props.store.getState()}getActiveMessage(){return this.getState().current}async completeMessage(e,t){let r=this.getConfig(),s=this.getComponentCoordinationOptions(t),i=await (0,a("1gxex").stopMessage)({cloudId:r.cloudId,stargateUrl:r.stargateUrl,messageId:e,orgId:r.orgId,workspaceId:r.workspaceId},s);s.enableChoreographer&&t?.onMessageDisposition&&t.onMessageDisposition(i?a("TTRxY").MessageDeliveryStatus.STOPPED:a("TTRxY").MessageDeliveryStatus.CANCELED)}handleClickEvent(e,t,r){let s;let i=this.getActiveMessage();if(i&&i.messageId===e&&i.variationId===t&&i.componentId===r){if(i.componentType){let e=this.getConfigId(i.componentType,i.target);s=h.componentConfig.get(e)}i.isLast&&this.completeMessage(e,s),this.props.store.dispatch((0,a("kjEZw").clearCurrent)())}}componentWillUnmount(){this.unsubscribeFromStore&&this.unsubscribeFromStore()}render(){return t(i).createElement(a("bvUB1").default,{channel:"*",onEvent:this.onEvent},t(i).createElement(a("bvUB1").default,{channel:"engagement",onEvent:this.onEngagementEvent},this.props.children))}}}),n("kmPbm",function(r,s){e(r.exports,"shouldBeChoreographed",()=>n),e(r.exports,"wrapComponentForChoreographer",()=>o),e(r.exports,"wrapToggleableComponentForChoreographer",()=>l);var i=a("5uXOq");let n=(e,t)=>!!t?.enableChoreographer&&e?.messageType!==void 0&&(0,a("TTRxY").IntegratedChoreographerMessageTypesEnum).includes(e.messageType),o=e=>{function r({shouldBeChoreographed:r,withChoreographedRender:s,...a}){let n=(0,i.useMemo)(()=>s(e),[s]);if(r(a)){let{messageType:e,...r}=a;return t(i).createElement(n,r)}let{messageType:o,messageId:l,onMessageDisposition:c,...u}=a;return t(i).createElement(e,u)}return r.displayName=`ChoreographerWrapped${(e.displayName??e.name)||"Component"}`,r},l=(e,r)=>{function s({shouldBeChoreographed:s,withChoreographedToggle:a,...n}){let o=(0,i.useMemo)(()=>a(e,r),[a]);if(s(n)){let{messageType:e,...r}=n;return t(i).createElement(o,r)}let{messageType:l,messageId:c,onMessageDisposition:u,...d}=n;return t(i).createElement(e,d)}return s.displayName=`ChoreographerWrapped${(e.displayName??e.name)||"Component"}`,s}}),n("6DQWS",function(t,r){function s(e,t){Promise.resolve(e).then(e=>{e.sendScreenEvent(t)})}function i(e,t){Promise.resolve(e).then(e=>{e.sendUIEvent(t)})}function a(e,t){Promise.resolve(e).then(e=>{e.sendOperationalEvent(t)})}e(t.exports,"sendScreenEvent",()=>s),e(t.exports,"sendUIEvent",()=>i),e(t.exports,"sendOperationalEvent",()=>a)}),n("kvwcw",function(t,r){e(t.exports,"getBrowserInfo",()=>a);let s=[{name:"IE",pattern:/Trident\/.*; rv:([^;)]+)/},{name:"Chrome",pattern:/Chrome\/([^ )]+)/},{name:"Firefox",pattern:/Firefox\/([^ )]+)/}],i={name:"unknown",version:"unknown"};function a(e){if(!window.navigator)return i;for(let t of(e||(e=window.navigator.userAgent),s)){let r=e.match(t.pattern);if(r)return{name:t.name,version:r[1]}}return i}}),n("1V1R5",function(t,r){e(t.exports,"default",()=>s);var s=({eventName:e,canBubble:t,cancellable:r,detail:s})=>{let i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t,r,s),i}}),n("jch2y",function(t,r){e(t.exports,"default",()=>s);class s{constructor(e){this.queue=[],this.maxSize=e}enqueue(e){return this.queue.length!==this.maxSize&&(this.queue.push(e),!0)}flush(e){this.queue.forEach(e),this.queue=[]}getSize(){return this.queue.length}}}),n("j7rCb",function(t,r){e(t.exports,"setCurrent",()=>n),e(t.exports,"LazyPhaseContext",()=>o),e(t.exports,"useLazyPhase",()=>l);var s=a("5uXOq");let i=a("fVdZG").PHASE.PAINT,n=e=>{i=e,(0,a("adSzG").LISTENERS).slice(0).forEach(t=>t(e))},o=(0,s.createContext)({subscribe:(0,a("cRRE7").createSubscribe)(a("adSzG").LISTENERS),currentValue:()=>i,api:{startNextPhase:()=>{n(a("fVdZG").PHASE.AFTER_PAINT)},resetPhase:()=>n(a("fVdZG").PHASE.PAINT)}}),l=()=>(0,s.useContext)(o).api}),n("fVdZG",function(t,r){e(t.exports,"PHASE",()=>s),e(t.exports,"COLLECTED",()=>i);let s={PAINT:0,AFTER_PAINT:1,LAZY:2},i=new Map}),n("adSzG",function(t,r){e(t.exports,"LISTENERS",()=>s);let s=[]}),n("cRRE7",function(t,r){e(t.exports,"createSubscribe",()=>s);let s=e=>t=>(e.push(t),()=>{let r=e.indexOf(t);-1!==r&&e.splice(r,1)})}),n("bCf8q",function(t,r){e(t.exports,"createLoaderError",()=>i),e(t.exports,"isLoaderError",()=>a);let s=Symbol.for("@atlassian/react-loosely-lazy/loader-error"),i=e=>"object"==typeof e?Object.assign(e,{[s]:!0}):e,a=e=>Object.getOwnPropertySymbols(e).includes(s)}),n("7hSN4",function(r,s){e(r.exports,"LazySuspense",()=>n);var i=a("5uXOq");class n extends i.Component{constructor(e){super(e),this.state={fallback:this.props.fallback,setFallback:e=>{this.hydrationFallback!==e&&(this.hydrationFallback=e,this.mounted&&this.forceUpdate())},name:this.props.name},this.hydrationFallback=null,this.mounted=!1,this.DynamicFallback=({children:e,outsideSuspense:t})=>((0,i.useLayoutEffect)(()=>()=>{t||this.state.setFallback(null)},[t]),e(t?this.hydrationFallback?this.hydrationFallback:null:this.hydrationFallback?null:this.props.fallback)),this.DynamicFallback.displayName="DynamicFallback"}componentDidMount(){this.mounted=!0}renderFallback(e){let{DynamicFallback:r}=this;return t(i).createElement(r,{outsideSuspense:e},e=>e)}renderServer(){return t(i).createElement(a("7In2L").LazySuspenseContext.Provider,{value:this.state},this.props.children)}renderClient(){return t(i).createElement(a("7In2L").LazySuspenseContext.Provider,{value:this.state},t(i).createElement(i.Suspense,{fallback:this.renderFallback(!1)},this.props.children),(!this.mounted||this.hydrationFallback)&&this.renderFallback(!0))}render(){return(0,a("7AnOd").isNodeEnvironment)()?this.renderServer():this.renderClient()}}}),n("7AnOd",function(t,r){e(t.exports,"getExport",()=>s),e(t.exports,"displayNameFromId",()=>i),e(t.exports,"isNodeEnvironment",()=>a),e(t.exports,"attrToProp",()=>n);let s=e=>"default"in e?e.default:e,i=e=>e.split("/").slice(-3).join("/")||"Component",a=()=>"undefined"==typeof window||"nodejs"===window.name;function n(e,t){switch(t.name){case"style":break;case"class":e.className=t.value;break;case"crossorigin":e.crossOrigin=t.value;break;default:e[t.name]=t.value}return e}}),n("jJo8A",function(t,r){e(t.exports,"default",()=>s);function s(e){for(var t,r=e.length,s=r^r,i=0;r>=4;)t=(65535&(t=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))*0x5bd1e995+(((t>>>16)*0x5bd1e995&65535)<<16),t^=t>>>24,s=(65535&s)*0x5bd1e995+(((s>>>16)*0x5bd1e995&65535)<<16)^(t=(65535&t)*0x5bd1e995+(((t>>>16)*0x5bd1e995&65535)<<16)),r-=4,++i;switch(r){case 3:s^=(255&e.charCodeAt(i+2))<<16;case 2:s^=(255&e.charCodeAt(i+1))<<8;case 1:s^=255&e.charCodeAt(i),s=(65535&s)*0x5bd1e995+(((s>>>16)*0x5bd1e995&65535)<<16)}return s^=s>>>13,s=(65535&s)*0x5bd1e995+(((s>>>16)*0x5bd1e995&65535)<<16),((s^=s>>>15)>>>0).toString(36)}}),n("7In2L",function(r,s){e(r.exports,"LazySuspenseContext",()=>n);var i=a("5uXOq");let n=(0,i.createContext)({fallback:t(i).createElement(i.Fragment,null),setFallback:()=>{console.warn("Missing <LooselySuspense /> boundary")}})}),n("5poak",function(t,r){e(t.exports,"WaitContext",()=>s);let s=(0,a("5uXOq").createContext)({subscribe:()=>a("dwdrq").noopCleanup,currentValue:()=>1})}),n("dwdrq",function(t,r){e(t.exports,"noopCleanup",()=>s);let s=()=>{}}),n("kxZPA",function(t,r){function s(e,{defer:t=a("fVdZG").PHASE.PAINT,moduleId:r="",ssr:i=!0}={}){let n=(0,a("7AnOd").isNodeEnvironment)(),o=(0,a("jJo8A").default)(r),l=n?(0,a("WOtQc").createComponentServer)({dataLazyId:o,defer:t,loader:e,moduleId:r,ssr:i}):(0,a("jdTx8").createComponentClient)({dataLazyId:o,defer:t,deferred:(0,a("atSTR").createDeferred)({loader:()=>{let{retry:t}=(0,a("ddkdN").getConfig)();return(0,a("aoIf8").retry)(e,{delay:a("fCMWS").RETRY_DELAY,factor:a("fCMWS").RETRY_FACTOR,maxAttempts:t})},preload:e}),moduleId:r});return l.displayName=`Lazy(${(0,a("7AnOd").displayNameFromId)(r)})`,Object.assign(l,{getAssetUrls:()=>{let{manifest:e}=(0,a("ddkdN").getConfig)();return(0,a("a6rDZ").getAssetUrlsFromId)(e,r)},preload:s=>{let i=s??(t===a("fVdZG").PHASE.PAINT?a("fCMWS").PRIORITY.HIGH:a("fCMWS").PRIORITY.LOW);return(0,a("qkBMj").preloadAsset)({loader:e,moduleId:r,priority:i})}})}e(t.exports,"lazyForPaint",()=>n),e(t.exports,"lazyAfterPaint",()=>o),e(t.exports,"lazy",()=>l);let i={lazyForPaint:{ssr:!0,defer:a("fVdZG").PHASE.PAINT},lazyAfterPaint:{ssr:!0,defer:a("fVdZG").PHASE.AFTER_PAINT},lazy:{ssr:!1,defer:a("fVdZG").PHASE.LAZY}};function n(e,t){return s(e,{...i.lazyForPaint,...t||{}})}function o(e,t){return s(e,{...i.lazyAfterPaint,...t||{}})}function l(e,t){return s(e,{...i.lazy,...t||{}})}}),n("a6rDZ",function(t,r){e(t.exports,"getAssetUrlsFromId",()=>s);let s=(e,t)=>{if(e.assets&&e.assets[t])return e.assets[t].map(t=>`${e.publicPath}${t}`)}}),n("ddkdN",function(t,r){e(t.exports,"getConfig",()=>l),e(t.exports,"setConfig",()=>c),e(t.exports,"MODE",()=>a("7Ewwd").MODE);let s=void 0,i={publicPath:"/",assets:{}},n=a("7Ewwd").MODE.HYDRATE,o={crossOrigin:s,manifest:i,mode:n,retry:2},l=()=>o,c=e=>{o.crossOrigin=e.crossOrigin??s,o.manifest=e.manifest??i,o.mode=e.mode??n,o.retry=e.retry??2}}),n("7Ewwd",function(t,r){e(t.exports,"MODE",()=>s);let s={RENDER:"RENDER",HYDRATE:"HYDRATE"}}),n("jdTx8",function(r,s){e(r.exports,"createComponentClient",()=>n);var i=a("5uXOq");function n({defer:e,deferred:r,dataLazyId:s,moduleId:n}){let o=(0,i.lazy)(()=>r.promise);return l=>{let[c,u]=(0,i.useState)(()=>({noWait:void 0,phase:e!==a("fVdZG").PHASE.AFTER_PAINT,preloaded:e!==a("fVdZG").PHASE.AFTER_PAINT,started:!1})),d=(0,i.useContext)(a("cEm1b").ProfilerContext).current,h=()=>{let e;if(c.started||!c.phase||!c.noWait)return;if(c.started=!0,d){let t={identifier:n};e=()=>{d.onLoadComplete(t)},d.onLoadStart(t)}let t=r.start().catch(e=>{u(()=>{throw(0,a("bCf8q").createLoaderError)(e)})});e&&t.then(e)};(0,a("lO9oD").useSubscription)({context:a("5poak").WaitContext,load:h,onValue:e=>c.noWait=1===e}),e===a("fVdZG").PHASE.AFTER_PAINT&&(0,a("lO9oD").useSubscription)({context:a("j7rCb").LazyPhaseContext,load:h,onValue:t=>c.phase=t>=e});let{setFallback:p}=(0,i.useContext)(a("7In2L").LazySuspenseContext);return(0,i.useMemo)(()=>{let e=((0,a("fVdZG").COLLECTED).get(s)||[]).shift();e&&p((0,a("ddkdN").getConfig)().mode===a("7Ewwd").MODE.RENDER?t(i).createElement(a("oq2LV").PlaceholderFallbackRender,{id:s,content:e}):t(i).createElement(a("2IUgd").PlaceholderFallbackHydrate,{id:s,content:e}))},[p]),t(i).createElement(o,l)}}}),n("cEm1b",function(t,r){e(t.exports,"GlobalReactLooselyLazyProfiler",()=>i),e(t.exports,"ProfilerContext",()=>n);var s=a("5uXOq");let i={current:null},n=(0,s.createContext)(i)}),n("2IUgd",function(r,s){e(r.exports,"PlaceholderFallbackHydrate",()=>n);var i=a("5uXOq");let n=({id:e,content:r})=>t(i).createElement(t(i).Fragment,null,t(i).createElement("input",{type:"hidden","data-lazy-begin":e}),r.map((e,t)=>{let{tagName:r="",childNodes:s=[],attributes:n=[]}=e,o=Array.from(n).reduce(a("7AnOd").attrToProp,{key:String(t)});return r?s.length?(0,i.createElement)(r.toLowerCase(),{...o,dangerouslySetInnerHTML:{__html:""},suppressHydrationWarning:!0}):(0,i.createElement)(r.toLowerCase(),o):(0,i.createElement)(i.Fragment,o,e.textContent)}),t(i).createElement("input",{type:"hidden","data-lazy-end":e}))}),n("oq2LV",function(r,s){e(r.exports,"PlaceholderFallbackRender",()=>o);var i=a("5uXOq");let n=(e,t)=>{let r=(0,i.useRef)(null),{current:s}=(0,i.useRef)(t||[]),n=(0,i.useContext)(a("cEm1b").ProfilerContext).current,o=(0,i.useContext)(a("5poak").WaitContext),l=(0,i.useContext)(a("7In2L").LazySuspenseContext);return(0,i.useLayoutEffect)(()=>{let t=r.current,{parentNode:i}=t||{};return n?.placeholderFallBackMounted(e,l.name,!o.currentValue()),i&&!i.contains(s[0])&&s.reverse().forEach(e=>{"LINK"===e.tagName&&"prefetch"===e.rel&&(e.rel=""),i.insertBefore(e,t.nextSibling)}),()=>{n?.placeholderFallBackUnmounted(e,l.name,!o.currentValue()),s.forEach(e=>e.parentNode?.removeChild(e))}},[]),r},o=({id:e,content:r})=>{let s=n(e,r);return t(i).createElement("input",{type:"hidden","data-lazy-begin":e,ref:s})}}),n("lO9oD",function(t,r){e(t.exports,"useSubscription",()=>i);var s=a("5uXOq");function i({context:e,load:t,onValue:r}){let{subscribe:i,currentValue:a}=(0,s.useContext)(e);(0,s.useMemo)(()=>{let e=null,s=()=>{let s=r(a());return s&&t(),s&&e&&e(),s};e=s()?null:i(s)},[])}}),n("WOtQc",function(r,s){e(r.exports,"createComponentServer",()=>n);var i=a("5uXOq");function n({dataLazyId:e,defer:r,loader:s,moduleId:n,ssr:o}){return l=>{let c=o?function(e,t){try{return(0,a("7AnOd").getExport)(t())}catch(e){throw(0,a("bCf8q").createLoaderError)(e)}}(0,s):null,{fallback:u}=(0,i.useContext)(a("7In2L").LazySuspenseContext),{crossOrigin:d,manifest:h}=(0,a("ddkdN").getConfig)();return t(i).createElement(t(i).Fragment,null,t(i).createElement("input",{type:"hidden","data-lazy-begin":e}),r!==a("fVdZG").PHASE.LAZY&&a("a6rDZ").getAssetUrlsFromId(h,n)?.map(e=>t(i).createElement("link",{key:e,rel:r===a("fVdZG").PHASE.PAINT?"preload":"prefetch",href:e,crossOrigin:d,as:"script"})),c?t(i).createElement(c,l):u,t(i).createElement("input",{type:"hidden","data-lazy-end":e}))}}}),n("fCMWS",function(t,r){e(t.exports,"PRIORITY",()=>s),e(t.exports,"RETRY_DELAY",()=>i),e(t.exports,"RETRY_FACTOR",()=>a);let s={HIGH:0,LOW:2},i=300,a=1}),n("atSTR",function(t,r){e(t.exports,"createDeferred",()=>s);let s=({loader:e,preload:t})=>{let r;let s={promise:new Promise(e=>{r=t=>{let r;s.result=t,t.default||(r={default:t}),e(r||t)}}),result:void 0,preload:()=>{s.result||t().then(e=>{s.result=e}).catch(()=>{})},start:()=>s.result?(r(s.result),Promise.resolve()):e().then(r)};return s}}),n("qkBMj",function(t,r){function s({moduleId:e,rel:t}){let{manifest:r}=(0,a("ddkdN").getConfig)(),s=(0,a("a6rDZ").getAssetUrlsFromId)(r,e);if(!s)throw Error("Unsupported preload strategy");let i=s.map(e=>(0,a("5VuPF").insertLinkTag)(e,t));return()=>{for(let e of i)e()}}e(t.exports,"preloadAsset",()=>l);let i={then:()=>i,catch:()=>i,finally:()=>i};function n({loader:e,rel:t}){if("undefined"==typeof __webpack_require__||"undefined"==typeof __webpack_get_script_filename__)throw Error("Unsupported preload strategy");let r=__webpack_require__.e,s=[];__webpack_require__.e=function(e){let r=__webpack_get_script_filename__(e);return s.push((0,a("5VuPF").insertLinkTag)(r,t)),i};try{e()}catch(e){}return __webpack_require__.e=r,()=>{for(let e of s)e()}}function o({loader:e}){return e(),a("dwdrq").noopCleanup}function l({loader:e,moduleId:t,priority:r}){if((0,a("7AnOd").isNodeEnvironment)())return a("dwdrq").noopCleanup;a("cEm1b").GlobalReactLooselyLazyProfiler.current?.onPreload(t,r);let i=r===a("fCMWS").PRIORITY.HIGH?"preload":"prefetch";for(let r of[s,n,o])try{return r({loader:e,moduleId:t,rel:i})}catch(e){}return a("dwdrq").noopCleanup}}),n("5VuPF",function(t,r){e(t.exports,"insertLinkTag",()=>s);function s(e,t){if(document.querySelector(`link[href="${e}"]`)||document.querySelector(`script[src="${e}"]`))return a("dwdrq").noopCleanup;let{crossOrigin:r}=(0,a("ddkdN").getConfig)(),s=document.createElement("link");s.rel=t,s.as="script",r&&(s.crossOrigin=r),s.href=e;let i=a("cEm1b").GlobalReactLooselyLazyProfiler.current,n=null;if(i){let t={identifier:e},r=()=>{s.removeEventListener("onload",r),n=null,i.onLoadComplete(t)};s.addEventListener("onload",r),n=r,i.onLoadStart(t)}return document.head?.appendChild(s),()=>{s.parentNode===document.head&&document.head?.removeChild(s),n&&s.removeEventListener("onload",n)}}}),n("aoIf8",function(t,r){e(t.exports,"retry",()=>n);let s=(e,t)=>{let{attempt:r}=e,{delay:s,factor:i}=t,a=r-1;return 1===a||0===s?0:s+i*s*(a-2)},i=e=>new Promise(t=>setTimeout(t,e)),a=e=>({delay:Math.max(0,e.delay??0),factor:Math.max(0,e.factor??0),maxAttempts:Math.max(0,e.maxAttempts??0)});function n(e,t={}){let r=a(t),{maxAttempts:o}=r,l={attempt:1,attemptsRemaining:o},c=async t=>{if(0===l.attemptsRemaining)throw t;l.attempt+=1,l.attemptsRemaining-=1;let a=s(l,r);return a&&await i(a),e().catch(c)};return e().catch(c)}}),n("9E7Uh",function(t,r){e(t.exports,"default",()=>n);var s=a("bhUJ4");let i={initialPollInterval:5e3,idleTimeout:3e4,multiplierCallback:e=>e+e};class n{constructor(e,t,r,n){if(this.start=()=>{this.browserInteractionTime.startTimer(),this.browserInteractionTime.addTimeIntervalEllapsedCallback({callback:e=>this._sendDwellEvent(this._eventData,this._searchSessionId,e,!1),timeInMilliseconds:this._timing.initialPollInterval,multiplier:this._timing.multiplierCallback}),"undefined"!=typeof window&&window.addEventListener("beforeunload",this._onBeforeUnload)},this.stop=()=>{this.browserInteractionTime.isRunning()&&this._sendDwellEvent(this._eventData,this._searchSessionId,this.browserInteractionTime.getTimeInMilliseconds(),!0),this.browserInteractionTime.stopTimer()},this.newPage=(e,t)=>{(0,a("ibWJJ").validateDwellBaseEvent)(e),this.stop(),this.browserInteractionTime.reset(),this.setEventData(e),this.setSearchSessionId(t),this.start()},this.setEventData=e=>{this._eventData=e},this.getEventData=()=>this._eventData,this.setSearchSessionId=e=>{this._searchSessionId=e},this.getSearchSessionId=()=>this._searchSessionId,this.destroy=()=>{this.browserInteractionTime.destroy(),"undefined"!=typeof window&&window.removeEventListener("beforeunload",this._onBeforeUnload)},this._onBeforeUnload=()=>{this.stop(),this.destroy()},this._sendDwellEvent=(e,t,r,s)=>{this._trackCallback({action:"dwelled",actionSubject:e.actionSubject,actionSubjectId:e.actionSubjectId,source:e.source,containerType:e.containerType,containerId:e.containerId,objectType:e.objectType,objectId:e.objectId,attributes:{dwellTime:r,searchReferrer:t,finalDwellEvent:s,...e.attributes},tags:e.tags})},!e)throw Error("trackCallback is required for DwellTimeHelper");(0,a("ibWJJ").validateDwellBaseEvent)(t),this._trackCallback=e,this._eventData=t,this._searchSessionId=r,this._timing={...i,...n},this.browserInteractionTime=new s.default({idleTimeoutMs:this._timing.idleTimeout,checkCallbacksIntervalMs:500})}}}),n("6Lg6A",function(r,s){e(r.exports,"LazyWait",()=>n);var i=a("5uXOq");let n=({until:e,children:r})=>{let s=(0,i.useContext)(a("5poak").WaitContext),n=(0,i.useRef)(e&&s.currentValue()?1:0),o=(0,i.useRef)(new Set),l=(0,i.useRef)({subscribe:e=>(o.current.add(e),()=>{o.current.delete(e)}),currentValue:()=>n.current});return(0,i.useEffect)(()=>{let t=()=>{n.current=s.currentValue()&&e?1:0,o.current.forEach(e=>e())};return t(),s.subscribe(t)},[s,e]),t(i).createElement(a("5poak").WaitContext.Provider,{value:l.current},r)}}),n("lGgkA",function(t,r){e(t.exports,"LooselyLazy",()=>s);let s={init:e=>{(0,a("ddkdN").setConfig)(e),a("adSzG").LISTENERS.length=0,(0,a("j7rCb").setCurrent)(0),(0,a("7AnOd").isNodeEnvironment)()||(0,a("14COT").collect)()}}}),n("14COT",function(t,r){e(t.exports,"collect",()=>s);let s=()=>{let e=document.querySelectorAll("input[data-lazy-begin]"),{mode:t}=(0,a("ddkdN").getConfig)();for(let r=0,s=e.length;r<s;r+=1){let{lazyBegin:s}=e[r].dataset||{},i=t===a("7Ewwd").MODE.RENDER?(0,a("jM6DK").cloneElements)(e[r],s):(0,a("89lw9").refElements)(e[r],s);(0,a("fVdZG").COLLECTED).has(s)?(0,a("fVdZG").COLLECTED).get(s).push(i):(0,a("fVdZG").COLLECTED).set(s,[i])}}}),n("jM6DK",function(t,r){e(t.exports,"cloneElements",()=>s);let s=(e,t)=>{let r=document.createElement("div"),s=e;for(;(s=s.nextSibling)&&(!s.dataset||s.dataset.lazyEnd!==t);)r.appendChild(s.cloneNode(!0));return Array.from(r.childNodes)}}),n("89lw9",function(t,r){e(t.exports,"refElements",()=>s);let s=(e,t)=>{let r=[],s=e;for(;(s=s.nextSibling)&&(!s.dataset||s.dataset.lazyEnd!==t);)r.push(s);return r}}),n("5NkCx",function(r,s){e(r.exports,"default",()=>o);var i=a("awmeS");let n={initialPollInterval:5,pollBackoffRate:2,idleTimeout:30};class o{constructor(e,r,s,o,l){if(this.timeMeInitialized=!1,this.start=()=>{if(this.timeMeInitialized)throw Error("DwellTimeHelper should only be initialised once per page load.");this.timeMeInitialized=!0,this._initDwellTimeCounterAndPolling(),"undefined"!=typeof window&&window.addEventListener("beforeunload",()=>{this.stop()})},this.stop=()=>{t(i).isUserCurrentlyOnPage&&this._sendDwellEvent(this._eventData,this._searchSessionId,!0),t(i).stopAllTimers(),t(i).resetAllRecordedPageTimes(),t(i).timeElapsedCallbacks=[],this.timeMeInitialized=!1},this.newPage=(e,t)=>{(0,a("ibWJJ").validateDwellBaseEvent)(e),this.stop(),this._eventData=e,this._searchSessionId=t,this._initDwellTimeCounterAndPolling()},this._listForIdleEvents=()=>{document.addEventListener("mousemove",()=>{t(i).userActivityDetected()}),document.addEventListener("keyup",()=>{t(i).userActivityDetected()}),document.addEventListener("touchstart",()=>{t(i).userActivityDetected()}),window.addEventListener("scroll",()=>{t(i).userActivityDetected()});let e=document.getElementsByTagName("iframe");for(let r=0;r<e.length;r++){let s=e[r];try{s?.contentWindow?.document.addEventListener("mousemove",()=>{t(i).userActivityDetected()}),s?.contentWindow?.document.addEventListener("keyup",()=>{t(i).userActivityDetected()}),s?.contentWindow?.document.addEventListener("touchstart",()=>{t(i).userActivityDetected()})}catch(e){}}setInterval(()=>{!0!==t(i).isUserCurrentlyIdle&&(t(i).checkIdleState(),t(i).startTimer())},t(i).checkIdleStateRateMs)},this._initDwellTimeCounterAndPolling=()=>{this._dwellTimeHelperOptions?.iframeDwell&&(t(i).listForIdleEvents=this._listForIdleEvents),t(i).initialize({idleTimeoutInSeconds:this._timing.idleTimeout}),this._pollDwellTime(this._timing.initialPollInterval,this._searchSessionId,this._eventData)},this._pollDwellTime=(e,r,s)=>{t(i).callAfterTimeElapsedInSeconds(e,()=>{this._sendDwellEvent(s,r,!1),this._pollDwellTime(e*this._timing.pollBackoffRate,r,s)})},this._sendDwellEvent=(e,r,s)=>{let a={dwellTime:t(i).getTimeOnCurrentPageInMilliseconds(),searchReferrer:r,finalDwellEvent:s};this._trackCallback({action:"dwelled",actionSubject:e.actionSubject,actionSubjectId:e.actionSubjectId,source:e.source,containerType:e.containerType,containerId:e.containerId,containers:e.containers,objectType:e.objectType,objectId:e.objectId,attributes:{...a,...e.attributes},tags:e.tags})},!e)throw Error("trackCallback is required for DwellTimeHelper");(0,a("ibWJJ").validateDwellBaseEvent)(r),this._trackCallback=e,this._eventData=r,this._searchSessionId=s,this._timing={...n,...o},this._dwellTimeHelperOptions=l}}});var h={};e(h,"R50",()=>p),e(h,"R75",()=>g),e(h,"R100",()=>m),e(h,"R200",()=>f),e(h,"R300",()=>y),e(h,"R400",()=>E),e(h,"R500",()=>v),e(h,"Y50",()=>I),e(h,"Y75",()=>b),e(h,"Y100",()=>T),e(h,"Y200",()=>w),e(h,"Y300",()=>S),e(h,"Y400",()=>A),e(h,"Y500",()=>x),e(h,"G50",()=>C),e(h,"G75",()=>_),e(h,"G100",()=>O),e(h,"G200",()=>D),e(h,"G300",()=>k),e(h,"G400",()=>R),e(h,"G500",()=>N),e(h,"B50",()=>P),e(h,"B75",()=>M),e(h,"B100",()=>L),e(h,"B200",()=>F),e(h,"B300",()=>U),e(h,"B400",()=>j),e(h,"B500",()=>B),e(h,"B600",()=>W),e(h,"B700",()=>V),e(h,"P50",()=>G),e(h,"P75",()=>q),e(h,"P100",()=>$),e(h,"P200",()=>K),e(h,"P300",()=>Y),e(h,"P400",()=>Z),e(h,"P500",()=>H),e(h,"T50",()=>z),e(h,"T75",()=>X),e(h,"T100",()=>J),e(h,"T200",()=>Q),e(h,"T300",()=>ee),e(h,"T400",()=>et),e(h,"T500",()=>er),e(h,"N0",()=>es),e(h,"N10",()=>ei),e(h,"N20",()=>ea),e(h,"N30",()=>en),e(h,"N40",()=>eo),e(h,"N50",()=>el),e(h,"N60",()=>ec),e(h,"N70",()=>eu),e(h,"N80",()=>ed),e(h,"N90",()=>eh),e(h,"N100",()=>ep),e(h,"N200",()=>eg),e(h,"N300",()=>em),e(h,"N400",()=>ef),e(h,"N500",()=>ey),e(h,"N600",()=>eE),e(h,"N700",()=>ev),e(h,"N800",()=>eI),e(h,"N900",()=>eb),e(h,"N10A",()=>eT),e(h,"N20A",()=>ew),e(h,"N30A",()=>eS),e(h,"N40A",()=>eA),e(h,"N50A",()=>ex),e(h,"N60A",()=>eC),e(h,"N70A",()=>e_),e(h,"N80A",()=>eO),e(h,"N90A",()=>eD),e(h,"N100A",()=>ek),e(h,"N200A",()=>eR),e(h,"N300A",()=>eN),e(h,"N400A",()=>eP),e(h,"N500A",()=>eM),e(h,"N600A",()=>eL),e(h,"N700A",()=>eF),e(h,"N800A",()=>eU),e(h,"DN900",()=>ej),e(h,"DN800",()=>eB),e(h,"DN700",()=>eW),e(h,"DN600",()=>eV),e(h,"DN500",()=>eG),e(h,"DN400",()=>eq),e(h,"DN300",()=>e$),e(h,"DN200",()=>eK),e(h,"DN100",()=>eY),e(h,"DN90",()=>eZ),e(h,"DN80",()=>eH),e(h,"DN70",()=>ez),e(h,"DN60",()=>eX),e(h,"DN50",()=>eJ),e(h,"DN40",()=>eQ),e(h,"DN30",()=>e0),e(h,"DN20",()=>e1),e(h,"DN10",()=>e5),e(h,"DN0",()=>e2),e(h,"DN800A",()=>e3),e(h,"DN700A",()=>e6),e(h,"DN600A",()=>e9),e(h,"DN500A",()=>e7),e(h,"DN400A",()=>e8),e(h,"DN300A",()=>e4),e(h,"DN200A",()=>te),e(h,"DN100A",()=>tt),e(h,"DN90A",()=>tr),e(h,"DN80A",()=>ts),e(h,"DN70A",()=>ti),e(h,"DN60A",()=>ta),e(h,"DN50A",()=>tn),e(h,"DN40A",()=>to),e(h,"DN30A",()=>tl),e(h,"DN20A",()=>tc),e(h,"DN10A",()=>tu),e(h,"T30",()=>td),e(h,"L50",()=>th),e(h,"L75",()=>tp);const p="#FFEBE6",g="#FFBDAD",m="#FF8F73",f="#FF7452",y="#FF5630",E="#DE350B",v="#BF2600",I="#FFFAE6",b="#FFF0B3",T="#FFE380",w="#FFC400",S="#FFAB00",A="#FF991F",x="#FF8B00",C="#E3FCEF",_="#ABF5D1",O="#79F2C0",D="#57D9A3",k="#36B37E",R="#00875A",N="#006644",P="#DEEBFF",M="#B3D4FF",L="#4C9AFF",F="#2684FF",U="#0065FF",j="#0052CC",B="#0747A6",W="#669DF1",V="#8FB8F6",G="#EAE6FF",q="#C0B6F2",$="#998DD9",K="#8777D9",Y="#6554C0",Z="#5243AA",H="#403294",z="#E6FCFF",X="#B3F5FF",J="#79E2F2",Q="#00C7E6",ee="#00B8D9",et="#00A3BF",er="#008DA6",es="#FFFFFF",ei="#FAFBFC",ea="#F4F5F7",en="#EBECF0",eo="#DFE1E6",el="#C1C7D0",ec="#B3BAC5",eu="#A5ADBA",ed="#97A0AF",eh="#8993A4",ep="#7A869A",eg="#6B778C",em="#5E6C84",ef="#505F79",ey="#42526E",eE="#344563",ev="#253858",eI="#172B4D",eb="#091E42",eT="rgba(9, 30, 66, 0.02)",ew="rgba(9, 30, 66, 0.04)",eS="rgba(9, 30, 66, 0.08)",eA="rgba(9, 30, 66, 0.13)",ex="rgba(9, 30, 66, 0.25)",eC="rgba(9, 30, 66, 0.31)",e_="rgba(9, 30, 66, 0.36)",eO="rgba(9, 30, 66, 0.42)",eD="rgba(9, 30, 66, 0.48)",ek="rgba(9, 30, 66, 0.54)",eR="rgba(9, 30, 66, 0.60)",eN="rgba(9, 30, 66, 0.66)",eP="rgba(9, 30, 66, 0.71)",eM="rgba(9, 30, 66, 0.77)",eL="rgba(9, 30, 66, 0.82)",eF="rgba(9, 30, 66, 0.89)",eU="rgba(9, 30, 66, 0.95)",ej="#E6EDFA",eB="#DCE5F5",eW="#CED9EB",eV="#B8C7E0",eG="#ABBBD6",eq="#9FB0CC",e$="#8C9CB8",eK="#7988A3",eY="#67758F",eZ="#56637A",eH="#455166",ez="#3B475C",eX="#313D52",eJ="#283447",eQ="#202B3D",e0="#1B2638",e1="#121A29",e5="#0E1624",e2="#0D1424",e3="rgba(13, 20, 36, 0.06)",e6="rgba(13, 20, 36, 0.14)",e9="rgba(13, 20, 36, 0.18)",e7="rgba(13, 20, 36, 0.29)",e8="rgba(13, 20, 36, 0.36)",e4="rgba(13, 20, 36, 0.40)",te="rgba(13, 20, 36, 0.47)",tt="rgba(13, 20, 36, 0.53)",tr="rgba(13, 20, 36, 0.63)",ts="rgba(13, 20, 36, 0.73)",ti="rgba(13, 20, 36, 0.78)",ta="rgba(13, 20, 36, 0.81)",tn="rgba(13, 20, 36, 0.85)",to="rgba(13, 20, 36, 0.89)",tl="rgba(13, 20, 36, 0.92)",tc="rgba(13, 20, 36, 0.95)",tu="rgba(13, 20, 36, 0.97)",td="#292A2E",th="#94C748",tp="#B3DF72";r.rlb("2Lfdl");try{performance.mark("shared~vendor~atlassian~ar.js:eval-stop")}catch(e){}
//# sourceMappingURL=https://jira-frontend-bifrost.prod-east.frontend.public.atl-paas.net/assets/shared~vendor~atlassian~ar.f6a5ce5b.js.map
